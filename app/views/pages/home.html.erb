<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="msapplication-tap-highlight" content="no" />

  <title>DIETITIAN.HELP | Dashboard</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <%= stylesheet_link_tag 'ion.rangeSlider' %>


  <%= favicon_link_tag 'favicon.ico' %>


  <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon" />
  <!--[if lt IE 9]>
      <script src="bower_components/html5shiv/dist/html5shiv.min.js"></script>
      <script src="bower_components/respondJs/dest/respond.min.js"></script>
    <![endif]-->
</head>

<body id="">
  <!--Preloader
<div id="preloader" class="preloader table-wrapper">
    <div class="table-row">
      <div class="table-cell">
        <div class="la-ball-scale-multiple la-3x">
          <div></div>
          <div></div>
          <div></div>
        </div>
      </div>
    </div>
  </div> 
--> 
<%= render partial: 'pages/header' %>

    <!--Content-->
<%= render partial: 'pages/info' %>

<!-- Main form -->
        <div class="col-lg-3">
          <div class="content-box big-box box-shadow">
            <div onclick="checker(), gender(), ibw()", class="i-block w-refresh w-p-icon" style="float:right;cursor:pointer;">
                  <input id="switch5" class="radio radio-warning radio-big" type="checkbox" style="display:none" checked='true'>
                  <label for="switch5"></label>
                <%= image_tag('femaleselect.png', :id => "genderfspan", :style => 'display:none;max-width:80px;margin-right:0px;padding-bottom:25px;') %>
                <%= image_tag('maleselect.png', :id => "gendermspan", :style => 'display:block;max-width:80px;margin-right:0px;padding-bottom:25px;') %>
                </div>
            <h4><strong>Inline form</strong></h4>
            <form class="content-form form-inline">
              <div class="field-container form-group">
                <input type="string" id="dietin" onchange="diet()", class="inin form-control material input-lg", required>
                <label class="inlabel"for="dietin">Current Diet</label>
              </div>
              <div class="field-container form-group">
                <input type="string" id="dxinput", onchange="dx()", class="inin form-control material input-lg", required>
                <label class="inlabel"for="dxinput">Relevant Dx</label>
              </div>
              <div class="field-container form-group">
                <input type="number", id="wt", onchange="chart0(), cal(), pro(), fl(), bmi(), ibw()", class="inin form-control material input-lg" required>
                <label class="inlabel"for="wt">Current Body Weight</label>
              </div>
              <div class="field-container form-group">
                  <input type="text", id="date0", data-large-mode="true", data-large-default="true", class="inin form-control material input-lg identifica" required>
                  <label class="inlabel"for="date0">Date for CBW</label>
              </div>
              <div class="field-container form-group">
                <input type="number" id="ht" onchange="ibw(), bmi()", class="inin form-control material input-lg" required>
                <label class="inlabel"for="ht">Height</label>
              </div>
            </form>
            <br>
          </div>
        </div>
<!-- main form end -->

        <div class="col-lg-9">
          <div class="content-box box-shadow big-box">
            <div class="jumbotron">
              <div class="container">
                <h1>Assessment  </h1>
                <p id="assval" class="w-amount">
              <span id='agespan' class='w-amount'>- -</span>y/o <span>Resident</span> currently on <span id='cdietspan' class='w-amount'>- - </span> Diet to manage Dx of <span id="dx", class='w-amount'>- -</span>. Average intake has noted to range <span id='intakefromspan', class='w-amount'>- -</span>  <span id='intaketospan', class='w-amount'></span>with <span>assistance needed.</span> CBW of <span id="cbw" class='w-amount'>- -</span> lbs puts <span>RESIDENT</span> at BMI of <span id="bmispan" class="w-amount">- -</span> kg/m2 and at <span id="percentibw" class="w-amount">- -</span>% of IBW. <span id="wthistshow"class="w-amount"> Weight history shows</span> <span id="losshist" class="w-amount"></span><span id="loss1days" class="w-amount"></span><span id="loss2days" class="w-amount"></span><span id="loss3days" class="w-amount"></span><span id="lossdays" class="w-amount"></span><span id="and" class="w-amount"></span><span id="gainhist" class="w-amount"></span><span id="gain1days" class="w-amount"></span><span id="gain2days" class="w-amount"></span><span id="gain3days" class="w-amount"></span><span id="gaindays" class="w-amount"></span>. Abnormal lab values noted, MD/NP aware. <span>Pressure ulcer</span>. <span>Resident</span> under <span>MED</span>increasing significantly the risk for <span>N/V/D</span>. Will continue to monitor all nutritional values and make changes as PRN.

            </p> <button class="btn btn-primary btn-lg waves waves-button waves-effect waves-float" onclick="setTimeout(rchart0, 500)">Learn more</button></p>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-5">
          <div class="content-box big-box box-shadow">
            <h4><strong>Inline form</strong></h4>
            <form class="content-form form-inline">
              <div class="field-container form-group">
                <input type="number" id="30daysinput", onchange="chart0()", class="inin form-control material input-lg" required>
                <label class="inlabel"for="30daysinput">30 Days Weight</label>
              </div>  
              <div class="field-container form-group">
                <input type="text", id="date1", data-theme="DH", data-large-mode="true", data-large-default="true", class="inin form-control material input-lg identifica" required>
                <label class="inlabel"for="date1">Date for 30 days Wt</label>
              </div>  
              <div class="field-container form-group">
                <input type="number" id="90daysinput", onchange="chart0()", class="inin form-control material input-lg" required>
                <label class="inlabel"for="90daysinput">90 Days Weight</label>
              </div>  

              <div class="field-container form-group">
                <input type="text", id="date2",  data-theme="DH", data-large-mode="true", data-large-default="true", class="inin form-control material input-lg identifica" required>
                <label class="inlabel"for="date2">Date for 90 days Wt</label>
              </div>  
              <div class="field-container form-group">
                <input type="number" id="180daysinput", onchange="chart0()", class="inin form-control material input-lg" required>
                <label class="inlabel"for="180daysinput">180 Days Weight</label>
              </div>  
              <div class="field-container form-group">
                <input type="text", id="date3",  data-theme="DH", data-large-mode="true", data-large-default="true", class="inin form-control material input-lg identifica" required>
                <label class="inlabel"for="date3">Date for 180 days Wt</label>
              </div>
              <br>
              <br> 
          </div>
        </div>
        <div class="col-lg-3">
          <div class="content-box big-box box-shadow">
             <h4><strong>Intake</strong></h4>
                  <div id='parentofselect' class="form-inline" onclick="intake()">
                  <select id="intakefromin" class="cs-select cs-skin-border">
                      <option value="" disabled>From</option>
                      <option value="100%">100%</option>
                      <option value="75%">75%</option>
                      <option value="50%">50%</option>
                      <option value="25%">25%</option>
                      <option value="0%">0%</option>
                      <option value="1">Refuse</option>
                    </select>
                    <select id="intaketoin" class="cs-select cs-skin-border 1">
                      <option value="" disabled>To</option>
                      <option value="100%">100%</option>
                      <option value="75%">75%</option>
                      <option value="50%">50%</option>
                      <option value="25%">25%</option>
                      <option value="0%">0%</option>
                    </select>
                  </div>
                </div>
          </div>
        </div>

        <div class="col-lg-3">
          <div class="content-box big-box box-shadow">
                    <div class="form-inline">
                    <h4><strong>Weight Goal</strong></h4>
                    <select id="goals" class="cs-select cs-skin-border" onclick="cal()">
                      <option value="" disabled>Goal</option>
                      <option id="gainwt" value="gainwt">Gain Weight</option>
                      <option value="maintainwt"  selected>Maintain Weight</option>
                      <option value="losewt">Lose Weight</option>
                    </select>
                  </div>
                <div class="checkbox checkbox-danger checkbox-big">
                  <input type="checkbox" id="checkbox1">
                  <label for="checkbox1">
                      Diabetes
                  </label>
                </div>
                <div class="checkbox checkbox-danger checkbox-big">
                  <input type="checkbox" id="checkbox2">
                  <label for="checkbox2">
                      Hypertension
                  </label>
                </div>
                <div class="checkbox checkbox-danger checkbox-big">
                  <input type="checkbox" id="checkbox3">
                  <label for="checkbox3">
                      Renal Issues
                  </label>
                </div>
          </div>
        </div>
    <!--FORM-->
            <div class="col-sm-3 col-lg-5">
              <div class="content-box box-shadow ultra-widget">
                <div class="w-content big-box">
                  <div class="w-progress">
          
            <form class="content-form form-inline">
  
<!-- FOOD NEAR ME PLUGIN
              <div class="form-group">
                <input type="string" id="location" class="form-control material input-lg", placeholder="Location" onchange="loc()">
              </div> 
              <div class="form-group">
                <input type="string" id="radius" class="form-control material input-lg", placeholder="How far from you?">
              </div>

              -->
<!-- FOOD SEARCH
              <div class="form-group">
                <input type="string" id="food" class="form-control material input-lg", placeholder="What are you craving?eg.Pizza,Burger, Pasta" onchange="zomato(), run()">
              </div>

            -->
                  <h4><strong>Intake</strong></h4>
                  <div id='parentofselect' class="form-inline" onclick="intake()">
                  <select id="intakefromin" class="cs-select cs-skin-border">
                      <option value="" disabled>From</option>
                      <option value="100%">100%</option>
                      <option value="75%">75%</option>
                      <option value="50%">50%</option>
                      <option value="25%">25%</option>
                      <option value="0%">0%</option>
                      <option value="1">Refuse</option>
                    </select>
                    <select id="intaketoin" class="cs-select cs-skin-border 1">
                      <option value="" disabled>To</option>
                      <option value="100%">100%</option>
                      <option value="75%">75%</option>
                      <option value="50%">50%</option>
                      <option value="25%">25%</option>
                      <option value="0%">0%</option>
                    </select>
                  </div>
                    <div class="form-inline">
                    <h4><strong>Weight Goal</strong></h4>
                    <select id="goals" class="cs-select cs-skin-border" onclick="cal()">
                      <option value="" disabled>Goal</option>
                      <option id="gainwt" value="gainwt">Gain Weight</option>
                      <option value="maintainwt"  selected>Maintain Weight</option>
                      <option value="losewt">Lose Weight</option>
                    </select>
                  </div>
                <div class="checkbox checkbox-danger checkbox-big">
                  <input type="checkbox" id="checkbox1">
                  <label for="checkbox1">
                      Diabetes
                  </label>
                </div>
                <div class="checkbox checkbox-danger checkbox-big">
                  <input type="checkbox" id="checkbox2">
                  <label for="checkbox2">
                      Hypertension
                  </label>
                </div>
                <div class="checkbox checkbox-danger checkbox-big">
                  <input type="checkbox" id="checkbox3">
                  <label for="checkbox3">
                      Renal Issues
                  </label>
                </div>

            </form>                
              </div>
              </div>







              <div class="content-box box-shadow ultra-widget">
                <div class="w-content big-box">
                  <div id="mealplan1">
                      
                    <div id="onefood" class="onefood">

                    </div>
                    <div onclick="run()" id="onefood1" class="onefood">
                      hello

                    </div>

<gcse:search onchange="shearch()"></gcse:search>
<gcse:searchresults-only></gcse:searchresults-only>

                    
                    



                  
   
                  </div>
                </div>
              </div>
            </div>




                </div>
              </div>
<!--WEIGHT HISTORY-->
            <div class="col-lg-4">
              <div class="content-box">
                <div class="content-title big-box i-block">
                  <h4 class="zero-m">Weight History</h4>
                  <div class="content-tools i-block pull-right">
                    <span class="text-uppercase pull-right">Plot data</span>
                    <a id="expanding", class="repeat-btn", onclick="setTimeout(rchart0, 500)">
                      <i class="fa fa-repeat"></i>
                    </a>
                  </div>
                </div>
                <div class="clearfix"></div>
                <div class="big-box">
                  <div class="chartjs-container">
                    <canvas id="chart-line" height="254" width="635" style="width: 635px; height: 254px;"></canvas>
                  </div>
                </div>
              </div>
            </div>
<!--ANTHROPOMETRICS-->
            <div class="col-sm-2 col-lg-2">
              <div class="ultra-widget">
                <div class="w-content">
                  <span class="w-refresh w-p-icon"></span>
                  <div id="bmiresult" class="emptygray" data-counter="0">
                    <span class="text-uppercase w-name emptygray">BMI:</span>
                    <%= image_tag('animat-compass-color.gif', :id => "loader", :style => 'display:none;max-width:80px') %>
                    <span  id="bmispan" class="w-amount green">21.2</span>
                    <span class="w-name emptygray">kg/m2</span>
                  </div>
                  <div class="emptygray">
                  <span class="text-uppercase w-name">IBW</span>
                <div id="ibwmale" data-counter="0" style="float:left; margin-top:0%;padding-right:0%;">
                  <%= image_tag('Gordon.gif', :id => "loaderg", :style => 'display:none;max-width:100px') %>

                  <span id="ibwmalespan" class="w-amount" style="display:block">150</span>
                  <span class="text-uppercase emptygray" style="position:absolute;display: block; padding-left:10%;margin-top:-2%">Male</span>
                </div>
                <span class="w-amount2 emptygray" style="position:absolute;right:49%;top:10%;"></span>
                <div id="ibwfemale" class="emptygray" data-counter="0" style="margin-top:0%;margin-left:51%;">
                  <%= image_tag('Gordon2.gif', :id => "loaderg2", :style => 'display:none;max-width:100px') %>

                  <span id="ibwfemalespan" class="w-amount" >150</span>
                  <span class="text-uppercase emptygray" style="display: block; padding-left:20%;margin-top:-5%">Female</span>
                </div>
                <div class="i-block w-refresh w-p-icon" style="float:right; margin-top:-3%">
                  <input onclick="ibw()" id="switch4" class="switcher switcher-warning" type="checkbox">
                  <label for="switch4"></label>
                  <span id="inkg" style="float:right;display:none" class="w-name emptygray">kg</span>
                <span id="inlbs"  style="float:right;display:block" class="w-name">lbs</span>
                </div>
                
                
                </div>
                <div style="clear:both"></div>
                <div id="calrequirement" class="emptygray" data-counter="0">
                    <span class="text-uppercase w-name emptygray">Calories/day</span>

                    <span class="w-amount red">492</span>
                    <span class="w-name emptygray">kCal </span>
                  </div>
                  <div  id="prorequirement" class="emptygray" data-counter="0">
                    <span class="text-uppercase w-name emptygray">Protein/day</span>
                    <br>
                    <span  class="w-amount green">20</span>
                    <span class="w-name emptygray">g</span>
                  </div>
                  <div id="flrequirement" class="emptygray" data-counter="0">
                    <span class="text-uppercase w-name emptygray">Water/day</span>
                    <span class="w-amount yellow">1500</span>
                    <span class="w-name emptygray">oz</span>
                </div>
                <div class="clear:both"></div>
              </div>
            </div>
          </div>
<!--TODO LIST-->

          <div class="col-lg-4 content-box box-shadow big-box todo-list">

            <div class="sort-todo">
              <a class="all-todo" href="#">All</a>
              <a class="active-todo" href="#">Active <span class="badge yellow-bg"></span></a>
              <a class="complete-todo" href="#">Complete <span class="badge red-bg"></span></a>
              <a class="archive-todo" href="#">Archive <span class="badge green-bg"></span></a>
            </div>

            <form id="add_todo" method="post">
              <div class="form-group add-todo">
                <div class="input-group">
                  <div class="input-group-addon"><i class="fa fa-pencil green"></i></div>
                  <input type="text" class="form-control name-of-todo" placeholder="Write here your to do item">
                </div>
              </div>
            </form>

            <div class="panele">
              <div class="panel-body todo">
                <ul class="list-group">
                  <li class="list-group-item list-success">
                    <div class="checkbox">
                      <input type="checkbox" id="checkbox" />
                      <label for="checkbox">
                        Searches
                      </label>
                    </div>
                    <div class="pull-right action-btns">
                      <a class="archive"><span class="fa fa-archive"></span></a>
                      <a class="trash"><span class="fa fa-close"></span></a>
                    </div>
                  </li>
                  <li class="list-group-item  list-danger">
                    <div class="checkbox">
                      <input type="checkbox" id="checkbox2" />
                      <label for="checkbox2">
                        Marketing
                      </label>
                    </div>
                    <div class="pull-right action-btns">
                      <a class="archive"><span class="fa fa-archive"></span></a>
                      <a class="trash"><span class="fa fa-close"></span></a>
                    </div>
                  </li>
                  <li class="list-group-item  list-warning checked-todo">
                    <div class="checkbox">
                      <input type="checkbox" id="checkbox3" checked/>
                      <label for="checkbox3">
                        Links
                      </label>
                    </div>
                    <div class="pull-right action-btns">
                      <a class="archive"><span class="fa fa-archive"></span></a>
                      <a class="trash"><span class="fa fa-close"></span></a>
                    </div>
                  </li>
                  <li class="list-group-item  list-info">
                    <div class="checkbox">
                      <input type="checkbox" id="checkbox4" />
                      <label for="checkbox4">
                        E-mails
                      </label>
                    </div>
                    <div class="pull-right action-btns">
                      <a class="archive"><span class="fa fa-archive"></span></a>
                      <a class="trash"><span class="fa fa-close"></span></a>
                    </div>
                  </li>
                  <li class="list-group-item  list-danger">
                    <div class="checkbox">
                      <input type="checkbox" id="checkbox5" />
                      <label for="checkbox5">
                        Social Media
                      </label>
                    </div>
                    <div class="pull-right action-btns">
                      <a class="archive"><span class="fa fa-archive"></span></a>
                      <a class="trash"><span class="fa fa-close"></span></a>
                    </div>
                  </li>
                  <li class="list-group-item  list-primary">
                    <div class="checkbox">
                      <input type="checkbox" id="checkbox6" />
                      <label for="checkbox6">
                        Advertising
                      </label>
                    </div>
                    <div class="pull-right action-btns">
                      <a class="archive"><span class="fa fa-archive"></span></a>
                      <a class="trash"><span class="fa fa-close"></span></a>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
            <div class="checkbox clear-todo pull-left">
              <input type="checkbox" id="clear" />
              <label for="clear">
                Mark all as complete
              </label>
            </div>
            <button id="clear-comp" class="btn btn-warning waves text-uppercase pull-right">Clear Completed</button>


          </div>
      </div>
    </div>
  </div>





    <!--Scripts-->
<%= javascript_include_tag 'jquery.min' %>
<%= javascript_include_tag 'jquery-ui.min' %>
<%= javascript_include_tag 'jquery.bootstrap.wizard' %>
<%= javascript_include_tag 'jquery.flot' %>
<%= javascript_include_tag 'jquery.flot.resize' %>
<%= javascript_include_tag 'bootstrap.min' %>
<%= javascript_include_tag 'metisMenu.min' %>
<%= javascript_include_tag 'waves.min' %>
<%= javascript_include_tag 'moment.min' %>
<%= javascript_include_tag 'modernizr.custom' %>
<%= javascript_include_tag 'jquery.mCustomScrollbar' %>
<%= javascript_include_tag 'cta.min' %>
<%= javascript_include_tag 'typed' %>
<%= javascript_include_tag 'ion.rangeSlider' %>
  
  <!--Menu-->

  <%= javascript_include_tag 'classie' %>
  <%= javascript_include_tag 'gnmenu' %>


  <!--Selects-->

  <%= javascript_include_tag 'selectFx' %>

  <%= javascript_include_tag 'p5' %>


  <!--Flot-->

  <%= javascript_include_tag 'jquery.flot' %>
  <%= javascript_include_tag 'jquery.flot.resize' %>
  <%= javascript_include_tag 'curvedLines' %>
  <%= javascript_include_tag 'jquery.flot.orderBars' %>

  <!--Custom Flot Charts-->

  <%= javascript_include_tag 'Chart' %>
  <%= javascript_include_tag 'line-chart-1' %>
  <%= javascript_include_tag 'line-chart-2' %>
  <%= javascript_include_tag 'line-chart-3' %>
  <%= javascript_include_tag 'bar-chart' %>

  <!--C3.js-->

  <%= javascript_include_tag 'd3.min' %>
  <%= javascript_include_tag 'c3.min' %>


  <!--EasyPieChart-->
 <%= javascript_include_tag 'jquery.easypiechart.min' %>

  <!--Zabuto Calendar-->

  <%= javascript_include_tag 'zabuto_calendar.min' %>


  <!--Simple Weather-->

  <%= javascript_include_tag 'jquery.simpleWeather.min' %>





    <!--Custom Scriptssasa-->

<%= javascript_include_tag 'common' %>
<%= javascript_include_tag 'pikaday' %>
<%= javascript_include_tag 'pikaday.jquery' %>
<%= javascript_include_tag 'example' %>


  <!--Notification-->
<%= javascript_include_tag 'jsface' %>
<%= javascript_include_tag 'snap.svg-min' %>
<%= javascript_include_tag 'sweetalert.min' %>
<%= javascript_include_tag 'smoke.min' %>
<%= javascript_include_tag 'notificationFx' %>


<!-- DO NOT TOUCH WITHOUT REVIEWING -->

  <script>
  var ctx2 = document.getElementById("chart-line").getContext("2d");
  var myLine = new Chart(ctx2).Line(lineChartData, {
          responsive: true
      });
  var parent = document.getElementById("assessment")
    $(function () {



      /*c3.js*/ // NEEDED FOR THE CHART
      var chart = c3.generate({
        bindto: '#reg-history',
        size: {
          height: 90
        },
        data: {
          columns: [
            ['New users', 30, 35, 45, 33, 48, 54, 41, 66, 49, 43, 38, 46]
          ]
        },
        legend: {
          show: false
        },
        color: {
          pattern: ['#fff']
        },
        point: {
          r: 3
        },
        axis: {
          x: {
            show: false
          },
          y: {
            show: false
          }
        }
      });
            // show the notification
 



      //Tooltips for Flot Charts
      if ($(".flot-chart")[0]) {
        $(".flot-chart").bind("plothover", function (event, pos, item) {
          if (item) {
          var x = item.datapoint[0].toFixed(2),
            y = item.datapoint[1].toFixed(2);

          $(".flot-tooltip").html(x + " of " + y)
            .css({top: item.pageY+5, left: item.pageX+5})
            .fadeIn(200);
        } else {
          $(".flot-tooltip").hide();
        }
        });

        $("<div class='flot-tooltip'></div>").appendTo("body");
      }
    });
  </script>

  <!-- Food list API-->



  <!-- Equation can be simplified into two variables -->
<script>


$(document).ready(function(){
    $(document).ajaxStart(function(){
        $("#wait").css("display", "block");
    });
    $(document).ajaxComplete(function(){
        $("#wait").css("display", "none");
    });
    $("button").click(function(){
        $("#txt").load("demo_ajax_load.asp");
    });

});

var food1;
var lat;
var lng;
var d1;
var parsed;
var ager;
var age = function getAge(d1, d2){
    var d1 = document.getElementById('dobin').value;
    var d2 = new Date();
    var diff = d2.getTime() - parseDate(document.getElementById('dobin').value).getTime();
    ager = Math.floor(diff / (1000 * 60 * 60 * 24 * 365.25
));$(function(){
    $("#agespan").typed({
      strings: [ager.toString()],
      typeSpeed: 50
    });
  });

};

// parse a date in yyyy-mm-dd format
function parseDate(input) {
  var parts = input.match(/(\d+)/g);
  // new Date(year, month [, date [, hours[, minutes[, seconds[, ms]]]]])
  return new Date(parts[0], parts[1]-1, parts[2]); // months are 0-based
}

function loc() { 

  var base = 'http://maps.googleapis.com/maps/api/geocode/json?address=';
  var food = document.getElementById("location").value;
  var url = base + food;
    $.getJSON(url, function(data) {
      lat = data.results[0].geometry.location.lat;
      lng = data.results[0].geometry.location.lng;
    console.log(data)      
    });

};


function zomato() {

  document.getElementById("onefood").innerHTML = ''
  var base = 'https://developers.zomato.com/api/v2.1/search?apikey=8d0401fb02d07321de28693fa2a18355&'
  var food = 'q=' + document.getElementById("food").value;
  var radius = document.getElementById("radius").value;
  var location = '&lat=' + lat + '&lon=' + lng;
  var url = base + food + location + radius;
    $.getJSON(url, function(data) 
                {
        for(var i = 0; i < data.restaurants.length; i++) {
    var obj = data.restaurants[i].restaurant;

      document.getElementById("onefood").innerHTML += '<span class="text-uppercase w-name emptygray">' + i  + ' ' + obj.name + '</span><br>'; 
          

          }
                  
                  });
  };

function run() {

  document.getElementById("onefood1").innerHTML = ''
  var base = 'http://api.nal.usda.gov/ndb/search/?format=json&'
  var food = 'q=' + document.getElementById("food").value;
  var url = base + food + '&sort=r&ds=Standard Reference&max=8&offset=0&api_key=Dd2cDdK3zCP6teHFkZk06XRTq4bgC1kMo3NPnLxm'
    $.getJSON(url, function(data) {
    //data is the JSON string\

    for(var i = 0; i < data.list.item.length; i++) {
    var obj = data.list.item[i];

      document.getElementById("onefood1").innerHTML += '<span class="text-uppercase w-name emptygray">' + i  + ' ' + obj.name + '</span><br>'; 
          
        function run1() {
          document.getElementById("onefood1").innerHTML = ''
          var base1 = 'http://api.nal.usda.gov/ndb/reports/?ndbno='
          var food1 = obj.ndbno
          var url1 = base1 + food1 + '&type=b&format=json&api_key=Dd2cDdK3zCP6teHFkZk06XRTq4bgC1kMo3NPnLxm'
          $.getJSON(url1, function(data1) {
              console.log(data1.report.food.nutrients[1].value)
              document.getElementById("onefood1").innerHTML += data1.report.food.nutrients[1].value + '<br>'
                  });
                          };


          }

});
}; 
 




</script>
  <%= javascript_include_tag 'datedropper' %>
  <%= javascript_include_tag 'nprogress' %>
  <%= javascript_include_tag 'medical' %>


<script>


$('#dobin').pikaday({
        field: document.getElementById('dobin'),
        format: 'YYYY-MM-DD',
        defaultDate: '1/23/2014',
    });
$('#date0').pikaday({
        field: document.getElementById('date0'),
        format: 'M/D/YYYY',
        defaultDate: '1/23/2014',
        onStart: function ()
            {
                var date = new Date();
                this.setDate( date.getFullYear(), date.getMonth() + 1, date.getDate() )
            },
    });
$('#date1').pikaday({
        field: document.getElementById('date1'),
        format: 'M/D/YYYY',
        onSelect: function() {
            console.log(this.getMoment().format('YYYY, M, D'));
        }
    });
$('#date2').pikaday({
        field: document.getElementById('date2'),
        format: 'M/D/YYYY',
        onSelect: function() {
            console.log(this.getMoment().format('Do MMMM YYYY'));
        }
    });
$('#date3').pikaday({
        field: document.getElementById('date3'),
        format: 'M/D/YYYY',
        onSelect: function() {
            console.log(this.getMoment().format('Do MMMM YYYY'));
        }
    });
window.onload = function() {

  };
var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
    acc[i].onclick = function(){
        this.classList.toggle("active");
        this.nextElementSibling.classList.toggle("show");
  }
}


    $(function () {
      $(".todo ul").sortable();

      $("#add_todo").on('submit', function (e) {
        e.preventDefault();

        var $toDo = $(this).find('.name-of-todo'),
          toDo_name = $toDo.val(),
          border = ['list-success', 'list-primary', 'list-warning', 'list-danger', 'list-info'],
          randomClass = border[Math.floor(Math.random() * border.length)];


        if (toDo_name.length >= 3) {

          var newid = "new" + "" + Math.random().toString(36).substring(11);
          // Create Event Entry
          $(".todo ul").append(
            '<li id="' + 'item-' + newid + '" class="list-group-item  ' + randomClass + ' list-item"><div class="checkbox"><input type="checkbox" id="' + newid + '" /><label for="' + newid + '">' + toDo_name + '</label></div><div class="pull-right action-btns"><a class="archive"><span class="fa fa-archive"></span></a><a class="trash"><span class="fa fa-close"></span></a></div></li>'
          );
          count();



          var eventObject = {
            title: $.trim($("#" + newid).text()),
            className: $("#" + newid).attr("data-bg"), // use the element's text as the event title
            stick: true
          };

          // store the Event Object in the DOM element so we can get to it later
          $("#" + newid).data('eventObject', eventObject);

          // Reset input
          $toDo.val('').focus();
        } else {
          $toDo.focus();
        }
      });

      //Checking items
      $(document).on('mouseover', '.list-group .checkbox', function () {
        $('.list-group input:checkbox').each(function () {
          $(this).change(function () {
            if ($(this).is(":checked")) {
              $(this).closest(".list-group-item").addClass("checked-todo").removeClass("list-item");
            } else {
              $(this).closest(".list-group-item").removeClass("checked-todo");
            }

            count();
          });
        });
      });

      //Check archive items
      $(document).on('click', '.action-btns .archive', function (e) {
        $(this).closest(".list-group-item").removeClass("checked-todo list-item").addClass("archive-item").hide();
        e.preventDefault();
        count();
      });

      count();


      $(".list-group-item").addClass("list-item");

      $('.list-group li').each(function () {
        if ($(this).hasClass("checked-todo")) {
          $(this).removeClass("list-item");
        };
      });

      //Show all items
      $('.all-todo').click(function (e) {
        $('.archive-item').hide();
        $('.checked-todo, .list-item').show();
        e.preventDefault();
      });

      //Show only active items
      $('.active-todo').click(function (e) {
        $('.checked-todo').hide();
        $('.archive-item').hide();
        $('.list-item').show();
        e.preventDefault();
      });

      //Show only completed items
      $('.complete-todo').click(function (e) {
        $('.list-item').hide();
        $('.archive-item').hide();
        $('.checked-todo').show();
        e.preventDefault();
      });

      //Show only archive items
      $('.archive-todo').click(function (e) {
        $('.list-item').hide();
        $('.checked-todo').hide();
        $('.archive-item').show();
        e.preventDefault();
      });

      //Mark all as complete
      $('#clear').change(function () {
        if ($(this).is(":checked")) {
          $(".list-group-item").addClass("checked-todo").removeClass("list-item");
          $("input:checkbox").prop('checked', $(this).prop("checked"));
        } else {
          $(".list-group-item").removeClass("checked-todo").addClass("list-item");
          $("input:checkbox").prop('checked', $(this).prop("checked"));
        }
        count();
      });

      //Remove all completed items
      $('#clear-comp').click(function () {
        var clearedComp = $('.checked-todo').remove();
        count();
      });

      //Remove one completed item
      $(document).on('click', '.trash', function (e) {
        var clearedCompItem = $(this).closest(".list-group-item").remove();
        e.preventDefault();
        count();
      });

      //Count items
      function count() {
        var checked = $('.checked-todo').length,

          archive = $('.archive-item').length,
          all = $('.list-group-item').length - archive,
          active = all - checked;

        $('.complete-todo span').text(checked);
        $('.active-todo span').text(active);
        $('.archive-todo span').text(archive);
      };
    });
function checker() {

  $('#gendermspan').click(function() {$('#switch5').prop('checked', true);})
  $('#genderfspan').click(function() {$('#switch5').prop('checked', false);})
}


// MEDICAL FAST EDITING

/*
 *
 *   DIETITIAN.HELP
 *   ALL RIGHTS RESERVED
 *
*/

function diet() {

  $("#cdietspan")[0].innerText = document.getElementById('dietin').value;
  $(function(){
    $("#cdietspan").typed({
      strings: [document.getElementById('dietin').value],
      typeSpeed: 4
    });
  });


};
  
function intake() {
  if($('#intakefromin')[0].value == 1){
    $("#intaketoin")[0].parentElement.className = 'cs-select cs-skin-border cs-skin-borderdisabled';
    $("#intakefromspan")[0].innerHTML = 'Refuse';
    $("#intaketospan")[0].innerHTML = '';
  }
  else {
    $("#intaketoin")[0].parentElement.className = 'cs-select cs-skin-border cs-active';
  $("#intakefromspan")[0].innerHTML = document.getElementById('intakefromin').value;
  $("#intaketospan")[0].innerHTML = '- ' + document.getElementById('intaketoin').value;
        }
};

var genderval = 'male'
var ibwval;

function gender() {

      if(document.getElementById('switch5').checked) {
          genderval = 'female';
          $('#gendermspan').fadeOut(20, function(){
            $('#genderfspan').fadeIn(50);
          })};
      if(document.getElementById('switch5').checked == false) {
        genderval = 'male';
        $('#genderfspan').fadeOut(20, function(){
            $('#gendermspan').fadeIn(50);
          });}
};
function ibw() { 

    document.getElementById("ibwmale").className = "blue"
    document.getElementById("ibwfemale").className = "red"
    var x = document.getElementById("ht").value;
    var y = x - 60 
    var z = y * 6 + 106
    document.getElementById("ibwmalespan").style.display = "none"
    document.getElementById("ibwfemalespan").style.display = "none"
    document.getElementById("loaderg").style.display = "block"
    document.getElementById("loaderg2").style.display = "block"

    var a = document.getElementById("ht").value;
    var b = x - 60
    var c = y * 5 + 105
   

    if(document.getElementById("ht").value.length == '') {
      widgetUsed("ibwmale", 0);
      widgetUsed("ibwfemale", 0);
      document.getElementById("ibwmalespan").style.display = "none"
      document.getElementById("ibwfemalespan").style.display = "none"
      document.getElementById("loaderg").style.display = "block"
      document.getElementById("loaderg2").style.display = "block"
      document.getElementById("ibwmale").className = "emptygray"
      document.getElementById("ibwfemale").className = "emptygray"
    }
    if(z > 0 && c > 0 ) {
      document.getElementById("ibwmalespan").style.display = "block"
      document.getElementById("ibwfemalespan").style.display = "inline"
      document.getElementById("loaderg").style.display = "none"
      document.getElementById("loaderg2").style.display = "none"
      document.getElementById("ibwmale").className = "blue"
      document.getElementById("ibwfemale").className = "red"
          }

      if(document.getElementById('switch4').checked) {
      widgetUsed(("ibwmale"), Math.floor(z /2.2));
      widgetUsed(("ibwfemale"), Math.round(c /2.2));
      document.getElementById("inkg").style.display = "block"
      document.getElementById("inlbs").style.display = "none"

}
      if(document.getElementById('switch4').checked == false) {
      widgetUsed(("ibwmale"), Math.floor(z));
      widgetUsed(("ibwfemale"), Math.round(c));
      document.getElementById("inkg").style.display = "none"
      document.getElementById("inlbs").style.display = "block"
}
    if(z < 0 && c < 0 ) {
      widgetUsed("ibwmale", 0);
      widgetUsed("ibwfemale", 0);
      document.getElementById("ibwmalespan").style.display = "none"
      document.getElementById("ibwfemalespan").style.display = "none"
      document.getElementById("loaderg").style.display = "block"
      document.getElementById("loaderg2").style.display = "block"
      document.getElementById("ibwmale").className = "emptygray"
      document.getElementById("ibwfemale").className = "emptygray"
    }
    if(document.getElementById('switch4').unchecked) {
      widgetUsed(("ibwmale"), Math.floor(z));
      widgetUsed(("ibwfemale"), Math.round(c /2.2));
}
    
    if(genderval == 'male'){
      ibwval = z;
    }
    if (genderval == 'female'){
      ibwval = c;
    }
    $("#percentibw")[0].innerHTML = Math.round(document.getElementById("wt").value/ibwval * 100);
  };

function cal() { 
    document.getElementById("calrequirement").className = "ultra-widget red"
    var x = document.getElementById("wt").value;
    var y = x/2.2
    var z = y * 30
    var goalselect = document.getElementById('goals');
    var goalselected = goalselect.options[goalselect.selectedIndex].innerHTML;
    $("#cbw")[0].innerHTML = document.getElementById("wt").value;
    

    if(goalselected == 'Gain Weight') {
     widgetUsed("calrequirement", parseInt(z - z + 1 * y * 35));
        }

    if(goalselected == 'Maintain Weight') {
     widgetUsed("calrequirement", parseInt(z));
        }

    if(goalselected == 'Lose Weight') {
     widgetUsed("calrequirement", parseInt(z - z + 1 * y * 25));
        }
    }

function dx() {
$("#dx")[0].innerHTML = document.getElementById("dxinput").value;
  $(function(){
    $("#dx").typed({
      strings: [document.getElementById('dxinput').value],
      typeSpeed: 4
    });
  });

}
function bmi() { 
    var x = document.getElementById("wt").value;
    var y = document.getElementById("ht").value;
    var z = x / y
    var a = z / y
    var b = a * 703


   if(document.getElementById("wt").value.length < 1 || b > 50 ) {
      bmiused("bmispan", 0);


    }

    if(b < 50 && b > 10) {
      $("#bmispan").innerHTML = b;
      $("#bmispanhead")[0].innerHTML = b.toFixed(1);
      bmiused("bmispanhead", b.toFixed(1));
    }

    $(function(){
    $("#bmispan").typed({
      strings: [b.toFixed(1).toString()],
      typeSpeed: 4
    });
  });
          }

function pro() { 
    document.getElementById("prorequirement").className = "green"
    var x = document.getElementById("wt").value;
    var y = x/2.2
    var z = y * 1
    widgetUsed("prorequirement", Math.round(z));
} 
function fl() { 
    document.getElementById("flrequirement").className = "ultra-widget yellow"
    var x = document.getElementById("wt").value;
    var y = x/2.2
    var z = y * 30
    widgetUsed("flrequirement", Math.round(z));
        }

function convert() {

  var a = document.getElementById("ibwmale").value / 2.2
  var b = document.getElementById("ibwfemale").value / 2.2
  widgetUsed(("ibwmale"), Math.floor(a));
  widgetUsed(("ibwfemale"), Math.round(b));

}



function rchart0 () {
 NProgress.start();
  //resets all parameters in assess

  var loss1;
  var loss2;
  var loss3;
  var gain1;
  var gain2;
  var gain3;

$("#loss1days")[0].innerHTML = ''
$("#loss2days")[0].innerHTML = ''
$("#loss3days")[0].innerHTML = ''
$("#gain1days")[0].innerHTML = ''
$("#gain2days")[0].innerHTML = ''
$("#gain3days")[0].innerHTML = ''

  myLine.datasets[1].points[3].value = document.getElementById("wt").value;
  myLine.scale.xLabels[3] = document.getElementById("date0").value;
  myLine.datasets[1].points[2].value = document.getElementById("30daysinput").value;
  myLine.scale.xLabels[2] = document.getElementById("date1").value;
  myLine.datasets[1].points[1].value = document.getElementById("90daysinput").value;
  myLine.scale.xLabels[1] = document.getElementById("date2").value;
  myLine.datasets[1].points[0].value = document.getElementById("180daysinput").value;
  myLine.scale.xLabels[0] = document.getElementById("date3").value;
  myLine.update();

  NProgress.inc();

  if(Math.floor(myLine.datasets[1].points[3].value / myLine.datasets[1].points[2].value * 100) <= 95) {
    loss1 = true

  }
  if(Math.ceil(myLine.datasets[1].points[3].value / myLine.datasets[1].points[2].value * 100) >= 105) {
    gain1 = true
  }
  
  if(Math.floor(myLine.datasets[1].points[3].value / myLine.datasets[1].points[1].value * 100) <= 92.5) {
    loss2 = true
  }
  if(Math.ceil(myLine.datasets[1].points[3].value / myLine.datasets[1].points[1].value * 1000) >= 1075) {
    gain2 = true

  }
  if(Math.floor(myLine.datasets[1].points[3].value / myLine.datasets[1].points[0].value * 100) <= 90) {
    loss3 = true

  }
  if(Math.ceil(myLine.datasets[1].points[3].value / myLine.datasets[1].points[0].value * 100) >= 110) {
    gain3 = true

  }

  NProgress.inc();

  if($('#wthistory').smkValidate({lang:'es'})){}

  if(loss1 == true || loss2 == true || loss3 == true){
    $("#losshist")[0].innerHTML = 'Significant Weight Loss for the past ';
    if(loss1 == true){
      $("#loss1days")[0].innerHTML = ' 30';
      $.smkAlert({ text: 'Significant Weight Loss for the past 30 days', type: 'danger', permanent: true });
      if(loss2 == true || loss3 == true){
        $("#loss1days")[0].innerHTML = ' 30/'
      }
    }
    if(loss2 == true){
      $("#loss2days")[0].innerHTML = '90';
      $.smkAlert({ text: 'Significant Weight Loss for the past 90 days', type: 'danger', permanent: true });
        if(loss3 == true){
        $("#loss2days")[0].innerHTML = '90/'
      }
    }
    if(loss3 == true){
      $("#loss3days")[0].innerHTML = '180';
      $.smkAlert({ text: 'Significant Weight Loss for the past 180 days', type: 'danger', permanent: true });
    }
  }
  NProgress.inc();
  if(loss1 == true || loss2 == true || loss3 == true){
    $("#lossdays")[0].innerHTML = ' days'
    }
 if(gain1 == true || gain2 == true || gain3 == true){
    $("#gainhist")[0].innerHTML = 'Significant Weight Gain for the past ';
    if(gain1 == true){
      $("#gain1days")[0].innerHTML = ' 30';
      $.smkAlert({ text: 'Significant Weight Gain for the past 30 days', type: 'danger', permanent: true });
      if(gain2 == true || gain3 == true){
        $("#gain1days")[0].innerHTML = ' 30/'
      }
    }
    if(gain2 == true){
      $("#gain2days")[0].innerHTML = '90';
      $.smkAlert({ text: 'Significant Weight Gain for the past 90 days', type: 'danger', permanent: true });
        if(gain3 == true){
        $("#gain2days")[0].innerHTML = '90/'
      }
    }
    if(gain3 == true){
      $("#gain3days")[0].innerHTML = '180';
      $.smkAlert({ text: 'Significant Weight Gain for the past 180 days', type: 'danger', permanent: true });
    }
  }
  if(gain1 == true || gain2 == true || gain3 == true){
    $("#gaindays")[0].innerHTML = ' days'
    }
  if((loss1 == true || loss2 == true || loss3 == true) && (gain1 == true || gain2 == true || gain3 == true)){
    $("#and")[0].innerHTML = ' and '
    }
NProgress.done();
//setTimeout(noti, 1000);
};

function noti() {
  swal("Assessment Completed", "Modify as necessary", "success");

}

function chart0 () {

  if(document.getElementById("date0").value.length == '') {
      return;

    }
    
  myLine.datasets[1].points[3].value = document.getElementById("wt").value;

  if (myLine.datasets[1].points[3].value > 0) {
      myLine.datasets[1].points[3].value = document.getElementById("wt").value;
      myLine.scale.xLabels[3] = document.getElementById("date0").value;


  }



  if(document.getElementById("date1").value.length == '') {
      return;

    }
    
  myLine.datasets[1].points[2].value = document.getElementById("30daysinput").value;

  if (myLine.datasets[1].points[2].value > 0) {
      myLine.datasets[1].points[2].value = document.getElementById("30daysinput").value;
      myLine.scale.xLabels[2] = document.getElementById("date1").value;


  }

      if(document.getElementById("date2").value.length == '') {
      return;

    }
  myLine.datasets[1].points[1].value = document.getElementById("90daysinput").value;

  if (myLine.datasets[1].points[1].value > 0) {
      myLine.datasets[1].points[1].value = document.getElementById("90daysinput").value;
      myLine.scale.xLabels[1] = document.getElementById("date2").value;


  }


     if(document.getElementById("date3").value.length == '') {
      return;

    }
  myLine.datasets[1].points[0].value = document.getElementById("180daysinput").value;

  if (myLine.datasets[1].points[0].value > 0) {
      myLine.datasets[1].points[0].value = document.getElementById("180daysinput").value;
      myLine.scale.xLabels[0] = document.getElementById("date3").value;


  }
  myLine.update();
};



      //UltraWidget
      function widgetUsed(id, number, string) {     
        $("#" + id).prop('Counter',0).animate({
              Counter: number
          }, {
              duration: 800,
              easing: 'swing',
              step: function (now) {
                  $("#" + id + " .w-amount").text(now.toFixed(0));
                  $("#" + id + " .w-used").css("width", +  Math.ceil(now));
              }
          });
      };
      
      $(".w-refresh").click(function(){
        var counter = $(this).closest(".ultra-widget").data("counter");
        var counter_id = $(this).closest(".ultra-widget").attr("id");
        widgetUsed(counter_id, counter);    
      });
            function bmiused(id, number, string) {     
        $($("#" + 'bmispanhead')[0].innerHTML).prop('Counter',0).animate({
              Counter: number
          }, {
              duration: 800,
              easing: 'swing',
              step: function (now) {
                  $("#" + id + " .w-amount").text(now.toFixed(1));
                  $("#" + id + " .w-used").css("width", +  Math.ceil(now));
              }
          });
      };
      
      $(".w-refresh").click(function(){
        var counter = $(this).closest(".ultra-widget").data("counter");
        var counter_id = $(this).closest(".ultra-widget").attr("id");
        widgetUsed(counter_id, counter);    
      });


</script>

</body>

</html>
