!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,n=Object(this),i=n.length>>>0,r=0;if(2===arguments.length)e=arguments[1];else{for(;i>r&&!(r in n);)r++;if(r>=i)throw new TypeError("Reduce of empty array with no initial value");e=n[r++]}for(;i>r;r++)r in n&&(e=t(e,n[r],r,n));return e}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(t){for(var e=Object(this),n=e.length>>>0,i=[],r=arguments.length>=2?arguments[1]:void 0,o=0;n>o;o++)if(o in e){var s=e[o];t.call(r,s,o,e)&&i.push(s)}return i}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,i,r;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),s=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(n=e),i=new Array(s),r=0;s>r;){var a,l;r in o&&(a=o[r],l=t.call(n,a,r,o),i[r]=l),r++}return i});var e,n="function"==typeof define&&define.amd,i=function(e){var n="Comic Sans MS"===e?"Courier New":"Comic Sans MS",i=t("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),r=i.css("fontFamily",n).width(),o=i.css("fontFamily",e+","+n).width();return i.remove(),r!==o},r=navigator.userAgent,o=/MSIE|Trident/i.test(r);if(o){var s=/MSIE (\d+[.]\d+)/.exec(r);s&&(e=parseFloat(s[1])),s=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(r),s&&(e=parseFloat(s[1]))}var a,l={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:o,isFF:/firefox/i.test(r),isWebkit:/webkit/i.test(r),isSafari:/safari/i.test(r),browserVersion:e,jqueryVersion:parseFloat(t.fn.jquery),isSupportAmd:n,hasCodeMirror:n?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:i,isW3CRangeSupport:!!document.createRange},c=function(){var e=function(t){return function(e){return t===e}},n=function(t,e){return t===e},i=function(t){return function(e,n){return e[t]===n[t]}},r=function(){return!0},o=function(){return!1},s=function(t){return function(){return!t.apply(t,arguments)}},a=function(t,e){return function(n){return t(n)&&e(n)}},l=function(t){return t},c=0,u=function(t){var e=++c+"";return t?t+e:e},h=function(e){var n=t(document);return{top:e.top+n.scrollTop(),left:e.left+n.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}},d=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e},f=function(t,e){return e=e||"",e+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")};return{eq:e,eq2:n,peq2:i,ok:r,fail:o,self:l,not:s,and:a,uniqueId:u,rect2bnd:h,invertObject:d,namespaceToCamel:f}}(),u=function(){var e=function(t){return t[0]},n=function(t){return t[t.length-1]},i=function(t){return t.slice(0,t.length-1)},r=function(t){return t.slice(1)},o=function(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];if(e(r))return r}},s=function(t,e){for(var n=0,i=t.length;i>n;n++)if(!e(t[n]))return!1;return!0},a=function(e,n){return t.inArray(n,e)},l=function(t,e){return-1!==a(t,e)},u=function(t,e){return e=e||c.self,t.reduce(function(t,n){return t+e(n)},0)},h=function(t){for(var e=[],n=-1,i=t.length;++n<i;)e[n]=t[n];return e},d=function(t,i){if(!t.length)return[];var o=r(t);return o.reduce(function(t,e){var r=n(t);return i(n(r),e)?r[r.length]=e:t[t.length]=[e],t},[[e(t)]])},f=function(t){for(var e=[],n=0,i=t.length;i>n;n++)t[n]&&e.push(t[n]);return e},p=function(t){for(var e=[],n=0,i=t.length;i>n;n++)l(e,t[n])||e.push(t[n]);return e},g=function(t,e){var n=a(t,e);return-1===n?null:t[n+1]},m=function(t,e){var n=a(t,e);return-1===n?null:t[n-1]};return{head:e,last:n,initial:i,tail:r,prev:m,next:g,find:o,contains:l,all:s,sum:u,from:h,clusterBy:d,compact:f,unique:p}}(),h=String.fromCharCode(160),d="\ufeff",f=function(){var e=function(e){return e&&t(e).hasClass("note-editable")},n=function(e){return e&&t(e).hasClass("note-control-sizing")},i=function(e){var n;if(e.hasClass("note-air-editor")){var i=u.last(e.attr("id").split("-"));return n=function(e){return function(){return t(e+i)}},{editor:function(){return e},holder:function(){return e.data("holder")},editable:function(){return e},popover:n("#note-popover-"),handle:n("#note-handle-"),dialog:n("#note-dialog-")}}n=function(t,n){return n=n||e,function(){return n.find(t)}};var r=e.data("options"),o=r&&r.dialogsInBody?t(document.body):null;return{editor:function(){return e},holder:function(){return e.data("holder")},dropzone:n(".note-dropzone"),toolbar:n(".note-toolbar"),editable:n(".note-editable"),codable:n(".note-codable"),statusbar:n(".note-statusbar"),popover:n(".note-popover"),handle:n(".note-handle"),dialog:n(".note-dialog",o)}},r=function(e){var n=t(e).closest(".note-editor, .note-air-editor, .note-air-layout");if(!n.length)return null;var r;return r=n.is(".note-editor, .note-air-editor")?n:t("#note-editor-"+u.last(n.attr("id").split("-"))),i(r)},o=function(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}},s=function(t){return t&&3===t.nodeType},a=function(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(t.nodeName.toUpperCase())},p=function(t){return!e(t)&&(t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase()))},g=o("LI"),m=function(t){return p(t)&&!g(t)},v=o("TABLE"),y=function(t){return!(k(t)||x(t)||b(t)||p(t)||v(t)||_(t))},x=function(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())},b=o("HR"),w=function(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())},_=o("BLOCKQUOTE"),k=function(t){return w(t)||_(t)||e(t)},C=o("A"),T=function(t){return y(t)&&!!I(t,p)},S=function(t){return y(t)&&!I(t,p)},A=o("BODY"),M=function(t,e){return t.nextSibling===e||t.previousSibling===e},E=function(t,e){e=e||c.ok;var n=[];return t.previousSibling&&e(t.previousSibling)&&n.push(t.previousSibling),n.push(t),t.nextSibling&&e(t.nextSibling)&&n.push(t.nextSibling),n},P=l.isMSIE&&l.browserVersion<11?"&nbsp;":"<br>",D=function(t){return s(t)?t.nodeValue.length:t.childNodes.length},L=function(t){var e=D(t);return 0===e||(!s(t)&&1===e&&t.innerHTML===P||!(!u.all(t.childNodes,s)||""!==t.innerHTML))},N=function(t){a(t)||D(t)||(t.innerHTML=P)},I=function(t,n){for(;t;){if(n(t))return t;if(e(t))break;t=t.parentNode}return null},R=function(t,n){for(t=t.parentNode;t&&1===D(t);){if(n(t))return t;if(e(t))break;t=t.parentNode}return null},F=function(t,n){n=n||c.fail;var i=[];return I(t,function(t){return e(t)||i.push(t),n(t)}),i},z=function(t,e){var n=F(t);return u.last(n.filter(e))},O=function(e,n){for(var i=F(e),r=n;r;r=r.parentNode)if(t.inArray(r,i)>-1)return r;return null},B=function(t,e){e=e||c.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.previousSibling;return n},H=function(t,e){e=e||c.fail;for(var n=[];t&&!e(t);)n.push(t),t=t.nextSibling;return n},W=function(t,e){var n=[];return e=e||c.ok,function i(r){t!==r&&e(r)&&n.push(r);for(var o=0,s=r.childNodes.length;s>o;o++)i(r.childNodes[o])}(t),n},j=function(e,n){var i=e.parentNode,r=t("<"+n+">")[0];return i.insertBefore(r,e),r.appendChild(e),r},q=function(t,e){var n=e.nextSibling,i=e.parentNode;return n?i.insertBefore(t,n):i.appendChild(t),t},U=function(e,n){return t.each(n,function(t,n){e.appendChild(n)}),e},Y=function(t){return 0===t.offset},G=function(t){return t.offset===D(t.node)},X=function(t){return Y(t)||G(t)},V=function(t,e){for(;t&&t!==e;){if(0!==Z(t))return!1;t=t.parentNode}return!0},$=function(t,e){for(;t&&t!==e;){if(Z(t)!==D(t.parentNode)-1)return!1;t=t.parentNode}return!0},K=function(t,e){return Y(t)&&V(t.node,e)},J=function(t,e){return G(t)&&$(t.node,e)},Z=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},Q=function(t){return!!(t&&t.childNodes&&t.childNodes.length)},tt=function(t,n){var i,r;if(0===t.offset){if(e(t.node))return null;i=t.node.parentNode,r=Z(t.node)}else Q(t.node)?(i=t.node.childNodes[t.offset-1],r=D(i)):(i=t.node,r=n?0:t.offset-1);return{node:i,offset:r}},et=function(t,n){var i,r;if(D(t.node)===t.offset){if(e(t.node))return null;i=t.node.parentNode,r=Z(t.node)+1}else Q(t.node)?(i=t.node.childNodes[t.offset],r=0):(i=t.node,r=n?D(t.node):t.offset+1);return{node:i,offset:r}},nt=function(t,e){return t.node===e.node&&t.offset===e.offset},it=function(t){if(s(t.node)||!Q(t.node)||L(t.node))return!0;var e=t.node.childNodes[t.offset-1],n=t.node.childNodes[t.offset];return!(e&&!a(e)||n&&!a(n))},rt=function(t,e){for(;t;){if(e(t))return t;t=tt(t)}return null},ot=function(t,e){for(;t;){if(e(t))return t;t=et(t)}return null},st=function(t){if(!s(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==h},at=function(t,e,n,i){for(var r=t;r&&(n(r),!nt(r,e));){var o=i&&t.node!==r.node&&e.node!==r.node;r=et(r,o)}},lt=function(t,e){var n=F(e,c.eq(t));return n.map(Z).reverse()},ct=function(t,e){for(var n=t,i=0,r=e.length;r>i;i++)n=n.childNodes.length<=e[i]?n.childNodes[n.childNodes.length-1]:n.childNodes[e[i]];return n},ut=function(t,e){var n=e&&e.isSkipPaddingBlankHTML,i=e&&e.isNotSplitEdgePoint;if(X(t)&&(s(t.node)||i)){if(Y(t))return t.node;if(G(t))return t.node.nextSibling}if(s(t.node))return t.node.splitText(t.offset);var r=t.node.childNodes[t.offset],o=q(t.node.cloneNode(!1),t.node);return U(o,H(r)),n||(N(t.node),N(o)),o},ht=function(t,e,n){var i=F(e.node,c.eq(t));return i.length?1===i.length?ut(e,n):i.reduce(function(t,i){return t===e.node&&(t=ut(e,n)),ut({node:i,offset:t?f.position(t):D(i)},n)}):null},dt=function(t,e){var n,i,r=e?p:k,o=F(t.node,r),s=u.last(o)||t.node;r(s)?(n=o[o.length-2],i=s):(n=s,i=n.parentNode);var a=n&&ht(n,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return a||i!==t.node||(a=t.node.childNodes[t.offset]),{rightNode:a,container:i}},ft=function(t){return document.createElement(t)},pt=function(t){return document.createTextNode(t)},gt=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var n=t.parentNode;if(!e){var i,r,o=[];for(i=0,r=t.childNodes.length;r>i;i++)o.push(t.childNodes[i]);for(i=0,r=o.length;r>i;i++)n.insertBefore(o[i],t)}n.removeChild(t)}},mt=function(t,n){for(;t&&!e(t)&&n(t);){var i=t.parentNode;gt(t),t=i}},vt=function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var n=ft(e);return t.style.cssText&&(n.style.cssText=t.style.cssText),U(n,u.from(t.childNodes)),q(n,t),gt(t),n},yt=o("TEXTAREA"),xt=function(t,e){var n=yt(t[0])?t.val():t.html();return e?n.replace(/[\n\r]/g,""):n},bt=function(e,n){var i=xt(e);if(n){var r=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;i=i.replace(r,function(t,e,n){n=n.toUpperCase();var i=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!e,r=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return t+(i||r?"\n":"")}),i=t.trim(i)}return i};return{NBSP_CHAR:h,ZERO_WIDTH_NBSP_CHAR:d,blank:P,emptyPara:"<p>"+P+"</p>",makePredByNodeName:o,isEditable:e,isControlSizing:n,buildLayoutInfo:i,makeLayoutInfo:r,isText:s,isVoid:a,isPara:p,isPurePara:m,isInline:y,isBlock:c.not(y),isBodyInline:S,isBody:A,isParaInline:T,isList:x,isTable:v,isCell:w,isBlockquote:_,isBodyContainer:k,isAnchor:C,isDiv:o("DIV"),isLi:g,isBR:o("BR"),isSpan:o("SPAN"),isB:o("B"),isU:o("U"),isS:o("S"),isI:o("I"),isImg:o("IMG"),isTextarea:yt,isEmpty:L,isEmptyAnchor:c.and(C,L),isClosestSibling:M,withClosestSiblings:E,nodeLength:D,isLeftEdgePoint:Y,isRightEdgePoint:G,isEdgePoint:X,isLeftEdgeOf:V,isRightEdgeOf:$,isLeftEdgePointOf:K,isRightEdgePointOf:J,prevPoint:tt,nextPoint:et,isSamePoint:nt,isVisiblePoint:it,prevPointUntil:rt,nextPointUntil:ot,isCharPoint:st,walkPoint:at,ancestor:I,singleChildAncestor:R,listAncestor:F,lastAncestor:z,listNext:H,listPrev:B,listDescendant:W,commonAncestor:O,wrap:j,insertAfter:q,appendChildNodes:U,position:Z,hasChildren:Q,makeOffsetPath:lt,fromOffsetPath:ct,splitTree:ht,splitPoint:dt,create:ft,createText:pt,remove:gt,removeWhile:mt,replace:vt,html:bt,value:xt}}(),p=function(){var e=function(t,e){var n,i,r=t.parentElement(),o=document.body.createTextRange(),s=u.from(r.childNodes);for(n=0;n<s.length;n++)if(!f.isText(s[n])){if(o.moveToElementText(s[n]),o.compareEndPoints("StartToStart",t)>=0)break;i=s[n]}if(0!==n&&f.isText(s[n-1])){var a=document.body.createTextRange(),l=null;a.moveToElementText(i||r),a.collapse(!i),l=i?i.nextSibling:r.firstChild;var c=t.duplicate();c.setEndPoint("StartToStart",a);for(var h=c.text.replace(/[\r\n]/g,"").length;h>l.nodeValue.length&&l.nextSibling;)h-=l.nodeValue.length,l=l.nextSibling;l.nodeValue,e&&l.nextSibling&&f.isText(l.nextSibling)&&h===l.nodeValue.length&&(h-=l.nodeValue.length,l=l.nextSibling),r=l,n=h}return{cont:r,offset:n}},n=function(t){var e=function(t,n){var i,r;if(f.isText(t)){var o=f.listPrev(t,c.not(f.isText)),s=u.last(o).previousSibling;i=s||t.parentNode,n+=u.sum(u.tail(o),f.nodeLength),r=!s}else{if(i=t.childNodes[n]||t,f.isText(i))return e(i,0);n=0,r=!1}return{node:i,collapseToStart:r,offset:n}},n=document.body.createTextRange(),i=e(t.node,t.offset);return n.moveToElementText(i.node),n.collapse(i.collapseToStart),n.moveStart("character",i.offset),n},i=function(e,r,o,s){this.sc=e,this.so=r,this.ec=o,this.eo=s;var a=function(){if(l.isW3CRangeSupport){var t=document.createRange();return t.setStart(e,r),t.setEnd(o,s),t}var i=n({node:e,offset:r});return i.setEndPoint("EndToEnd",n({node:o,offset:s})),i};this.getPoints=function(){return{sc:e,so:r,ec:o,eo:s}},this.getStartPoint=function(){return{node:e,offset:r}},this.getEndPoint=function(){return{node:o,offset:s}},this.select=function(){var t=a();if(l.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},this.normalize=function(){var t=function(t,e){if(f.isVisiblePoint(t)&&!f.isEdgePoint(t)||f.isVisiblePoint(t)&&f.isRightEdgePoint(t)&&!e||f.isVisiblePoint(t)&&f.isLeftEdgePoint(t)&&e||f.isVisiblePoint(t)&&f.isBlock(t.node)&&f.isEmpty(t.node))return t;var n=f.ancestor(t.node,f.isBlock);if((f.isLeftEdgePointOf(t,n)||f.isVoid(f.prevPoint(t).node))&&!e||(f.isRightEdgePointOf(t,n)||f.isVoid(f.nextPoint(t).node))&&e){if(f.isVisiblePoint(t))return t;e=!e}var i=e?f.nextPointUntil(f.nextPoint(t),f.isVisiblePoint):f.prevPointUntil(f.prevPoint(t),f.isVisiblePoint);return i||t},e=t(this.getEndPoint(),!1),n=this.isCollapsed()?e:t(this.getStartPoint(),!0);return new i(n.node,n.offset,e.node,e.offset)},this.nodes=function(t,e){t=t||c.ok;var n=e&&e.includeAncestor,i=e&&e.fullyContains,r=this.getStartPoint(),o=this.getEndPoint(),s=[],a=[];return f.walkPoint(r,o,function(e){if(!f.isEditable(e.node)){var r;i?(f.isLeftEdgePoint(e)&&a.push(e.node),f.isRightEdgePoint(e)&&u.contains(a,e.node)&&(r=e.node)):r=n?f.ancestor(e.node,t):e.node,r&&t(r)&&s.push(r)}},!0),u.unique(s)},this.commonAncestor=function(){return f.commonAncestor(e,o)},this.expand=function(t){var n=f.ancestor(e,t),a=f.ancestor(o,t);if(!n&&!a)return new i(e,r,o,s);var l=this.getPoints();return n&&(l.sc=n,l.so=0),a&&(l.ec=a,l.eo=f.nodeLength(a)),new i(l.sc,l.so,l.ec,l.eo)},this.collapse=function(t){return t?new i(e,r,e,r):new i(o,s,o,s)},this.splitText=function(){var t=e===o,n=this.getPoints();return f.isText(o)&&!f.isEdgePoint(this.getEndPoint())&&o.splitText(s),f.isText(e)&&!f.isEdgePoint(this.getStartPoint())&&(n.sc=e.splitText(r),n.so=0,t&&(n.ec=n.sc,n.eo=s-r)),new i(n.sc,n.so,n.ec,n.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var e=this.splitText(),n=e.nodes(null,{fullyContains:!0}),r=f.prevPointUntil(e.getStartPoint(),function(t){return!u.contains(n,t.node)}),o=[];return t.each(n,function(t,e){var n=e.parentNode;r.node!==n&&1===f.nodeLength(n)&&o.push(n),f.remove(e,!1)}),t.each(o,function(t,e){f.remove(e,!1)}),new i(r.node,r.offset,r.node,r.offset).normalize()};var h=function(t){return function(){var n=f.ancestor(e,t);return!!n&&n===f.ancestor(o,t)}};this.isOnEditable=h(f.isEditable),this.isOnList=h(f.isList),this.isOnAnchor=h(f.isAnchor),this.isOnCell=h(f.isCell),this.isLeftEdgeOf=function(t){if(!f.isLeftEdgePoint(this.getStartPoint()))return!1;var e=f.ancestor(this.sc,t);return e&&f.isLeftEdgeOf(this.sc,e)},this.isCollapsed=function(){return e===o&&r===s},this.wrapBodyInlineWithPara=function(){if(f.isBodyContainer(e)&&f.isEmpty(e))return e.innerHTML=f.emptyPara,new i(e.firstChild,0,e.firstChild,0);var t=this.normalize();if(f.isParaInline(e)||f.isPara(e))return t;var n;if(f.isInline(t.sc)){var r=f.listAncestor(t.sc,c.not(f.isInline));n=u.last(r),f.isInline(n)||(n=r[r.length-2]||t.sc.childNodes[t.so])}else n=t.sc.childNodes[t.so>0?t.so-1:0];var o=f.listPrev(n,f.isParaInline).reverse();if(o=o.concat(f.listNext(n.nextSibling,f.isParaInline)),o.length){var s=f.wrap(u.head(o),"p");f.appendChildNodes(s,u.tail(o))}return this.normalize()},this.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),n=f.splitPoint(e.getStartPoint(),f.isInline(t));return n.rightNode?n.rightNode.parentNode.insertBefore(t,n.rightNode):n.container.appendChild(t),t},this.pasteHTML=function(e){var n=t("<div></div>").html(e)[0],i=u.from(n.childNodes),r=this.wrapBodyInlineWithPara().deleteContents();return i.reverse().map(function(t){return r.insertNode(t)}).reverse()},this.toString=function(){var t=a();return l.isW3CRangeSupport?t.toString():t.text},this.getWordRange=function(t){var e=this.getEndPoint();if(!f.isCharPoint(e))return this;var n=f.prevPointUntil(e,function(t){return!f.isCharPoint(t)});return t&&(e=f.nextPointUntil(e,function(t){return!f.isCharPoint(t)})),new i(n.node,n.offset,e.node,e.offset)},this.bookmark=function(t){return{s:{path:f.makeOffsetPath(t,e),offset:r},e:{path:f.makeOffsetPath(t,o),offset:s}}},this.paraBookmark=function(t){return{s:{path:u.tail(f.makeOffsetPath(u.head(t),e)),offset:r},e:{path:u.tail(f.makeOffsetPath(u.last(t),o)),offset:s}}},this.getClientRects=function(){var t=a();return t.getClientRects()}};return{create:function(t,n,r,o){if(arguments.length)2===arguments.length&&(r=t,o=n);else if(l.isW3CRangeSupport){var s=document.getSelection();if(!s||0===s.rangeCount)return null;if(f.isBody(s.anchorNode))return null;var a=s.getRangeAt(0);t=a.startContainer,n=a.startOffset,r=a.endContainer,o=a.endOffset}else{var c=document.selection.createRange(),u=c.duplicate();u.collapse(!1);var h=c;h.collapse(!0);var d=e(h,!0),p=e(u,!1);f.isText(d.node)&&f.isLeftEdgePoint(d)&&f.isTextNode(p.node)&&f.isRightEdgePoint(p)&&p.node.nextSibling===d.node&&(d=p),t=d.cont,n=d.offset,r=p.cont,o=p.offset}return new i(t,n,r,o)},createFromNode:function(t){var e=t,n=0,i=t,r=f.nodeLength(i);return f.isVoid(e)&&(n=f.listPrev(e).length-1,e=e.parentNode),f.isBR(i)?(r=f.listPrev(i).length-1,i=i.parentNode):f.isVoid(i)&&(r=f.listPrev(i).length,i=i.parentNode),this.create(e,n,i,r)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var n=f.fromOffsetPath(t,e.s.path),r=e.s.offset,o=f.fromOffsetPath(t,e.e.path),s=e.e.offset;return new i(n,r,o,s)},createFromParaBookmark:function(t,e){var n=t.s.offset,r=t.e.offset,o=f.fromOffsetPath(u.head(e),t.s.path),s=f.fromOffsetPath(u.last(e),t.e.path);return new i(o,n,s,r)}}}(),g={version:"0.6.16",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,disableResizeImage:!1,shortcuts:!0,textareaAutoSync:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"fa fa-",icons:{font:{bold:"bold",italic:"italic",underline:"underline",clear:"eraser",height:"text-height",strikethrough:"strikethrough",superscript:"superscript",subscript:"subscript"},image:{image:"picture-o",floatLeft:"align-left",floatRight:"align-right",floatNone:"align-justify",shapeRounded:"square",shapeCircle:"circle-o",shapeThumbnail:"picture-o",shapeNone:"times",remove:"trash-o"},link:{link:"link",unlink:"unlink",edit:"edit"},table:{table:"table"},hr:{insert:"minus"},style:{style:"magic"},lists:{unordered:"list-ul",ordered:"list-ol"},options:{help:"question",fullscreen:"arrows-alt",codeview:"code"},paragraph:{paragraph:"align-left",outdent:"outdent",indent:"indent",left:"align-left",center:"align-center",right:"align-right",justify:"align-justify"},color:{recent:"font"},history:{undo:"undo",redo:"repeat"},misc:{check:"check"}},dialogsInBody:!1,codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],plugin:{},airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(t){return-1!==t.indexOf("@")&&-1===t.indexOf(":")&&(t="mailto:"+t),t},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}},m=function(){var e=function(e){return t.Deferred(function(n){t.extend(new FileReader,{onload:function(t){var e=t.target.result;n.resolve(e)},onerror:function(){n.reject(this)}}).readAsDataURL(e)}).promise()},n=function(e,n){return t.Deferred(function(i){var r=t("<img>");r.one("load",function(){r.off("error abort"),i.resolve(r)}).one("error abort",function(){r.off("load").detach(),i.reject(r)}).css({display:"none"}).appendTo(document.body).attr({src:e,"data-filename":n})}).promise()};return{readFileAsDataURL:e,createImage:n}}(),v=function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(t){return u.contains([8,9,13,32],t)},isMove:function(t){return u.contains([37,38,39,40],t)},nameFromCode:c.invertObject(t),code:t}}(),y=function(t){var e=[],n=-1,i=t[0],r=function(){var e=p.create(),n={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:t.html(),bookmark:e?e.bookmark(i):n}},o=function(e){null!==e.contents&&t.html(e.contents),null!==e.bookmark&&p.createFromBookmark(i,e.bookmark).select()};this.undo=function(){t.html()!==e[n].contents&&this.recordUndo(),n>0&&(n--,o(e[n]))},this.redo=function(){e.length-1>n&&(n++,o(e[n]))},this.recordUndo=function(){n++,e.length>n&&(e=e.slice(0,n)),e.push(r())},this.recordUndo()},x=function(){var e=function(e,n){if(l.jqueryVersion<1.9){var i={};return t.each(n,function(t,n){i[n]=e.css(n)}),i}return e.css.call(e,n)};this.fromNode=function(t){var n=["font-family","font-size","text-align","list-style-type","line-height"],i=e(t,n)||{};return i["font-size"]=parseInt(i["font-size"],10),i},this.stylePara=function(e,n){t.each(e.nodes(f.isPara,{includeAncestor:!0}),function(e,i){t(i).css(n)})},this.styleNodes=function(e,n){e=e.splitText();var i=n&&n.nodeName||"SPAN",r=!(!n||!n.expandClosestSibling),o=!(!n||!n.onlyPartialContains);if(e.isCollapsed())return[e.insertNode(f.create(i))];var s=f.makePredByNodeName(i),a=e.nodes(f.isText,{fullyContains:!0}).map(function(t){return f.singleChildAncestor(t,s)||f.wrap(t,i)});if(r){if(o){var l=e.nodes();s=c.and(s,function(t){return u.contains(l,t)})}return a.map(function(e){var n=f.withClosestSiblings(e,s),i=u.head(n),r=u.tail(n);return t.each(r,function(t,e){f.appendChildNodes(i,e.childNodes),f.remove(e)}),u.head(n)})}return a},this.current=function(e){var n=t(f.isText(e.sc)?e.sc.parentNode:e.sc),i=this.fromNode(n);if(i["font-bold"]=document.queryCommandState("bold")?"bold":"normal",i["font-italic"]=document.queryCommandState("italic")?"italic":"normal",i["font-underline"]=document.queryCommandState("underline")?"underline":"normal",i["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",i["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",i["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",e.isOnList()){var r=["circle","disc","disc-leading-zero","square"],o=t.inArray(i["list-style-type"],r)>-1;i["list-style"]=o?"unordered":"ordered"}else i["list-style"]="none";var s=f.ancestor(e.sc,f.isPara);if(s&&s.style["line-height"])i["line-height"]=s.style.lineHeight;else{var a=parseInt(i["line-height"],10)/parseInt(i["font-size"],10);i["line-height"]=a.toFixed(1)}return i.anchor=e.isOnAnchor()&&f.ancestor(e.sc,f.isAnchor),i.ancestors=f.listAncestor(e.sc,f.isEditable),i.range=e,i}},b=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var e=this,n=p.create().wrapBodyInlineWithPara(),i=n.nodes(f.isPara,{includeAncestor:!0}),r=u.clusterBy(i,c.peq2("parentNode"));t.each(r,function(n,i){var r=u.head(i);f.isLi(r)?e.wrapList(i,r.parentNode.nodeName):t.each(i,function(e,n){t(n).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),n.select()},this.outdent=function(){var e=this,n=p.create().wrapBodyInlineWithPara(),i=n.nodes(f.isPara,{includeAncestor:!0}),r=u.clusterBy(i,c.peq2("parentNode"));t.each(r,function(n,i){var r=u.head(i);f.isLi(r)?e.releaseList([i]):t.each(i,function(e,n){t(n).css("marginLeft",function(t,e){return e=parseInt(e,10)||0,e>25?e-25:""})})}),n.select()},this.toggleList=function(e){var n=this,i=p.create().wrapBodyInlineWithPara(),r=i.nodes(f.isPara,{includeAncestor:!0}),o=i.paraBookmark(r),s=u.clusterBy(r,c.peq2("parentNode"));if(u.find(r,f.isPurePara)){var a=[];t.each(s,function(t,i){a=a.concat(n.wrapList(i,e))}),r=a}else{var l=i.nodes(f.isList,{includeAncestor:!0}).filter(function(n){return!t.nodeName(n,e)});l.length?t.each(l,function(t,n){f.replace(n,e)}):r=this.releaseList(s,!0)}p.createFromParaBookmark(o,r).select()},this.wrapList=function(t,e){var n=u.head(t),i=u.last(t),r=f.isList(n.previousSibling)&&n.previousSibling,o=f.isList(i.nextSibling)&&i.nextSibling,s=r||f.insertAfter(f.create(e||"UL"),i);return t=t.map(function(t){return f.isPurePara(t)?f.replace(t,"LI"):t}),f.appendChildNodes(s,t),o&&(f.appendChildNodes(s,u.from(o.childNodes)),f.remove(o)),t},this.releaseList=function(e,n){var i=[];return t.each(e,function(e,r){var o=u.head(r),s=u.last(r),a=n?f.lastAncestor(o,f.isList):o.parentNode,l=a.childNodes.length>1?f.splitTree(a,{node:s.parentNode,offset:f.position(s)+1},{isSkipPaddingBlankHTML:!0}):null,c=f.splitTree(a,{node:o.parentNode,offset:f.position(o)},{isSkipPaddingBlankHTML:!0});r=n?f.listDescendant(c,f.isLi):u.from(c.childNodes).filter(f.isLi),(n||!f.isList(a.parentNode))&&(r=r.map(function(t){return f.replace(t,"P")})),t.each(u.from(r).reverse(),function(t,e){f.insertAfter(e,a)});var h=u.compact([a,c,l]);t.each(h,function(e,n){var i=[n].concat(f.listDescendant(n,f.isList));t.each(i.reverse(),function(t,e){f.nodeLength(e)||f.remove(e,!0)})}),i=i.concat(r)}),i}},w=function(){var e=new b;this.insertTab=function(t,e,n){var i=f.createText(new Array(n+1).join(f.NBSP_CHAR));e=e.deleteContents(),e.insertNode(i,!0),e=p.create(i,n),e.select()},this.insertParagraph=function(){var n=p.create();n=n.deleteContents(),n=n.wrapBodyInlineWithPara();var i,r=f.ancestor(n.sc,f.isPara);if(r){if(f.isEmpty(r)&&f.isLi(r))return void e.toggleList(r.parentNode.nodeName);i=f.splitTree(r,n.getStartPoint());var o=f.listDescendant(r,f.isEmptyAnchor);o=o.concat(f.listDescendant(i,f.isEmptyAnchor)),t.each(o,function(t,e){f.remove(e)})}else{var s=n.sc.childNodes[n.so];i=t(f.emptyPara)[0],s?n.sc.insertBefore(i,s):n.sc.appendChild(i)}p.create(i,0).normalize().select()}},_=function(){this.tab=function(t,e){var n=f.ancestor(t.commonAncestor(),f.isCell),i=f.ancestor(n,f.isTable),r=f.listDescendant(i,f.isCell),o=u[e?"prev":"next"](r,n);o&&p.create(o,0).select()},this.createTable=function(e,n){for(var i,r=[],o=0;e>o;o++)r.push("<td>"+f.blank+"</td>");i=r.join("");for(var s,a=[],l=0;n>l;l++)a.push("<tr>"+i+"</tr>");return s=a.join(""),t('<table class="table table-bordered">'+s+"</table>")[0]}},k="bogus",C=function(e){var n=this,i=new x,r=new _,o=new w,s=new b;this.createRange=function(t){return this.focus(t),p.create()},this.saveRange=function(t,e){this.focus(t),t.data("range",p.create()),e&&p.create().collapse().select()},this.saveNode=function(t){for(var e=[],n=0,i=t[0].childNodes.length;i>n;n++)e.push(t[0].childNodes[n]);t.data("childNodes",e)},this.restoreRange=function(t){var e=t.data("range");e&&(e.select(),
this.focus(t))},this.restoreNode=function(t){t.html("");for(var e=t.data("childNodes"),n=0,i=e.length;i>n;n++)t[0].appendChild(e[n])},this.currentStyle=function(t){var e=p.create(),n=e&&e.isOnEditable()?i.current(e.normalize()):{};return f.isImg(t)&&(n.image=t),n},this.styleFromNode=function(t){return i.fromNode(t)};var a=function(t){var n=f.makeLayoutInfo(t).holder();e.bindCustomEvent(n,t.data("callbacks"),"before.command")(t.html(),t)},c=function(t){var n=f.makeLayoutInfo(t).holder();e.bindCustomEvent(n,t.data("callbacks"),"change")(t.html(),t)};this.undo=function(t){a(t),t.data("NoteHistory").undo(),c(t)},this.redo=function(t){a(t),t.data("NoteHistory").redo(),c(t)};for(var h=this.beforeCommand=function(t){a(t),n.focus(t)},d=this.afterCommand=function(t,e){t.data("NoteHistory").recordUndo(),e||c(t)},g=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],v=0,y=g.length;y>v;v++)this[g[v]]=function(t){return function(e,n){h(e),document.execCommand(t,!1,n),d(e,!0)}}(g[v]);this.tab=function(t,e){var n=this.createRange(t);n.isCollapsed()&&n.isOnCell()?r.tab(n):(h(t),o.insertTab(t,n,e.tabsize),d(t))},this.untab=function(t){var e=this.createRange(t);e.isCollapsed()&&e.isOnCell()&&r.tab(e,!0)},this.insertParagraph=function(t){h(t),o.insertParagraph(t),d(t)},this.insertOrderedList=function(t){h(t),s.insertOrderedList(t),d(t)},this.insertUnorderedList=function(t){h(t),s.insertUnorderedList(t),d(t)},this.indent=function(t){h(t),s.indent(t),d(t)},this.outdent=function(t){h(t),s.outdent(t),d(t)},this.insertImage=function(t,n,i){m.createImage(n,i).then(function(e){h(t),e.css({display:"",width:Math.min(t.width(),e.width())}),p.create().insertNode(e[0]),p.createFromNodeAfter(e[0]).select(),d(t)}).fail(function(){var n=f.makeLayoutInfo(t).holder();e.bindCustomEvent(n,t.data("callbacks"),"image.upload.error")()})},this.insertNode=function(t,e){h(t),p.create().insertNode(e),p.createFromNodeAfter(e).select(),d(t)},this.insertText=function(t,e){h(t);var n=p.create().insertNode(f.createText(e));p.create(n,f.nodeLength(n)).select(),d(t)},this.pasteHTML=function(t,e){h(t);var n=p.create().pasteHTML(e);p.createFromNodeAfter(u.last(n)).select(),d(t)},this.formatBlock=function(t,e){h(t),e=l.isMSIE?"<"+e+">":e,document.execCommand("FormatBlock",!1,e),d(t)},this.formatPara=function(t){h(t),this.formatBlock(t,"P"),d(t)};for(var v=1;6>=v;v++)this["formatH"+v]=function(t){return function(e){this.formatBlock(e,"H"+t)}}(v);this.fontSize=function(e,n){var r=p.create();if(r.isCollapsed()){var o=i.styleNodes(r),s=u.head(o);t(o).css({"font-size":n+"px"}),s&&!f.nodeLength(s)&&(s.innerHTML=f.ZERO_WIDTH_NBSP_CHAR,p.createFromNodeAfter(s.firstChild).select(),e.data(k,s))}else h(e),t(i.styleNodes(r)).css({"font-size":n+"px"}),d(e)},this.insertHorizontalRule=function(e){h(e);var n=p.create(),i=n.insertNode(t("<HR/>")[0]);i.nextSibling&&p.create(i.nextSibling,0).normalize().select(),d(e)},this.removeBogus=function(t){var e=t.data(k);if(e){var n=u.find(u.from(e.childNodes),f.isText),i=n.nodeValue.indexOf(f.ZERO_WIDTH_NBSP_CHAR);-1!==i&&n.deleteData(i,1),f.isEmpty(e)&&f.remove(e),t.removeData(k)}},this.lineHeight=function(t,e){h(t),i.stylePara(p.create(),{lineHeight:e}),d(t)},this.unlink=function(t){var e=this.createRange(t);if(e.isOnAnchor()){var n=f.ancestor(e.sc,f.isAnchor);e=p.createFromNode(n),e.select(),h(t),document.execCommand("unlink"),d(t)}},this.createLink=function(e,n,r){var o=n.url,s=n.text,a=n.isNewWindow,l=n.range||this.createRange(e),c=l.toString()!==s;r=r||f.makeLayoutInfo(e).editor().data("options"),h(e),r.onCreateLink&&(o=r.onCreateLink(o));var g=[];if(c){var m=l.insertNode(t("<A>"+s+"</A>")[0]);g.push(m)}else g=i.styleNodes(l,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});t.each(g,function(e,n){t(n).attr("href",o),a?t(n).attr("target","_blank"):t(n).removeAttr("target")});var v=p.createFromNodeBefore(u.head(g)),y=v.getStartPoint(),x=p.createFromNodeAfter(u.last(g)),b=x.getEndPoint();p.create(y.node,y.offset,b.node,b.offset).select(),d(e)},this.getLinkInfo=function(e){this.focus(e);var n=p.create().expand(f.isAnchor),i=t(u.head(n.nodes(f.isAnchor)));return{range:n,text:n.toString(),isNewWindow:!!i.length&&"_blank"===i.attr("target"),url:i.length?i.attr("href"):""}},this.color=function(t,e){var n=JSON.parse(e),i=n.foreColor,r=n.backColor;h(t),i&&document.execCommand("foreColor",!1,i),r&&document.execCommand("backColor",!1,r),d(t)},this.insertTable=function(t,e){var n=e.split("x");h(t);var i=p.create().deleteContents();i.insertNode(r.createTable(n[0],n[1])),d(t)},this.floatMe=function(t,e,n){h(t),n.removeClass("pull-left pull-right"),e&&"none"!==e&&n.addClass("pull-"+e),n.css("float",e),d(t)},this.imageShape=function(t,e,n){h(t),n.removeClass("img-rounded img-circle img-thumbnail"),e&&n.addClass(e),d(t)},this.resize=function(t,e,n){h(t),n.css({width:100*e+"%",height:""}),d(t)},this.resizeTo=function(t,e,n){var i;if(n){var r=t.y/t.x,o=e.data("ratio");i={width:o>r?t.x:t.y/o,height:o>r?t.x*o:t.y}}else i={width:t.x,height:t.y};e.css(i)},this.removeMedia=function(n,i,r){h(n),r.detach(),e.bindCustomEvent(t(),n.data("callbacks"),"media.delete")(r,n),d(n)},this.focus=function(t){t.focus(),l.isFF&&!p.create().isOnEditable()&&p.createFromNode(t[0]).normalize().collapse().select()},this.isEmpty=function(t){return f.isEmpty(t[0])||f.emptyPara===t.html()}},T=function(){this.update=function(e,n){var i=function(e,n){e.find(".dropdown-menu li a").each(function(){var e=t(this).data("value")+""==n+"";this.className=e?"checked":""})},r=function(t,n){var i=e.find(t);i.toggleClass("active",n())};if(n.image){var o=t(n.image);r('button[data-event="imageShape"][data-value="img-rounded"]',function(){return o.hasClass("img-rounded")}),r('button[data-event="imageShape"][data-value="img-circle"]',function(){return o.hasClass("img-circle")}),r('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return o.hasClass("img-thumbnail")}),r('button[data-event="imageShape"]:not([data-value])',function(){return!o.is(".img-rounded, .img-circle, .img-thumbnail")});var s=o.css("float");r('button[data-event="floatMe"][data-value="left"]',function(){return"left"===s}),r('button[data-event="floatMe"][data-value="right"]',function(){return"right"===s}),r('button[data-event="floatMe"][data-value="none"]',function(){return"left"!==s&&"right"!==s});var a=o.attr("style");return r('button[data-event="resize"][data-value="1"]',function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(a)}),r('button[data-event="resize"][data-value="0.5"]',function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(a)}),void r('button[data-event="resize"][data-value="0.25"]',function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(a)})}var c=e.find(".note-fontname");if(c.length){var u=n["font-family"];if(u){for(var h=u.split(","),d=0,f=h.length;f>d&&(u=h[d].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!l.isFontInstalled(u));d++);c.find(".note-current-fontname").text(u),i(c,u)}}var p=e.find(".note-fontsize");p.find(".note-current-fontsize").text(n["font-size"]),i(p,parseFloat(n["font-size"]));var g=e.find(".note-height");i(g,parseFloat(n["line-height"])),r('button[data-event="bold"]',function(){return"bold"===n["font-bold"]}),r('button[data-event="italic"]',function(){return"italic"===n["font-italic"]}),r('button[data-event="underline"]',function(){return"underline"===n["font-underline"]}),r('button[data-event="strikethrough"]',function(){return"strikethrough"===n["font-strikethrough"]}),r('button[data-event="superscript"]',function(){return"superscript"===n["font-superscript"]}),r('button[data-event="subscript"]',function(){return"subscript"===n["font-subscript"]}),r('button[data-event="justifyLeft"]',function(){return"left"===n["text-align"]||"start"===n["text-align"]}),r('button[data-event="justifyCenter"]',function(){return"center"===n["text-align"]}),r('button[data-event="justifyRight"]',function(){return"right"===n["text-align"]}),r('button[data-event="justifyFull"]',function(){return"justify"===n["text-align"]}),r('button[data-event="insertUnorderedList"]',function(){return"unordered"===n["list-style"]}),r('button[data-event="insertOrderedList"]',function(){return"ordered"===n["list-style"]})},this.updateRecentColor=function(e,n,i){var r=t(e).closest(".note-color"),o=r.find(".note-recent-color"),s=JSON.parse(o.attr("data-value"));s[n]=i,o.attr("data-value",JSON.stringify(s));var a="backColor"===n?"background-color":"color";o.find("i").css(a,i)}},S=function(){var t=new T;this.update=function(e,n){t.update(e,n)},this.updateRecentColor=function(e,n,i){t.updateRecentColor(e,n,i)},this.activate=function(t){t.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(t){t.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(t,e){var n=t.find('button[data-event="fullscreen"]');n.toggleClass("active",e)},this.updateCodeview=function(t,e){var n=t.find('button[data-event="codeview"]');n.toggleClass("active",e),e?this.deactivate(t):this.activate(t)},this.get=function(t,e){var n=f.makeLayoutInfo(t).toolbar();return n.find("[data-name="+e+"]")},this.setButtonState=function(t,e,n){n=n!==!1;var i=this.get(t,e);i.toggleClass("active",n)}},A=24,M=function(){var e=t(document);this.attach=function(t,e){e.disableResizeEditor||t.statusbar().on("mousedown",n)};var n=function(t){t.preventDefault(),t.stopPropagation();var n=f.makeLayoutInfo(t.target).editable(),i=n.offset().top-e.scrollTop(),r=f.makeLayoutInfo(t.currentTarget||t.target),o=r.editor().data("options");e.on("mousemove",function(t){var e=t.clientY-(i+A);e=o.minHeight>0?Math.max(e,o.minHeight):e,e=o.maxHeight>0?Math.min(e,o.maxHeight):e,n.height(e)}).one("mouseup",function(){e.off("mousemove")})}},E=function(){var e=new T,n=function(e,n){var i=n&&n.isAirMode,r=n&&n.isLeftTop,o=t(e),s=i?o.offset():o.position(),a=r?0:o.outerHeight(!0);return{left:s.left,top:s.top+a}},i=function(t,e){t.css({display:"block",left:e.left,top:e.top})},r=20;this.update=function(o,s,a){e.update(o,s);var l=o.find(".note-link-popover");if(s.anchor){var h=l.find("a"),d=t(s.anchor).attr("href"),f=t(s.anchor).attr("target");h.attr("href",d).html(d),f?h.attr("target","_blank"):h.removeAttr("target"),i(l,n(s.anchor,{isAirMode:a}))}else l.hide();var p=o.find(".note-image-popover");s.image?i(p,n(s.image,{isAirMode:a,isLeftTop:!0})):p.hide();var g=o.find(".note-air-popover");if(a&&s.range&&!s.range.isCollapsed()){var m=u.last(s.range.getClientRects());if(m){var v=c.rect2bnd(m);i(g,{left:Math.max(v.left+v.width/2-r,0),top:v.top+v.height})}}else g.hide()},this.updateRecentColor=function(t,e,n){t.updateRecentColor(t,e,n)},this.hide=function(t){t.children().hide()}},P=function(e){var n=t(document),i=function(i){if(f.isControlSizing(i.target)){i.preventDefault(),i.stopPropagation();var r=f.makeLayoutInfo(i.target),o=r.handle(),s=r.popover(),a=r.editable(),l=r.editor(),c=o.find(".note-control-selection").data("target"),u=t(c),h=u.offset(),d=n.scrollTop(),p=l.data("options").airMode;n.on("mousemove",function(t){e.invoke("editor.resizeTo",{x:t.clientX-h.left,y:t.clientY-(h.top-d)},u,!t.shiftKey),e.invoke("handle.update",o,{image:c},p),e.invoke("popover.update",s,{image:c},p)}).one("mouseup",function(){n.off("mousemove"),e.invoke("editor.afterCommand",a)}),u.data("ratio")||u.data("ratio",u.height()/u.width())}};this.attach=function(t){t.handle().on("mousedown",i)},this.update=function(e,n,i){var r=e.find(".note-control-selection");if(n.image){var o=t(n.image),s=i?o.offset():o.position(),a={w:o.outerWidth(!0),h:o.outerHeight(!0)};r.css({display:"block",left:s.left,top:s.top,width:a.w,height:a.h}).data("target",n.image);var l=a.w+"x"+a.h;r.find(".note-control-selection-info").text(l)}else r.hide()},this.hide=function(t){t.children().hide()}},D=function(e){var n=t(window),i=t("html, body");this.toggle=function(t){var r=t.editor(),o=t.toolbar(),s=t.editable(),a=t.codable(),l=function(t){s.css("height",t.h),a.css("height",t.h),a.data("cmeditor")&&a.data("cmeditor").setsize(null,t.h)};r.toggleClass("fullscreen");var c=r.hasClass("fullscreen");c?(s.data("orgheight",s.css("height")),n.on("resize",function(){l({h:n.height()-o.outerHeight()})}).trigger("resize"),i.css("overflow","hidden")):(n.off("resize"),l({h:s.data("orgheight")}),i.css("overflow","visible")),e.invoke("toolbar.updateFullscreen",o,c)}};l.hasCodeMirror&&(l.isSupportAmd?require(["CodeMirror"],function(t){a=t}):a=window.CodeMirror);var L=function(t){this.sync=function(e){var n=t.invoke("codeview.isActivated",e);n&&l.hasCodeMirror&&e.codable().data("cmEditor").save()},this.isActivated=function(t){var e=t.editor();return e.hasClass("codeview")},this.toggle=function(t){this.isActivated(t)?this.deactivate(t):this.activate(t)},this.activate=function(e){var n=e.editor(),i=e.toolbar(),r=e.editable(),o=e.codable(),s=e.popover(),c=e.handle(),u=n.data("options");if(o.val(f.html(r,u.prettifyHtml)),o.height(r.height()),t.invoke("toolbar.updateCodeview",i,!0),t.invoke("popover.hide",s),t.invoke("handle.hide",c),n.addClass("codeview"),o.focus(),l.hasCodeMirror){var h=a.fromTextArea(o[0],u.codemirror);if(u.codemirror.tern){var d=new a.TernServer(u.codemirror.tern);h.ternServer=d,h.on("cursorActivity",function(t){d.updateArgHints(t)})}h.setSize(null,r.outerHeight()),o.data("cmEditor",h)}},this.deactivate=function(e){var n=e.holder(),i=e.editor(),r=e.toolbar(),o=e.editable(),s=e.codable(),a=i.data("options");if(l.hasCodeMirror){var c=s.data("cmEditor");s.val(c.getValue()),c.toTextArea()}var u=f.value(s,a.prettifyHtml)||f.emptyPara,h=o.html()!==u;o.html(u),o.height(a.height?s.height():"auto"),i.removeClass("codeview"),h&&t.bindCustomEvent(n,o.data("callbacks"),"change")(o.html(),o),o.focus(),t.invoke("toolbar.updateCodeview",r,!1)}},N=function(e){var n=t(document);this.attach=function(t,e){e.airMode||e.disableDragAndDrop?n.on("drop",function(t){t.preventDefault()}):this.attachDragAndDropEvent(t,e)},this.attachDragAndDropEvent=function(i,r){var o=t(),s=i.editor(),a=i.dropzone(),l=a.find(".note-dropzone-message");n.on("dragenter",function(t){var n=e.invoke("codeview.isActivated",i),c=s.width()>0&&s.height()>0;n||o.length||!c||(s.addClass("dragover"),a.width(s.width()),a.height(s.height()),l.text(r.langInfo.image.dragImageHere)),o=o.add(t.target)}).on("dragleave",function(t){o=o.not(t.target),o.length||s.removeClass("dragover")}).on("drop",function(){o=t(),s.removeClass("dragover")}),a.on("dragenter",function(){a.addClass("hover"),l.text(r.langInfo.image.dropImage)}).on("dragleave",function(){a.removeClass("hover"),l.text(r.langInfo.image.dragImageHere)}),a.on("drop",function(n){var i=n.originalEvent.dataTransfer,r=f.makeLayoutInfo(n.currentTarget||n.target);if(i&&i.files&&i.files.length)n.preventDefault(),r.editable().focus(),e.insertImages(r,i.files);else for(var o=function(){r.holder().summernote("insertNode",this)},s=0,a=i.types.length;a>s;s++){var l=i.types[s],c=i.getData(l);l.toLowerCase().indexOf("text")>-1?r.holder().summernote("pasteHTML",c):t(c).each(o)}}).on("dragover",!1)}},I=function(e){var n;this.attach=function(o){l.isMSIE&&l.browserVersion>10||l.isFF?(n=t("<div />").attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),o.editable().on("keydown",function(t){t.ctrlKey&&t.keyCode===v.code.V&&(e.invoke("saveRange",o.editable()),n.focus(),setTimeout(function(){i(o)},0))}),o.editable().before(n)):o.editable().on("paste",r)};var i=function(i){var r=i.editable(),o=n[0].firstChild;if(f.isImg(o)){for(var s=o.src,a=atob(s.split(",")[1]),l=new Uint8Array(a.length),c=0;c<a.length;c++)l[c]=a.charCodeAt(c);var u=new Blob([l],{type:"image/png"});u.name="clipboard.png",e.invoke("restoreRange",r),e.invoke("focus",r),e.insertImages(i,[u])}else{var h=t("<div />").html(n.html()).html();e.invoke("restoreRange",r),e.invoke("focus",r),h&&e.invoke("pasteHTML",r,h)}n.empty()},r=function(t){var n=t.originalEvent.clipboardData,i=f.makeLayoutInfo(t.currentTarget||t.target),r=i.editable();if(n&&n.items&&n.items.length){var o=u.head(n.items);"file"===o.kind&&-1!==o.type.indexOf("image/")&&e.insertImages(i,[o.getAsFile()]),e.invoke("editor.afterCommand",r)}}},R=function(e){var n=function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},i=function(t,e){t.on("keypress",function(t){t.keyCode===v.code.ENTER&&e.trigger("click")})};this.showLinkDialog=function(e,r,o){return t.Deferred(function(t){var e=r.find(".note-link-dialog"),s=e.find(".note-link-text"),a=e.find(".note-link-url"),l=e.find(".note-link-btn"),c=e.find("input[type=checkbox]");e.one("shown.bs.modal",function(){s.val(o.text),s.on("input",function(){n(l,s.val()&&a.val()),o.text=s.val()}),o.url||(o.url=o.text||"http://",n(l,o.text)),a.on("input",function(){n(l,s.val()&&a.val()),o.text||s.val(a.val())}).val(o.url).trigger("focus").trigger("select"),i(a,l),i(s,l),c.prop("checked",o.isNewWindow),l.one("click",function(n){n.preventDefault(),t.resolve({range:o.range,url:a.val(),text:s.val(),isNewWindow:c.is(":checked")}),e.modal("hide")})}).one("hidden.bs.modal",function(){s.off("input keypress"),a.off("input keypress"),l.off("click"),"pending"===t.state()&&t.reject()}).modal("show")}).promise()},this.show=function(t){var n=t.editor(),i=t.dialog(),r=t.editable(),o=t.popover(),s=e.invoke("editor.getLinkInfo",r),a=n.data("options");e.invoke("editor.saveRange",r),this.showLinkDialog(r,i,s).then(function(t){e.invoke("editor.restoreRange",r),e.invoke("editor.createLink",r,t,a),e.invoke("popover.hide",o)}).fail(function(){e.invoke("editor.restoreRange",r)})}},F=function(e){var n=function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},i=function(t,e){t.on("keypress",function(t){t.keyCode===v.code.ENTER&&e.trigger("click")})};this.show=function(t){var n=t.dialog(),i=t.editable();e.invoke("editor.saveRange",i),this.showImageDialog(i,n).then(function(n){e.invoke("editor.restoreRange",i),"string"==typeof n?e.invoke("editor.insertImage",i,n):e.insertImages(t,n)}).fail(function(){e.invoke("editor.restoreRange",i)})},this.showImageDialog=function(e,r){return t.Deferred(function(t){var e=r.find(".note-image-dialog"),o=r.find(".note-image-input"),s=r.find(".note-image-url"),a=r.find(".note-image-btn");e.one("shown.bs.modal",function(){o.replaceWith(o.clone().on("change",function(){t.resolve(this.files||this.value),e.modal("hide")}).val("")),a.click(function(n){n.preventDefault(),t.resolve(s.val()),e.modal("hide")}),s.on("keyup paste",function(t){var e;e="paste"===t.type?t.originalEvent.clipboardData.getData("text"):s.val(),n(a,e)}).val("").trigger("focus"),i(s,a)}).one("hidden.bs.modal",function(){o.off("change"),s.off("keyup paste keypress"),a.off("click"),"pending"===t.state()&&t.reject()}).modal("show")})}},z=function(e){this.showHelpDialog=function(e,n){return t.Deferred(function(t){var e=n.find(".note-help-dialog");e.one("hidden.bs.modal",function(){t.resolve()}).modal("show")}).promise()},this.show=function(t){var n=t.dialog(),i=t.editable();e.invoke("editor.saveRange",i,!0),this.showHelpDialog(i,n).then(function(){e.invoke("editor.restoreRange",i)})}},O=function(){var e=this,n=this.modules={editor:new C(this),toolbar:new S(this),statusbar:new M(this),popover:new E(this),handle:new P(this),fullscreen:new D(this),codeview:new L(this),dragAndDrop:new N(this),clipboard:new I(this),linkDialog:new R(this),imageDialog:new F(this),helpDialog:new z(this)};this.invoke=function(){var t=u.head(u.from(arguments)),e=u.tail(u.from(arguments)),n=t.split("."),i=n.length>1,r=i&&u.head(n),o=i?u.last(n):u.head(n),s=this.getModule(r),a=s[o];return a&&a.apply(s,e)},this.getModule=function(t){return this.modules[t]||this.modules.editor};var i=this.bindCustomEvent=function(t,e,n){return function(){var i=e[c.namespaceToCamel(n,"on")];return i&&i.apply(t[0],arguments),t.trigger("summernote."+n,arguments)}};this.insertImages=function(e,r){var o=e.editor(),s=e.editable(),a=e.holder(),l=s.data("callbacks"),c=o.data("options");l.onImageUpload?i(a,l,"image.upload")(r):t.each(r,function(t,e){var r=e.name;c.maximumImageFileSize&&c.maximumImageFileSize<e.size?i(a,l,"image.upload.error")(c.langInfo.image.maximumFileSizeError):m.readFileAsDataURL(e).then(function(t){n.editor.insertImage(s,t,r)}).fail(function(){i(a,l,"image.upload.error")(c.langInfo.image.maximumFileSizeError)})})};var r={showLinkDialog:function(t){n.linkDialog.show(t)},showImageDialog:function(t){n.imageDialog.show(t)},showHelpDialog:function(t){n.helpDialog.show(t)},fullscreen:function(t){n.fullscreen.toggle(t)},codeview:function(t){n.codeview.toggle(t)}},o=function(t){f.isImg(t.target)&&t.preventDefault()},s=function(t){var e=f.makeLayoutInfo(t.currentTarget||t.target);n.editor.removeBogus(e.editable()),a(t)};this.updateStyleInfo=function(t,e){if(t){var i=e.editor().data("options").airMode;i||n.toolbar.update(e.toolbar(),t),n.popover.update(e.popover(),t,i),n.handle.update(e.handle(),t,i)}};var a=function(t){var i=t.target;setTimeout(function(){var t=f.makeLayoutInfo(i),r=n.editor.currentStyle(i);e.updateStyleInfo(r,t)},0)},h=function(t){var e=f.makeLayoutInfo(t.currentTarget||t.target);n.popover.hide(e.popover()),n.handle.hide(e.handle())},d=function(e){var n=t(e.target).closest("[data-event]");n.length&&e.preventDefault()},p=function(e){var i=t(e.target).closest("[data-event]");if(i.length){var o,s=i.attr("data-event"),l=i.attr("data-value"),c=i.attr("data-hide"),h=f.makeLayoutInfo(e.target);if(-1!==t.inArray(s,["resize","floatMe","removeMedia","imageShape"])){var d=h.handle().find(".note-control-selection");o=t(d.data("target"))}if(c&&i.parents(".popover").hide(),t.isFunction(t.summernote.pluginEvents[s]))t.summernote.pluginEvents[s](e,n.editor,h,l);else if(n.editor[s]){var p=h.editable();p.focus(),n.editor[s](p,l,o),e.preventDefault()}else r[s]&&(r[s].call(this,h),e.preventDefault());if(-1!==t.inArray(s,["backColor","foreColor"])){var g=h.editor().data("options",g),m=g.airMode?n.popover:n.toolbar;m.updateRecentColor(u.head(i),s,l)}a(e)}},g=18,x=function(e,n){var i,r=t(e.target.parentNode),o=r.next(),s=r.find(".note-dimension-picker-mousecatcher"),a=r.find(".note-dimension-picker-highlighted"),l=r.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){var c=t(e.target).offset();i={x:e.pageX-c.left,y:e.pageY-c.top}}else i={x:e.offsetX,y:e.offsetY};var u={c:Math.ceil(i.x/g)||1,r:Math.ceil(i.y/g)||1};a.css({width:u.c+"em",height:u.r+"em"}),s.attr("data-value",u.c+"x"+u.r),3<u.c&&u.c<n.insertTableMaxSize.col&&l.css({width:u.c+1+"em"}),3<u.r&&u.r<n.insertTableMaxSize.row&&l.css({height:u.r+1+"em"}),o.html(u.c+" x "+u.r)};this.bindKeyMap=function(e,i){var o=e.editor(),s=e.editable();s.on("keydown",function(a){var l=[];a.metaKey&&l.push("CMD"),a.ctrlKey&&!a.altKey&&l.push("CTRL"),a.shiftKey&&l.push("SHIFT");var c=v.nameFromCode[a.keyCode];c&&l.push(c);var u,h=l.join("+"),d=i[h];if(d){if(u=t.summernote.pluginEvents[h],t.isFunction(u)&&u(a,n.editor,e))return!1;u=t.summernote.pluginEvents[d],t.isFunction(u)?u(a,n.editor,e):n.editor[d]?(n.editor[d](s,o.data("options")),a.preventDefault()):r[d]&&(r[d].call(this,e),a.preventDefault())}else v.isEdit(a.keyCode)&&n.editor.afterCommand(s)})},this.attach=function(t,e){e.shortcuts&&this.bindKeyMap(t,e.keyMap[l.isMac?"mac":"pc"]),t.editable().on("mousedown",o),t.editable().on("keyup mouseup",s),t.editable().on("scroll",h),n.clipboard.attach(t,e),n.handle.attach(t,e),t.popover().on("click",p),t.popover().on("mousedown",d),n.dragAndDrop.attach(t,e),e.airMode||(t.toolbar().on("click",p),t.toolbar().on("mousedown",d),n.statusbar.attach(t,e));var i=e.airMode?t.popover():t.toolbar(),r=i.find(".note-dimension-picker-mousecatcher");r.css({width:e.insertTableMaxSize.col+"em",height:e.insertTableMaxSize.row+"em"}).on("mousemove",function(t){x(t,e)}),t.editor().data("options",e),l.isMSIE||setTimeout(function(){document.execCommand("styleWithCSS",0,e.styleWithSpan)},0);var a=new y(t.editable());t.editable().data("NoteHistory",a),t.editable().data("callbacks",{onInit:e.onInit,onFocus:e.onFocus,onBlur:e.onBlur,onKeydown:e.onKeydown,onKeyup:e.onKeyup,onMousedown:e.onMousedown,onEnter:e.onEnter,onPaste:e.onPaste,onBeforeCommand:e.onBeforeCommand,onChange:e.onChange,onImageUpload:e.onImageUpload,onImageUploadError:e.onImageUploadError,onMediaDelete:e.onMediaDelete,onToolbarClick:e.onToolbarClick});var c=n.editor.styleFromNode(t.editable());this.updateStyleInfo(c,t)},this.attachCustomEvent=function(e,n){var r=e.holder(),o=e.editable(),s=o.data("callbacks");o.focus(i(r,s,"focus")),o.blur(i(r,s,"blur")),o.keydown(function(t){t.keyCode===v.code.ENTER&&i(r,s,"enter").call(this,t),i(r,s,"keydown").call(this,t)}),o.keyup(i(r,s,"keyup")),o.on("mousedown",i(r,s,"mousedown")),o.on("mouseup",i(r,s,"mouseup")),o.on("scroll",i(r,s,"scroll")),o.on("paste",i(r,s,"paste"));var a=l.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";o.on(a,function(){i(r,s,"change")(o.html(),o)}),n.airMode||(e.toolbar().click(i(r,s,"toolbar.click")),e.popover().click(i(r,s,"popover.click"))),f.isTextarea(u.head(r))&&r.closest("form").submit(function(t){e.holder().val(e.holder().code()),i(r,s,"submit").call(this,t,r.code())}),f.isTextarea(u.head(r))&&n.textareaAutoSync&&r.on("summernote.change",function(){e.holder().val(e.holder().code())}),i(r,s,"init")(e);for(var c=0,h=t.summernote.plugins.length;h>c;c++)t.isFunction(t.summernote.plugins[c].init)&&t.summernote.plugins[c].init(e)},this.detach=function(t,e){t.holder().off(),t.editable().off(),t.popover().off(),t.handle().off(),t.dialog().off(),e.airMode||(t.dropzone().off(),t.toolbar().off(),t.statusbar().off())}},B=function(){var e=function(t,e){var n=e.event,i=e.value,r=e.title,o=e.className,s=e.dropdown,a=e.hide;return(s?'<div class="btn-group'+(o?" "+o:"")+'">':"")+'<button type="button" class="btn btn-default btn-sm'+(!s&&o?" "+o:"")+(s?" dropdown-toggle":"")+'"'+(s?' data-toggle="dropdown"':"")+(r?' title="'+r+'"':"")+(n?' data-event="'+n+'"':"")+(i?" data-value='"+i+"'":"")+(a?" data-hide='"+a+"'":"")+' tabindex="-1">'+t+(s?' <span class="caret"></span>':"")+"</button>"+(s||"")+(s?"</div>":"")},n=function(t,n){var i='<i class="'+t+'"></i>';return e(i,n)},i=function(e,n){var i=t('<div class="'+e+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');return i.find(".popover-content").append(n),i},r=function(t,e,n,i){return'<div class="'+t+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(e?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+e+"</h4></div>":"")+'<div class="modal-body">'+n+"</div>"+(i?'<div class="modal-footer">'+i+"</div>":"")+"</div></div></div>"},o=function(t,e,n){var i="dropdown-menu"+(e?" "+e:"");return n=n||"ul",t instanceof Array&&(t=t.join("")),"<"+n+' class="'+i+'">'+t+"</"+n+">"},s={picture:function(t,e){return n(e.iconPrefix+e.icons.image.image,{event:"showImageDialog",title:t.image.image,hide:!0})},link:function(t,e){return n(e.iconPrefix+e.icons.link.link,{event:"showLinkDialog",title:t.link.link,hide:!0})},table:function(t,e){var i=['<div class="note-dimension-picker">','<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>','<div class="note-dimension-picker-highlighted"></div>','<div class="note-dimension-picker-unhighlighted"></div>',"</div>",'<div class="note-dimension-display"> 1 x 1 </div>'];return n(e.iconPrefix+e.icons.table.table,{title:t.table.table,dropdown:o(i,"note-table")})},style:function(t,e){var i=e.styleTags.reduce(function(e,n){var i=t.style["p"===n?"normal":n];return e+'<li><a data-event="formatBlock" href="#" data-value="'+n+'">'+("p"===n||"pre"===n?i:"<"+n+">"+i+"</"+n+">")+"</a></li>"},"");return n(e.iconPrefix+e.icons.style.style,{title:t.style.style,dropdown:o(i)})},fontname:function(t,n){var i=[],r=n.fontNames.reduce(function(t,e){return l.isFontInstalled(e)||u.contains(n.fontNamesIgnoreCheck,e)?(i.push(e),t+'<li><a data-event="fontName" href="#" data-value="'+e+'" style="font-family:\''+e+'\'"><i class="'+n.iconPrefix+n.icons.misc.check+'"></i> '+e+"</a></li>"):t},""),s=l.isFontInstalled(n.defaultFontName),a=s?n.defaultFontName:i[0],c='<span class="note-current-fontname">'+a+"</span>";return e(c,{title:t.font.name,className:"note-fontname",dropdown:o(r,"note-check")})},fontsize:function(t,n){var i=n.fontSizes.reduce(function(t,e){return t+'<li><a data-event="fontSize" href="#" data-value="'+e+'"><i class="'+n.iconPrefix+n.icons.misc.check+'"></i> '+e+"</a></li>"},""),r='<span class="note-current-fontsize">11</span>';return e(r,{title:t.font.size,className:"note-fontsize",dropdown:o(i,"note-check")})},color:function(t,n){var i='<i class="'+n.iconPrefix+n.icons.color.recent+'" style="color:black;background-color:yellow;"></i>',r=e(i,{className:"note-recent-color",title:t.color.recent,event:"color",value:'{"backColor":"yellow"}'}),s=['<li><div class="btn-group">','<div class="note-palette-title">'+t.color.background+"</div>",'<div class="note-color-reset" data-event="backColor"',' data-value="inherit" title="'+t.color.transparent+'">'+t.color.setTransparent+"</div>",'<div class="note-color-palette" data-target-event="backColor"></div>','</div><div class="btn-group">','<div class="note-palette-title">'+t.color.foreground+"</div>",'<div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+t.color.reset+'">',t.color.resetToDefault,"</div>",'<div class="note-color-palette" data-target-event="foreColor"></div>',"</div></li>"],a=e("",{title:t.color.more,dropdown:o(s)});return r+a},bold:function(t,e){return n(e.iconPrefix+e.icons.font.bold,{event:"bold",title:t.font.bold})},italic:function(t,e){return n(e.iconPrefix+e.icons.font.italic,{event:"italic",title:t.font.italic})},underline:function(t,e){return n(e.iconPrefix+e.icons.font.underline,{event:"underline",title:t.font.underline})},strikethrough:function(t,e){return n(e.iconPrefix+e.icons.font.strikethrough,{event:"strikethrough",title:t.font.strikethrough})},superscript:function(t,e){return n(e.iconPrefix+e.icons.font.superscript,{event:"superscript",title:t.font.superscript})},subscript:function(t,e){return n(e.iconPrefix+e.icons.font.subscript,{event:"subscript",title:t.font.subscript})},clear:function(t,e){return n(e.iconPrefix+e.icons.font.clear,{event:"removeFormat",title:t.font.clear})},ul:function(t,e){return n(e.iconPrefix+e.icons.lists.unordered,{event:"insertUnorderedList",title:t.lists.unordered})},ol:function(t,e){return n(e.iconPrefix+e.icons.lists.ordered,{event:"insertOrderedList",title:t.lists.ordered})},paragraph:function(t,e){var i=n(e.iconPrefix+e.icons.paragraph.left,{title:t.paragraph.left,event:"justifyLeft"}),r=n(e.iconPrefix+e.icons.paragraph.center,{title:t.paragraph.center,event:"justifyCenter"}),s=n(e.iconPrefix+e.icons.paragraph.right,{title:t.paragraph.right,event:"justifyRight"}),a=n(e.iconPrefix+e.icons.paragraph.justify,{title:t.paragraph.justify,event:"justifyFull"}),l=n(e.iconPrefix+e.icons.paragraph.outdent,{title:t.paragraph.outdent,event:"outdent"}),c=n(e.iconPrefix+e.icons.paragraph.indent,{title:t.paragraph.indent,event:"indent"}),u=['<div class="note-align btn-group">',i+r+s+a,'</div><div class="note-list btn-group">',c+l,"</div>"];return n(e.iconPrefix+e.icons.paragraph.paragraph,{title:t.paragraph.paragraph,dropdown:o(u,"","div")})},height:function(t,e){var i=e.lineHeights.reduce(function(t,n){return t+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(n)+'"><i class="'+e.iconPrefix+e.icons.misc.check+'"></i> '+n+"</a></li>"},"");return n(e.iconPrefix+e.icons.font.height,{title:t.font.height,dropdown:o(i,"note-check")})},help:function(t,e){return n(e.iconPrefix+e.icons.options.help,{event:"showHelpDialog",title:t.options.help,hide:!0})},fullscreen:function(t,e){return n(e.iconPrefix+e.icons.options.fullscreen,{event:"fullscreen",title:t.options.fullscreen})},codeview:function(t,e){return n(e.iconPrefix+e.icons.options.codeview,{event:"codeview",title:t.options.codeview})},undo:function(t,e){return n(e.iconPrefix+e.icons.history.undo,{event:"undo",title:t.history.undo})},redo:function(t,e){return n(e.iconPrefix+e.icons.history.redo,{event:"redo",title:t.history.redo})},hr:function(t,e){return n(e.iconPrefix+e.icons.hr.insert,{event:"insertHorizontalRule",title:t.hr.insert})}},a=function(r,o){var a=function(){var t=n(o.iconPrefix+o.icons.link.edit,{title:r.link.edit,event:"showLinkDialog",hide:!0}),e=n(o.iconPrefix+o.icons.link.unlink,{title:r.link.unlink,event:"unlink"}),s='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+t+e+"</div>";
return i("note-link-popover",s)},l=function(){var t=e('<span class="note-fontsize-10">100%</span>',{title:r.image.resizeFull,event:"resize",value:"1"}),s=e('<span class="note-fontsize-10">50%</span>',{title:r.image.resizeHalf,event:"resize",value:"0.5"}),a=e('<span class="note-fontsize-10">25%</span>',{title:r.image.resizeQuarter,event:"resize",value:"0.25"}),l=n(o.iconPrefix+o.icons.image.floatLeft,{title:r.image.floatLeft,event:"floatMe",value:"left"}),c=n(o.iconPrefix+o.icons.image.floatRight,{title:r.image.floatRight,event:"floatMe",value:"right"}),u=n(o.iconPrefix+o.icons.image.floatNone,{title:r.image.floatNone,event:"floatMe",value:"none"}),h=n(o.iconPrefix+o.icons.image.shapeRounded,{title:r.image.shapeRounded,event:"imageShape",value:"img-rounded"}),d=n(o.iconPrefix+o.icons.image.shapeCircle,{title:r.image.shapeCircle,event:"imageShape",value:"img-circle"}),f=n(o.iconPrefix+o.icons.image.shapeThumbnail,{title:r.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),p=n(o.iconPrefix+o.icons.image.shapeNone,{title:r.image.shapeNone,event:"imageShape",value:""}),g=n(o.iconPrefix+o.icons.image.remove,{title:r.image.remove,event:"removeMedia",value:"none"}),m=(o.disableResizeImage?"":'<div class="btn-group">'+t+s+a+"</div>")+'<div class="btn-group">'+l+c+u+'</div><br><div class="btn-group">'+h+d+f+p+'</div><div class="btn-group">'+g+"</div>";return i("note-image-popover",m)},c=function(){for(var e=t("<div />"),n=0,a=o.airPopover.length;a>n;n++){for(var l=o.airPopover[n],c=t('<div class="note-'+l[0]+' btn-group">'),u=0,h=l[1].length;h>u;u++){var d=t(s[l[1][u]](r,o));d.attr("data-name",l[1][u]),c.append(d)}e.append(c)}return i("note-air-popover",e.children())},u=t('<div class="note-popover" />');return u.append(a()),u.append(l()),o.airMode&&u.append(c()),u},h=function(t){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="'+(t.disableResizeImage?"note-control-holder":"note-control-sizing")+' note-control-se"></div>'+(t.disableResizeImage?"":'<div class="note-control-selection-info"></div>')+"</div></div>"},d=function(t,e){var n="note-shortcut-col col-xs-6 note-shortcut-",i=[];for(var r in e)e.hasOwnProperty(r)&&i.push('<div class="'+n+'key">'+e[r].kbd+'</div><div class="'+n+'name">'+e[r].text+"</div>");return'<div class="note-shortcut-row row"><div class="'+n+'title col-xs-offset-6">'+t+'</div></div><div class="note-shortcut-row row">'+i.join('</div><div class="note-shortcut-row row">')+"</div>"},p=function(t){var e=[{kbd:"\u2318 + B",text:t.font.bold},{kbd:"\u2318 + I",text:t.font.italic},{kbd:"\u2318 + U",text:t.font.underline},{kbd:"\u2318 + \\",text:t.font.clear}];return d(t.shortcut.textFormatting,e)},g=function(t){var e=[{kbd:"\u2318 + Z",text:t.history.undo},{kbd:"\u2318 + \u21e7 + Z",text:t.history.redo},{kbd:"\u2318 + ]",text:t.paragraph.indent},{kbd:"\u2318 + [",text:t.paragraph.outdent},{kbd:"\u2318 + ENTER",text:t.hr.insert}];return d(t.shortcut.action,e)},m=function(t){var e=[{kbd:"\u2318 + \u21e7 + L",text:t.paragraph.left},{kbd:"\u2318 + \u21e7 + E",text:t.paragraph.center},{kbd:"\u2318 + \u21e7 + R",text:t.paragraph.right},{kbd:"\u2318 + \u21e7 + J",text:t.paragraph.justify},{kbd:"\u2318 + \u21e7 + NUM7",text:t.lists.ordered},{kbd:"\u2318 + \u21e7 + NUM8",text:t.lists.unordered}];return d(t.shortcut.paragraphFormatting,e)},v=function(t){var e=[{kbd:"\u2318 + NUM0",text:t.style.normal},{kbd:"\u2318 + NUM1",text:t.style.h1},{kbd:"\u2318 + NUM2",text:t.style.h2},{kbd:"\u2318 + NUM3",text:t.style.h3},{kbd:"\u2318 + NUM4",text:t.style.h4},{kbd:"\u2318 + NUM5",text:t.style.h5},{kbd:"\u2318 + NUM6",text:t.style.h6}];return d(t.shortcut.documentStyle,e)},y=function(t,e){var n=e.extraKeys,i=[];for(var r in n)n.hasOwnProperty(r)&&i.push({kbd:r,text:n[r]});return d(t.shortcut.extraKeys,i)},x=function(t,e){var n='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"',i=["<div "+n+">"+g(t,e)+"</div><div "+n+">"+p(t,e)+"</div>","<div "+n+">"+v(t,e)+"</div><div "+n+">"+m(t,e)+"</div>"];return e.extraKeys&&i.push("<div "+n+">"+y(t,e)+"</div>"),'<div class="note-shortcut-row row">'+i.join('</div><div class="note-shortcut-row row">')+"</div>"},b=function(t){return t.replace(/\u2318/g,"Ctrl").replace(/\u21e7/g,"Shift")},w={image:function(t,e){var n="";if(e.maximumImageFileSize){var i=Math.floor(Math.log(e.maximumImageFileSize)/Math.log(1024)),o=1*(e.maximumImageFileSize/Math.pow(1024,i)).toFixed(2)+" "+" KMGTP"[i]+"B";n="<small>"+t.image.maximumFileSize+" : "+o+"</small>"}var s='<div class="form-group row note-group-select-from-files"><label>'+t.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+n+'</div><div class="form-group row"><label>'+t.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',a='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+t.image.insert+"</button>";return r("note-image-dialog",t.image.insert,s,a)},link:function(t,e){var n='<div class="form-group row"><label>'+t.link.textToDisplay+'</label><input class="note-link-text form-control col-md-12" type="text" /></div><div class="form-group row"><label>'+t.link.url+'</label><input class="note-link-url form-control col-md-12" type="text" value="http://" /></div>'+(e.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+t.link.openInNewWindow+"</label></div>"),i='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+t.link.insert+"</button>";return r("note-link-dialog",t.link.insert,n,i)},help:function(t,e){var n='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+t.shortcut.close+'</a><div class="title">'+t.shortcut.shortcuts+"</div>"+(l.isMac?x(t,e):b(x(t,e)))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.16</a> \xb7 <a href="//github.com/summernote/summernote" target="_blank">Project</a> \xb7 <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';return r("note-help-dialog","",n,"")}},_=function(e,n){var i="";return t.each(w,function(t,r){i+=r(e,n)}),'<div class="note-dialog">'+i+"</div>"},k=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},C=function(t){return l.isMac&&(t=t.replace("CMD","\u2318").replace("SHIFT","\u21e7")),t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},T=function(e,n,i){var r=c.invertObject(n),o=e.find("button");o.each(function(e,n){var i=t(n),o=r[i.data("event")];o&&i.attr("title",function(t,e){return e+" ("+C(o)+")"})}).tooltip({container:"body",trigger:"hover",placement:i||"top"}).on("click",function(){t(this).tooltip("hide")})},S=function(e,n){var i=n.colors;e.find(".note-color-palette").each(function(){for(var e=t(this),n=e.attr("data-target-event"),r=[],o=0,s=i.length;s>o;o++){for(var a=i[o],l=[],c=0,u=a.length;u>c;c++){var h=a[c];l.push(['<button type="button" class="note-color-btn" style="background-color:',h,';" data-event="',n,'" data-value="',h,'" title="',h,'" data-toggle="button" tabindex="-1"></button>'].join(""))}r.push('<div class="note-color-row">'+l.join("")+"</div>")}e.html(r.join(""))})};this.createLayoutByAirMode=function(e,n){var i=n.langInfo,r=n.keyMap[l.isMac?"mac":"pc"],o=c.uniqueId();e.addClass("note-air-editor note-editable panel-body"),e.attr({id:"note-editor-"+o,contentEditable:!0});var s=document.body,u=t(a(i,n));u.addClass("note-air-layout"),u.attr("id","note-popover-"+o),u.appendTo(s),T(u,r),S(u,n);var d=t(h(n));d.addClass("note-air-layout"),d.attr("id","note-handle-"+o),d.appendTo(s);var f=t(_(i,n));f.addClass("note-air-layout"),f.attr("id","note-dialog-"+o),f.find("button.close, a.modal-close").click(function(){t(this).closest(".modal").modal("hide")}),f.appendTo(s)},this.createLayoutByFrame=function(e,n){var i=n.langInfo,r=t('<div class="note-editor panel panel-default" />');n.width&&r.width(n.width),n.height>0&&t('<div class="note-statusbar">'+(n.disableResizeEditor?"":k())+"</div>").prependTo(r);var o=t('<div class="note-editing-area" />'),c=!e.is(":disabled"),u=t('<div class="note-editable panel-body" contentEditable="'+c+'"></div>').prependTo(o);n.height&&u.height(n.height),n.direction&&u.attr("dir",n.direction);var d=e.attr("placeholder")||n.placeholder;d&&u.attr("data-placeholder",d),u.html(f.html(e)||f.emptyPara),t('<textarea class="note-codable"></textarea>').prependTo(o);var p=t(a(i,n)).prependTo(o);S(p,n),T(p,E),t(h(n)).prependTo(o),o.prependTo(r);for(var g=t('<div class="note-toolbar panel-heading" />'),m=0,v=n.toolbar.length;v>m;m++){for(var y=n.toolbar[m][0],x=n.toolbar[m][1],b=t('<div class="note-'+y+' btn-group" />'),w=0,C=x.length;C>w;w++){var A=s[x[w]];if(t.isFunction(A)){var M=t(A(i,n));M.attr("data-name",x[w]),b.append(M)}}g.append(b)}var E=n.keyMap[l.isMac?"mac":"pc"];S(g,n),T(g,E,"bottom"),g.prependTo(r),t('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(r);var P=n.dialogsInBody?t(document.body):r,D=t(_(i,n)).prependTo(P);D.find("button.close, a.modal-close").click(function(){t(this).closest(".modal").modal("hide")}),r.insertAfter(e),e.hide()},this.hasNoteEditor=function(t){return this.noteEditorFromHolder(t).length>0},this.noteEditorFromHolder=function(e){return e.hasClass("note-air-editor")?e:e.next().hasClass("note-editor")?e.next():t()},this.createLayout=function(t,e){e.airMode?this.createLayoutByAirMode(t,e):this.createLayoutByFrame(t,e)},this.layoutInfoFromHolder=function(t){var e=this.noteEditorFromHolder(t);if(e.length)return e.data("holder",t),f.buildLayoutInfo(e)},this.removeLayout=function(t,e,n){n.airMode?(t.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),e.popover().remove(),e.handle().remove(),e.dialog().remove()):(t.html(e.editable().html()),n.dialogsInBody&&e.dialog().remove(),e.editor().remove(),t.show())},this.getTemplate=function(){return{button:e,iconButton:n,dialog:r}},this.addButtonInfo=function(t,e){s[t]=e},this.addDialogInfo=function(t,e){w[t]=e}};t.summernote=t.summernote||{},t.extend(t.summernote,g);var H=new B,W=new O;t.extend(t.summernote,{renderer:H,eventHandler:W,core:{agent:l,list:u,dom:f,range:p},pluginEvents:{},plugins:[]}),t.summernote.addPlugin=function(e){t.summernote.plugins.push(e),e.buttons&&t.each(e.buttons,function(t,e){H.addButtonInfo(t,e)}),e.dialogs&&t.each(e.dialogs,function(t,e){H.addDialogInfo(t,e)}),e.events&&t.each(e.events,function(e,n){t.summernote.pluginEvents[e]=n}),e.langs&&t.each(e.langs,function(e,n){t.summernote.lang[e]&&t.extend(t.summernote.lang[e],n)}),e.options&&t.extend(t.summernote.options,e.options)},t.fn.extend({summernote:function(){var e=t.type(u.head(arguments)),n="string"===e,i="object"===e,r=i?u.head(arguments):{};if(r=t.extend({},t.summernote.options,r),r.icons=t.extend({},t.summernote.options.icons,r.icons),r.langInfo=t.extend(!0,{},t.summernote.lang["en-US"],t.summernote.lang[r.lang]),!n&&i)for(var o=0,s=t.summernote.plugins.length;s>o;o++){var a=t.summernote.plugins[o];r.plugin[a.name]&&(t.summernote.plugins[o]=t.extend(!0,a,r.plugin[a.name]))}this.each(function(e,n){var i=t(n);if(!H.hasNoteEditor(i)){H.createLayout(i,r);var o=H.layoutInfoFromHolder(i);i.data("layoutInfo",o),W.attach(o,r),W.attachCustomEvent(o,r)}});var l=this.first();if(l.length){var c=H.layoutInfoFromHolder(l);if(n){var h=u.head(u.from(arguments)),d=u.tail(u.from(arguments)),f=[h,c.editable()].concat(d);return W.invoke.apply(W,f)}r.focus&&c.editable().focus()}return this},code:function(e){if(void 0===e){var n=this.first();if(!n.length)return;var i=H.layoutInfoFromHolder(n),r=i&&i.editable();if(r&&r.length){var o=W.invoke("codeview.isActivated",i);return W.invoke("codeview.sync",i),o?i.codable().val():i.editable().html()}return f.value(n)}return this.each(function(n,i){var r=H.layoutInfoFromHolder(t(i)),o=r&&r.editable();o&&o.html(e)}),this},destroy:function(){return this.each(function(e,n){var i=t(n);if(H.hasNoteEditor(i)){var r=H.layoutInfoFromHolder(i),o=r.editor().data("options");W.detach(r,o),H.removeLayout(i,r,o)}}),this}})});