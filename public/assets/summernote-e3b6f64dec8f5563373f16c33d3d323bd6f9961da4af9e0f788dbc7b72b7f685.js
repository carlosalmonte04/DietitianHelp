!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,i=Object(this),n=i.length>>>0,r=0;if(2===arguments.length)e=arguments[1];else{for(;r<n&&!(r in i);)r++;if(r>=n)throw new TypeError("Reduce of empty array with no initial value");e=i[r++]}for(;r<n;r++)r in i&&(e=t(e,i[r],r,i));return e}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(t){for(var e=Object(this),i=e.length>>>0,n=[],r=arguments.length>=2?arguments[1]:void 0,o=0;o<i;o++)if(o in e){var s=e[o];t.call(r,s,o,e)&&n.push(s)}return n}),Array.prototype.map||(Array.prototype.map=function(t,e){var i,n,r;if(null===this)throw new TypeError(" this is null or not defined");var o=Object(this),s=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(i=e),n=new Array(s),r=0;r<s;){var a,l;r in o&&(a=o[r],l=t.call(i,a,r,o),n[r]=l),r++}return n});var e,i="function"==typeof define&&define.amd,n=function(e){var i="Comic Sans MS"===e?"Courier New":"Comic Sans MS",n=t("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),r=n.css("fontFamily",i).width(),o=n.css("fontFamily",e+","+i).width();return n.remove(),r!==o},r=navigator.userAgent,o=/MSIE|Trident/i.test(r);if(o){var s=/MSIE (\d+[.]\d+)/.exec(r);s&&(e=parseFloat(s[1])),s=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(r),s&&(e=parseFloat(s[1]))}var a,l={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:o,isFF:/firefox/i.test(r),isWebkit:/webkit/i.test(r),isSafari:/safari/i.test(r),browserVersion:e,jqueryVersion:parseFloat(t.fn.jquery),isSupportAmd:i,hasCodeMirror:i?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:n,isW3CRangeSupport:!!document.createRange},c=function(){var e=function(t){return function(e){return t===e}},i=function(t,e){return t===e},n=function(t){return function(e,i){return e[t]===i[t]}},r=function(){return!0},o=function(){return!1},s=function(t){return function(){return!t.apply(t,arguments)}},a=function(t,e){return function(i){return t(i)&&e(i)}},l=function(t){return t},c=0,h=function(t){var e=++c+"";return t?t+e:e},u=function(e){var i=t(document);return{top:e.top+i.scrollTop(),left:e.left+i.scrollLeft(),width:e.right-e.left,height:e.bottom-e.top}},d=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e},p=function(t,e){return e=e||"",e+t.split(".").map(function(t){return t.substring(0,1).toUpperCase()+t.substring(1)}).join("")};return{eq:e,eq2:i,peq2:n,ok:r,fail:o,self:l,not:s,and:a,uniqueId:h,rect2bnd:u,invertObject:d,namespaceToCamel:p}}(),h=function(){var e=function(t){return t[0]},i=function(t){return t[t.length-1]},n=function(t){return t.slice(0,t.length-1)},r=function(t){return t.slice(1)},o=function(t,e){for(var i=0,n=t.length;i<n;i++){var r=t[i];if(e(r))return r}},s=function(t,e){for(var i=0,n=t.length;i<n;i++)if(!e(t[i]))return!1;return!0},a=function(e,i){return t.inArray(i,e)},l=function(t,e){return a(t,e)!==-1},h=function(t,e){return e=e||c.self,t.reduce(function(t,i){return t+e(i)},0)},u=function(t){for(var e=[],i=-1,n=t.length;++i<n;)e[i]=t[i];return e},d=function(t,n){if(!t.length)return[];var o=r(t);return o.reduce(function(t,e){var r=i(t);return n(i(r),e)?r[r.length]=e:t[t.length]=[e],t},[[e(t)]])},p=function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i]&&e.push(t[i]);return e},f=function(t){for(var e=[],i=0,n=t.length;i<n;i++)l(e,t[i])||e.push(t[i]);return e},g=function(t,e){var i=a(t,e);return i===-1?null:t[i+1]},m=function(t,e){var i=a(t,e);return i===-1?null:t[i-1]};return{head:e,last:i,initial:n,tail:r,prev:m,next:g,find:o,contains:l,all:s,sum:h,from:u,clusterBy:d,compact:p,unique:f}}(),u=String.fromCharCode(160),d="\ufeff",p=function(){var e=function(e){return e&&t(e).hasClass("note-editable")},i=function(e){return e&&t(e).hasClass("note-control-sizing")},n=function(e){var i;if(e.hasClass("note-air-editor")){var n=h.last(e.attr("id").split("-"));return i=function(e){return function(){return t(e+n)}},{editor:function(){return e},holder:function(){return e.data("holder")},editable:function(){return e},popover:i("#note-popover-"),handle:i("#note-handle-"),dialog:i("#note-dialog-")}}i=function(t,i){return i=i||e,function(){return i.find(t)}};var r=e.data("options"),o=r&&r.dialogsInBody?t(document.body):null;return{editor:function(){return e},holder:function(){return e.data("holder")},dropzone:i(".note-dropzone"),toolbar:i(".note-toolbar"),editable:i(".note-editable"),codable:i(".note-codable"),statusbar:i(".note-statusbar"),popover:i(".note-popover"),handle:i(".note-handle"),dialog:i(".note-dialog",o)}},r=function(e){var i=t(e).closest(".note-editor, .note-air-editor, .note-air-layout");if(!i.length)return null;var r;return r=i.is(".note-editor, .note-air-editor")?i:t("#note-editor-"+h.last(i.attr("id").split("-"))),n(r)},o=function(t){return t=t.toUpperCase(),function(e){return e&&e.nodeName.toUpperCase()===t}},s=function(t){return t&&3===t.nodeType},a=function(t){return t&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(t.nodeName.toUpperCase())},f=function(t){return!e(t)&&(t&&/^DIV|^P|^LI|^H[1-7]/.test(t.nodeName.toUpperCase()))},g=o("LI"),m=function(t){return f(t)&&!g(t)},v=o("TABLE"),y=function(t){return!(k(t)||x(t)||b(t)||f(t)||v(t)||_(t))},x=function(t){return t&&/^UL|^OL/.test(t.nodeName.toUpperCase())},b=o("HR"),w=function(t){return t&&/^TD|^TH/.test(t.nodeName.toUpperCase())},_=o("BLOCKQUOTE"),k=function(t){return w(t)||_(t)||e(t)},T=o("A"),S=function(t){return y(t)&&!!I(t,f)},C=function(t){return y(t)&&!I(t,f)},A=o("BODY"),M=function(t,e){return t.nextSibling===e||t.previousSibling===e},E=function(t,e){e=e||c.ok;var i=[];return t.previousSibling&&e(t.previousSibling)&&i.push(t.previousSibling),i.push(t),t.nextSibling&&e(t.nextSibling)&&i.push(t.nextSibling),i},P=l.isMSIE&&l.browserVersion<11?"&nbsp;":"<br>",D=function(t){return s(t)?t.nodeValue.length:t.childNodes.length},L=function(t){var e=D(t);return 0===e||(!s(t)&&1===e&&t.innerHTML===P||!(!h.all(t.childNodes,s)||""!==t.innerHTML))},N=function(t){a(t)||D(t)||(t.innerHTML=P)},I=function(t,i){for(;t;){if(i(t))return t;if(e(t))break;t=t.parentNode}return null},R=function(t,i){for(t=t.parentNode;t&&1===D(t);){if(i(t))return t;if(e(t))break;t=t.parentNode}return null},z=function(t,i){i=i||c.fail;var n=[];return I(t,function(t){return e(t)||n.push(t),i(t)}),n},F=function(t,e){var i=z(t);return h.last(i.filter(e))},O=function(e,i){for(var n=z(e),r=i;r;r=r.parentNode)if(t.inArray(r,n)>-1)return r;return null},B=function(t,e){e=e||c.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.previousSibling;return i},H=function(t,e){e=e||c.fail;for(var i=[];t&&!e(t);)i.push(t),t=t.nextSibling;return i},W=function(t,e){var i=[];return e=e||c.ok,function n(r){t!==r&&e(r)&&i.push(r);for(var o=0,s=r.childNodes.length;o<s;o++)n(r.childNodes[o])}(t),i},j=function(e,i){var n=e.parentNode,r=t("<"+i+">")[0];return n.insertBefore(r,e),r.appendChild(e),r},q=function(t,e){var i=e.nextSibling,n=e.parentNode;return i?n.insertBefore(t,i):n.appendChild(t),t},U=function(e,i){return t.each(i,function(t,i){e.appendChild(i)}),e},Y=function(t){return 0===t.offset},G=function(t){return t.offset===D(t.node)},X=function(t){return Y(t)||G(t)},$=function(t,e){for(;t&&t!==e;){if(0!==K(t))return!1;t=t.parentNode}return!0},V=function(t,e){for(;t&&t!==e;){if(K(t)!==D(t.parentNode)-1)return!1;t=t.parentNode}return!0},J=function(t,e){return Y(t)&&$(t.node,e)},Z=function(t,e){return G(t)&&V(t.node,e)},K=function(t){for(var e=0;t=t.previousSibling;)e+=1;return e},Q=function(t){return!!(t&&t.childNodes&&t.childNodes.length)},tt=function(t,i){var n,r;if(0===t.offset){if(e(t.node))return null;n=t.node.parentNode,r=K(t.node)}else Q(t.node)?(n=t.node.childNodes[t.offset-1],r=D(n)):(n=t.node,r=i?0:t.offset-1);return{node:n,offset:r}},et=function(t,i){var n,r;if(D(t.node)===t.offset){if(e(t.node))return null;n=t.node.parentNode,r=K(t.node)+1}else Q(t.node)?(n=t.node.childNodes[t.offset],r=0):(n=t.node,r=i?D(t.node):t.offset+1);return{node:n,offset:r}},it=function(t,e){return t.node===e.node&&t.offset===e.offset},nt=function(t){if(s(t.node)||!Q(t.node)||L(t.node))return!0;var e=t.node.childNodes[t.offset-1],i=t.node.childNodes[t.offset];return!(e&&!a(e)||i&&!a(i))},rt=function(t,e){for(;t;){if(e(t))return t;t=tt(t)}return null},ot=function(t,e){for(;t;){if(e(t))return t;t=et(t)}return null},st=function(t){if(!s(t.node))return!1;var e=t.node.nodeValue.charAt(t.offset-1);return e&&" "!==e&&e!==u},at=function(t,e,i,n){for(var r=t;r&&(i(r),!it(r,e));){var o=n&&t.node!==r.node&&e.node!==r.node;r=et(r,o)}},lt=function(t,e){var i=z(e,c.eq(t));return i.map(K).reverse()},ct=function(t,e){for(var i=t,n=0,r=e.length;n<r;n++)i=i.childNodes.length<=e[n]?i.childNodes[i.childNodes.length-1]:i.childNodes[e[n]];return i},ht=function(t,e){var i=e&&e.isSkipPaddingBlankHTML,n=e&&e.isNotSplitEdgePoint;if(X(t)&&(s(t.node)||n)){if(Y(t))return t.node;if(G(t))return t.node.nextSibling}if(s(t.node))return t.node.splitText(t.offset);var r=t.node.childNodes[t.offset],o=q(t.node.cloneNode(!1),t.node);return U(o,H(r)),i||(N(t.node),N(o)),o},ut=function(t,e,i){var n=z(e.node,c.eq(t));return n.length?1===n.length?ht(e,i):n.reduce(function(t,n){return t===e.node&&(t=ht(e,i)),ht({node:n,offset:t?p.position(t):D(n)},i)}):null},dt=function(t,e){var i,n,r=e?f:k,o=z(t.node,r),s=h.last(o)||t.node;r(s)?(i=o[o.length-2],n=s):(i=s,n=i.parentNode);var a=i&&ut(i,t,{isSkipPaddingBlankHTML:e,isNotSplitEdgePoint:e});return a||n!==t.node||(a=t.node.childNodes[t.offset]),{rightNode:a,container:n}},pt=function(t){return document.createElement(t)},ft=function(t){return document.createTextNode(t)},gt=function(t,e){if(t&&t.parentNode){if(t.removeNode)return t.removeNode(e);var i=t.parentNode;if(!e){var n,r,o=[];for(n=0,r=t.childNodes.length;n<r;n++)o.push(t.childNodes[n]);for(n=0,r=o.length;n<r;n++)i.insertBefore(o[n],t)}i.removeChild(t)}},mt=function(t,i){for(;t&&!e(t)&&i(t);){var n=t.parentNode;gt(t),t=n}},vt=function(t,e){if(t.nodeName.toUpperCase()===e.toUpperCase())return t;var i=pt(e);return t.style.cssText&&(i.style.cssText=t.style.cssText),U(i,h.from(t.childNodes)),q(i,t),gt(t),i},yt=o("TEXTAREA"),xt=function(t,e){var i=yt(t[0])?t.val():t.html();return e?i.replace(/[\n\r]/g,""):i},bt=function(e,i){var n=xt(e);if(i){var r=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;n=n.replace(r,function(t,e,i){i=i.toUpperCase();var n=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(i)&&!!e,r=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(i);return t+(n||r?"\n":"")}),n=t.trim(n)}return n};return{NBSP_CHAR:u,ZERO_WIDTH_NBSP_CHAR:d,blank:P,emptyPara:"<p>"+P+"</p>",makePredByNodeName:o,isEditable:e,isControlSizing:i,buildLayoutInfo:n,makeLayoutInfo:r,isText:s,isVoid:a,isPara:f,isPurePara:m,isInline:y,isBlock:c.not(y),isBodyInline:C,isBody:A,isParaInline:S,isList:x,isTable:v,isCell:w,isBlockquote:_,isBodyContainer:k,isAnchor:T,isDiv:o("DIV"),isLi:g,isBR:o("BR"),isSpan:o("SPAN"),isB:o("B"),isU:o("U"),isS:o("S"),isI:o("I"),isImg:o("IMG"),isTextarea:yt,isEmpty:L,isEmptyAnchor:c.and(T,L),isClosestSibling:M,withClosestSiblings:E,nodeLength:D,isLeftEdgePoint:Y,isRightEdgePoint:G,isEdgePoint:X,isLeftEdgeOf:$,isRightEdgeOf:V,isLeftEdgePointOf:J,isRightEdgePointOf:Z,prevPoint:tt,nextPoint:et,isSamePoint:it,isVisiblePoint:nt,prevPointUntil:rt,nextPointUntil:ot,isCharPoint:st,walkPoint:at,ancestor:I,singleChildAncestor:R,listAncestor:z,lastAncestor:F,listNext:H,listPrev:B,listDescendant:W,commonAncestor:O,wrap:j,insertAfter:q,appendChildNodes:U,position:K,hasChildren:Q,makeOffsetPath:lt,fromOffsetPath:ct,splitTree:ut,splitPoint:dt,create:pt,createText:ft,remove:gt,removeWhile:mt,replace:vt,html:bt,value:xt}}(),f=function(){var e=function(t,e){var i,n,r=t.parentElement(),o=document.body.createTextRange(),s=h.from(r.childNodes);for(i=0;i<s.length;i++)if(!p.isText(s[i])){if(o.moveToElementText(s[i]),o.compareEndPoints("StartToStart",t)>=0)break;n=s[i]}if(0!==i&&p.isText(s[i-1])){var a=document.body.createTextRange(),l=null;a.moveToElementText(n||r),a.collapse(!n),l=n?n.nextSibling:r.firstChild;var c=t.duplicate();c.setEndPoint("StartToStart",a);for(var u=c.text.replace(/[\r\n]/g,"").length;u>l.nodeValue.length&&l.nextSibling;)u-=l.nodeValue.length,l=l.nextSibling;l.nodeValue;e&&l.nextSibling&&p.isText(l.nextSibling)&&u===l.nodeValue.length&&(u-=l.nodeValue.length,l=l.nextSibling),r=l,i=u}return{cont:r,offset:i}},i=function(t){var e=function(t,i){var n,r;if(p.isText(t)){var o=p.listPrev(t,c.not(p.isText)),s=h.last(o).previousSibling;n=s||t.parentNode,i+=h.sum(h.tail(o),p.nodeLength),r=!s}else{if(n=t.childNodes[i]||t,p.isText(n))return e(n,0);i=0,r=!1}return{node:n,collapseToStart:r,offset:i}},i=document.body.createTextRange(),n=e(t.node,t.offset);return i.moveToElementText(n.node),i.collapse(n.collapseToStart),i.moveStart("character",n.offset),i},n=function(e,r,o,s){this.sc=e,this.so=r,this.ec=o,this.eo=s;var a=function(){if(l.isW3CRangeSupport){var t=document.createRange();return t.setStart(e,r),t.setEnd(o,s),t}var n=i({node:e,offset:r});return n.setEndPoint("EndToEnd",i({node:o,offset:s})),n};this.getPoints=function(){return{sc:e,so:r,ec:o,eo:s}},this.getStartPoint=function(){return{node:e,offset:r}},this.getEndPoint=function(){return{node:o,offset:s}},this.select=function(){var t=a();if(l.isW3CRangeSupport){var e=document.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(t)}else t.select();return this},this.normalize=function(){var t=function(t,e){if(p.isVisiblePoint(t)&&!p.isEdgePoint(t)||p.isVisiblePoint(t)&&p.isRightEdgePoint(t)&&!e||p.isVisiblePoint(t)&&p.isLeftEdgePoint(t)&&e||p.isVisiblePoint(t)&&p.isBlock(t.node)&&p.isEmpty(t.node))return t;var i=p.ancestor(t.node,p.isBlock);if((p.isLeftEdgePointOf(t,i)||p.isVoid(p.prevPoint(t).node))&&!e||(p.isRightEdgePointOf(t,i)||p.isVoid(p.nextPoint(t).node))&&e){if(p.isVisiblePoint(t))return t;e=!e}var n=e?p.nextPointUntil(p.nextPoint(t),p.isVisiblePoint):p.prevPointUntil(p.prevPoint(t),p.isVisiblePoint);return n||t},e=t(this.getEndPoint(),!1),i=this.isCollapsed()?e:t(this.getStartPoint(),!0);return new n(i.node,i.offset,e.node,e.offset)},this.nodes=function(t,e){t=t||c.ok;var i=e&&e.includeAncestor,n=e&&e.fullyContains,r=this.getStartPoint(),o=this.getEndPoint(),s=[],a=[];return p.walkPoint(r,o,function(e){if(!p.isEditable(e.node)){var r;n?(p.isLeftEdgePoint(e)&&a.push(e.node),p.isRightEdgePoint(e)&&h.contains(a,e.node)&&(r=e.node)):r=i?p.ancestor(e.node,t):e.node,r&&t(r)&&s.push(r)}},!0),h.unique(s)},this.commonAncestor=function(){return p.commonAncestor(e,o)},this.expand=function(t){var i=p.ancestor(e,t),a=p.ancestor(o,t);if(!i&&!a)return new n(e,r,o,s);var l=this.getPoints();return i&&(l.sc=i,l.so=0),a&&(l.ec=a,l.eo=p.nodeLength(a)),new n(l.sc,l.so,l.ec,l.eo)},this.collapse=function(t){return t?new n(e,r,e,r):new n(o,s,o,s)},this.splitText=function(){var t=e===o,i=this.getPoints();return p.isText(o)&&!p.isEdgePoint(this.getEndPoint())&&o.splitText(s),p.isText(e)&&!p.isEdgePoint(this.getStartPoint())&&(i.sc=e.splitText(r),i.so=0,t&&(i.ec=i.sc,i.eo=s-r)),new n(i.sc,i.so,i.ec,i.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var e=this.splitText(),i=e.nodes(null,{fullyContains:!0}),r=p.prevPointUntil(e.getStartPoint(),function(t){return!h.contains(i,t.node)}),o=[];return t.each(i,function(t,e){var i=e.parentNode;r.node!==i&&1===p.nodeLength(i)&&o.push(i),p.remove(e,!1)}),t.each(o,function(t,e){p.remove(e,!1)}),new n(r.node,r.offset,r.node,r.offset).normalize()};var u=function(t){return function(){var i=p.ancestor(e,t);return!!i&&i===p.ancestor(o,t)}};this.isOnEditable=u(p.isEditable),this.isOnList=u(p.isList),this.isOnAnchor=u(p.isAnchor),this.isOnCell=u(p.isCell),this.isLeftEdgeOf=function(t){if(!p.isLeftEdgePoint(this.getStartPoint()))return!1;var e=p.ancestor(this.sc,t);return e&&p.isLeftEdgeOf(this.sc,e)},this.isCollapsed=function(){return e===o&&r===s},this.wrapBodyInlineWithPara=function(){if(p.isBodyContainer(e)&&p.isEmpty(e))return e.innerHTML=p.emptyPara,new n(e.firstChild,0,e.firstChild,0);var t=this.normalize();if(p.isParaInline(e)||p.isPara(e))return t;var i;if(p.isInline(t.sc)){var r=p.listAncestor(t.sc,c.not(p.isInline));i=h.last(r),p.isInline(i)||(i=r[r.length-2]||t.sc.childNodes[t.so])}else i=t.sc.childNodes[t.so>0?t.so-1:0];var o=p.listPrev(i,p.isParaInline).reverse();if(o=o.concat(p.listNext(i.nextSibling,p.isParaInline)),o.length){var s=p.wrap(h.head(o),"p");p.appendChildNodes(s,h.tail(o))}return this.normalize()},this.insertNode=function(t){var e=this.wrapBodyInlineWithPara().deleteContents(),i=p.splitPoint(e.getStartPoint(),p.isInline(t));return i.rightNode?i.rightNode.parentNode.insertBefore(t,i.rightNode):i.container.appendChild(t),t},this.pasteHTML=function(e){var i=t("<div></div>").html(e)[0],n=h.from(i.childNodes),r=this.wrapBodyInlineWithPara().deleteContents();return n.reverse().map(function(t){return r.insertNode(t)}).reverse()},this.toString=function(){var t=a();return l.isW3CRangeSupport?t.toString():t.text},this.getWordRange=function(t){var e=this.getEndPoint();if(!p.isCharPoint(e))return this;var i=p.prevPointUntil(e,function(t){return!p.isCharPoint(t)});return t&&(e=p.nextPointUntil(e,function(t){return!p.isCharPoint(t)})),new n(i.node,i.offset,e.node,e.offset)},this.bookmark=function(t){return{s:{path:p.makeOffsetPath(t,e),offset:r},e:{path:p.makeOffsetPath(t,o),offset:s}}},this.paraBookmark=function(t){return{s:{path:h.tail(p.makeOffsetPath(h.head(t),e)),offset:r},e:{path:h.tail(p.makeOffsetPath(h.last(t),o)),offset:s}}},this.getClientRects=function(){var t=a();return t.getClientRects()}};return{create:function(t,i,r,o){if(arguments.length)2===arguments.length&&(r=t,o=i);else if(l.isW3CRangeSupport){var s=document.getSelection();if(!s||0===s.rangeCount)return null;if(p.isBody(s.anchorNode))return null;var a=s.getRangeAt(0);t=a.startContainer,i=a.startOffset,r=a.endContainer,o=a.endOffset}else{var c=document.selection.createRange(),h=c.duplicate();h.collapse(!1);var u=c;u.collapse(!0);var d=e(u,!0),f=e(h,!1);p.isText(d.node)&&p.isLeftEdgePoint(d)&&p.isTextNode(f.node)&&p.isRightEdgePoint(f)&&f.node.nextSibling===d.node&&(d=f),t=d.cont,i=d.offset,r=f.cont,o=f.offset}return new n(t,i,r,o)},createFromNode:function(t){var e=t,i=0,n=t,r=p.nodeLength(n);return p.isVoid(e)&&(i=p.listPrev(e).length-1,e=e.parentNode),p.isBR(n)?(r=p.listPrev(n).length-1,n=n.parentNode):p.isVoid(n)&&(r=p.listPrev(n).length,n=n.parentNode),this.create(e,i,n,r)},createFromNodeBefore:function(t){return this.createFromNode(t).collapse(!0)},createFromNodeAfter:function(t){return this.createFromNode(t).collapse()},createFromBookmark:function(t,e){var i=p.fromOffsetPath(t,e.s.path),r=e.s.offset,o=p.fromOffsetPath(t,e.e.path),s=e.e.offset;return new n(i,r,o,s)},createFromParaBookmark:function(t,e){var i=t.s.offset,r=t.e.offset,o=p.fromOffsetPath(h.head(e),t.s.path),s=p.fromOffsetPath(h.last(e),t.e.path);return new n(o,i,s,r)}}}(),g={version:"0.6.16",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,disableResizeImage:!1,shortcuts:!0,textareaAutoSync:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"fa fa-",icons:{font:{bold:"bold",italic:"italic",underline:"underline",clear:"eraser",height:"text-height",strikethrough:"strikethrough",superscript:"superscript",subscript:"subscript"},image:{image:"picture-o",floatLeft:"align-left",floatRight:"align-right",floatNone:"align-justify",shapeRounded:"square",shapeCircle:"circle-o",shapeThumbnail:"picture-o",shapeNone:"times",remove:"trash-o"},link:{link:"link",unlink:"unlink",edit:"edit"},table:{table:"table"},hr:{insert:"minus"},style:{style:"magic"},lists:{unordered:"list-ul",ordered:"list-ol"},options:{help:"question",fullscreen:"arrows-alt",codeview:"code"},paragraph:{paragraph:"align-left",outdent:"outdent",indent:"indent",left:"align-left",center:"align-center",right:"align-right",justify:"align-justify"},color:{recent:"font"},history:{undo:"undo",redo:"repeat"},misc:{check:"check"}},dialogsInBody:!1,codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],plugin:{},airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(t){return t.indexOf("@")!==-1&&t.indexOf(":")===-1&&(t="mailto:"+t),t},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}},m=function(){var e=function(e){return t.Deferred(function(i){t.extend(new FileReader,{onload:function(t){var e=t.target.result;i.resolve(e)},onerror:function(){i.reject(this)}}).readAsDataURL(e)}).promise()},i=function(e,i){return t.Deferred(function(n){var r=t("<img>");r.one("load",function(){r.off("error abort"),n.resolve(r)}).one("error abort",function(){r.off("load").detach(),n.reject(r)}).css({display:"none"}).appendTo(document.body).attr({src:e,"data-filename":i})}).promise()};return{readFileAsDataURL:e,createImage:i}}(),v=function(){var t={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(t){return h.contains([8,9,13,32],t)},isMove:function(t){return h.contains([37,38,39,40],t)},nameFromCode:c.invertObject(t),code:t}}(),y=function(t){var e=[],i=-1,n=t[0],r=function(){var e=f.create(),i={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:t.html(),bookmark:e?e.bookmark(n):i}},o=function(e){null!==e.contents&&t.html(e.contents),null!==e.bookmark&&f.createFromBookmark(n,e.bookmark).select()};this.undo=function(){t.html()!==e[i].contents&&this.recordUndo(),0<i&&(i--,o(e[i]))},this.redo=function(){e.length-1>i&&(i++,o(e[i]))},this.recordUndo=function(){i++,e.length>i&&(e=e.slice(0,i)),e.push(r())},this.recordUndo()},x=function(){var e=function(e,i){if(l.jqueryVersion<1.9){var n={};return t.each(i,function(t,i){n[i]=e.css(i)}),n}return e.css.call(e,i)};this.fromNode=function(t){var i=["font-family","font-size","text-align","list-style-type","line-height"],n=e(t,i)||{};return n["font-size"]=parseInt(n["font-size"],10),n},this.stylePara=function(e,i){t.each(e.nodes(p.isPara,{includeAncestor:!0}),function(e,n){t(n).css(i)})},this.styleNodes=function(e,i){e=e.splitText();var n=i&&i.nodeName||"SPAN",r=!(!i||!i.expandClosestSibling),o=!(!i||!i.onlyPartialContains);if(e.isCollapsed())return[e.insertNode(p.create(n))];var s=p.makePredByNodeName(n),a=e.nodes(p.isText,{fullyContains:!0}).map(function(t){return p.singleChildAncestor(t,s)||p.wrap(t,n)});if(r){if(o){var l=e.nodes();s=c.and(s,function(t){return h.contains(l,t)})}return a.map(function(e){var i=p.withClosestSiblings(e,s),n=h.head(i),r=h.tail(i);return t.each(r,function(t,e){p.appendChildNodes(n,e.childNodes),p.remove(e)}),h.head(i)})}return a},this.current=function(e){var i=t(p.isText(e.sc)?e.sc.parentNode:e.sc),n=this.fromNode(i);if(n["font-bold"]=document.queryCommandState("bold")?"bold":"normal",n["font-italic"]=document.queryCommandState("italic")?"italic":"normal",n["font-underline"]=document.queryCommandState("underline")?"underline":"normal",n["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",n["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",n["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",e.isOnList()){var r=["circle","disc","disc-leading-zero","square"],o=t.inArray(n["list-style-type"],r)>-1;n["list-style"]=o?"unordered":"ordered"}else n["list-style"]="none";var s=p.ancestor(e.sc,p.isPara);if(s&&s.style["line-height"])n["line-height"]=s.style.lineHeight;else{var a=parseInt(n["line-height"],10)/parseInt(n["font-size"],10);n["line-height"]=a.toFixed(1)}return n.anchor=e.isOnAnchor()&&p.ancestor(e.sc,p.isAnchor),n.ancestors=p.listAncestor(e.sc,p.isEditable),n.range=e,n}},b=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var e=this,i=f.create().wrapBodyInlineWithPara(),n=i.nodes(p.isPara,{includeAncestor:!0}),r=h.clusterBy(n,c.peq2("parentNode"));t.each(r,function(i,n){var r=h.head(n);p.isLi(r)?e.wrapList(n,r.parentNode.nodeName):t.each(n,function(e,i){t(i).css("marginLeft",function(t,e){return(parseInt(e,10)||0)+25})})}),i.select()},this.outdent=function(){var e=this,i=f.create().wrapBodyInlineWithPara(),n=i.nodes(p.isPara,{includeAncestor:!0}),r=h.clusterBy(n,c.peq2("parentNode"));t.each(r,function(i,n){var r=h.head(n);p.isLi(r)?e.releaseList([n]):t.each(n,function(e,i){t(i).css("marginLeft",function(t,e){return e=parseInt(e,10)||0,e>25?e-25:""})})}),i.select()},this.toggleList=function(e){var i=this,n=f.create().wrapBodyInlineWithPara(),r=n.nodes(p.isPara,{includeAncestor:!0}),o=n.paraBookmark(r),s=h.clusterBy(r,c.peq2("parentNode"));if(h.find(r,p.isPurePara)){var a=[];t.each(s,function(t,n){a=a.concat(i.wrapList(n,e))}),r=a}else{var l=n.nodes(p.isList,{includeAncestor:!0}).filter(function(i){return!t.nodeName(i,e)});l.length?t.each(l,function(t,i){p.replace(i,e)}):r=this.releaseList(s,!0)}f.createFromParaBookmark(o,r).select()},this.wrapList=function(t,e){var i=h.head(t),n=h.last(t),r=p.isList(i.previousSibling)&&i.previousSibling,o=p.isList(n.nextSibling)&&n.nextSibling,s=r||p.insertAfter(p.create(e||"UL"),n);return t=t.map(function(t){return p.isPurePara(t)?p.replace(t,"LI"):t}),p.appendChildNodes(s,t),o&&(p.appendChildNodes(s,h.from(o.childNodes)),p.remove(o)),t},this.releaseList=function(e,i){var n=[];return t.each(e,function(e,r){var o=h.head(r),s=h.last(r),a=i?p.lastAncestor(o,p.isList):o.parentNode,l=a.childNodes.length>1?p.splitTree(a,{node:s.parentNode,offset:p.position(s)+1},{isSkipPaddingBlankHTML:!0}):null,c=p.splitTree(a,{node:o.parentNode,offset:p.position(o)},{isSkipPaddingBlankHTML:!0});r=i?p.listDescendant(c,p.isLi):h.from(c.childNodes).filter(p.isLi),!i&&p.isList(a.parentNode)||(r=r.map(function(t){return p.replace(t,"P")})),t.each(h.from(r).reverse(),function(t,e){p.insertAfter(e,a)});var u=h.compact([a,c,l]);t.each(u,function(e,i){var n=[i].concat(p.listDescendant(i,p.isList));t.each(n.reverse(),function(t,e){p.nodeLength(e)||p.remove(e,!0)})}),n=n.concat(r)}),n}},w=function(){var e=new b;this.insertTab=function(t,e,i){var n=p.createText(new Array(i+1).join(p.NBSP_CHAR));e=e.deleteContents(),e.insertNode(n,!0),e=f.create(n,i),e.select()},this.insertParagraph=function(){var i=f.create();i=i.deleteContents(),i=i.wrapBodyInlineWithPara();var n,r=p.ancestor(i.sc,p.isPara);if(r){if(p.isEmpty(r)&&p.isLi(r))return void e.toggleList(r.parentNode.nodeName);n=p.splitTree(r,i.getStartPoint());var o=p.listDescendant(r,p.isEmptyAnchor);o=o.concat(p.listDescendant(n,p.isEmptyAnchor)),t.each(o,function(t,e){p.remove(e)})}else{var s=i.sc.childNodes[i.so];n=t(p.emptyPara)[0],s?i.sc.insertBefore(n,s):i.sc.appendChild(n)}f.create(n,0).normalize().select()}},_=function(){this.tab=function(t,e){var i=p.ancestor(t.commonAncestor(),p.isCell),n=p.ancestor(i,p.isTable),r=p.listDescendant(n,p.isCell),o=h[e?"prev":"next"](r,i);o&&f.create(o,0).select()},this.createTable=function(e,i){for(var n,r=[],o=0;o<e;o++)r.push("<td>"+p.blank+"</td>");n=r.join("");for(var s,a=[],l=0;l<i;l++)a.push("<tr>"+n+"</tr>");return s=a.join(""),t('<table class="table table-bordered">'+s+"</table>")[0]}},k="bogus",T=function(e){var i=this,n=new x,r=new _,o=new w,s=new b;this.createRange=function(t){return this.focus(t),f.create()},this.saveRange=function(t,e){this.focus(t),t.data("range",f.create()),e&&f.create().collapse().select()},this.saveNode=function(t){for(var e=[],i=0,n=t[0].childNodes.length;i<n;i++)e.push(t[0].childNodes[i]);t.data("childNodes",e)},this.restoreRange=function(t){var e=t.data("range");e&&(e.select(),
this.focus(t))},this.restoreNode=function(t){t.html("");for(var e=t.data("childNodes"),i=0,n=e.length;i<n;i++)t[0].appendChild(e[i])},this.currentStyle=function(t){var e=f.create(),i=e&&e.isOnEditable()?n.current(e.normalize()):{};return p.isImg(t)&&(i.image=t),i},this.styleFromNode=function(t){return n.fromNode(t)};var a=function(t){var i=p.makeLayoutInfo(t).holder();e.bindCustomEvent(i,t.data("callbacks"),"before.command")(t.html(),t)},c=function(t){var i=p.makeLayoutInfo(t).holder();e.bindCustomEvent(i,t.data("callbacks"),"change")(t.html(),t)};this.undo=function(t){a(t),t.data("NoteHistory").undo(),c(t)},this.redo=function(t){a(t),t.data("NoteHistory").redo(),c(t)};for(var u=this.beforeCommand=function(t){a(t),i.focus(t)},d=this.afterCommand=function(t,e){t.data("NoteHistory").recordUndo(),e||c(t)},g=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],v=0,y=g.length;v<y;v++)this[g[v]]=function(t){return function(e,i){u(e),document.execCommand(t,!1,i),d(e,!0)}}(g[v]);this.tab=function(t,e){var i=this.createRange(t);i.isCollapsed()&&i.isOnCell()?r.tab(i):(u(t),o.insertTab(t,i,e.tabsize),d(t))},this.untab=function(t){var e=this.createRange(t);e.isCollapsed()&&e.isOnCell()&&r.tab(e,!0)},this.insertParagraph=function(t){u(t),o.insertParagraph(t),d(t)},this.insertOrderedList=function(t){u(t),s.insertOrderedList(t),d(t)},this.insertUnorderedList=function(t){u(t),s.insertUnorderedList(t),d(t)},this.indent=function(t){u(t),s.indent(t),d(t)},this.outdent=function(t){u(t),s.outdent(t),d(t)},this.insertImage=function(t,i,n){m.createImage(i,n).then(function(e){u(t),e.css({display:"",width:Math.min(t.width(),e.width())}),f.create().insertNode(e[0]),f.createFromNodeAfter(e[0]).select(),d(t)}).fail(function(){var i=p.makeLayoutInfo(t).holder();e.bindCustomEvent(i,t.data("callbacks"),"image.upload.error")()})},this.insertNode=function(t,e){u(t),f.create().insertNode(e),f.createFromNodeAfter(e).select(),d(t)},this.insertText=function(t,e){u(t);var i=f.create().insertNode(p.createText(e));f.create(i,p.nodeLength(i)).select(),d(t)},this.pasteHTML=function(t,e){u(t);var i=f.create().pasteHTML(e);f.createFromNodeAfter(h.last(i)).select(),d(t)},this.formatBlock=function(t,e){u(t),e=l.isMSIE?"<"+e+">":e,document.execCommand("FormatBlock",!1,e),d(t)},this.formatPara=function(t){u(t),this.formatBlock(t,"P"),d(t)};for(var v=1;v<=6;v++)this["formatH"+v]=function(t){return function(e){this.formatBlock(e,"H"+t)}}(v);this.fontSize=function(e,i){var r=f.create();if(r.isCollapsed()){var o=n.styleNodes(r),s=h.head(o);t(o).css({"font-size":i+"px"}),s&&!p.nodeLength(s)&&(s.innerHTML=p.ZERO_WIDTH_NBSP_CHAR,f.createFromNodeAfter(s.firstChild).select(),e.data(k,s))}else u(e),t(n.styleNodes(r)).css({"font-size":i+"px"}),d(e)},this.insertHorizontalRule=function(e){u(e);var i=f.create(),n=i.insertNode(t("<HR/>")[0]);n.nextSibling&&f.create(n.nextSibling,0).normalize().select(),d(e)},this.removeBogus=function(t){var e=t.data(k);if(e){var i=h.find(h.from(e.childNodes),p.isText),n=i.nodeValue.indexOf(p.ZERO_WIDTH_NBSP_CHAR);n!==-1&&i.deleteData(n,1),p.isEmpty(e)&&p.remove(e),t.removeData(k)}},this.lineHeight=function(t,e){u(t),n.stylePara(f.create(),{lineHeight:e}),d(t)},this.unlink=function(t){var e=this.createRange(t);if(e.isOnAnchor()){var i=p.ancestor(e.sc,p.isAnchor);e=f.createFromNode(i),e.select(),u(t),document.execCommand("unlink"),d(t)}},this.createLink=function(e,i,r){var o=i.url,s=i.text,a=i.isNewWindow,l=i.range||this.createRange(e),c=l.toString()!==s;r=r||p.makeLayoutInfo(e).editor().data("options"),u(e),r.onCreateLink&&(o=r.onCreateLink(o));var g=[];if(c){var m=l.insertNode(t("<A>"+s+"</A>")[0]);g.push(m)}else g=n.styleNodes(l,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});t.each(g,function(e,i){t(i).attr("href",o),a?t(i).attr("target","_blank"):t(i).removeAttr("target")});var v=f.createFromNodeBefore(h.head(g)),y=v.getStartPoint(),x=f.createFromNodeAfter(h.last(g)),b=x.getEndPoint();f.create(y.node,y.offset,b.node,b.offset).select(),d(e)},this.getLinkInfo=function(e){this.focus(e);var i=f.create().expand(p.isAnchor),n=t(h.head(i.nodes(p.isAnchor)));return{range:i,text:i.toString(),isNewWindow:!!n.length&&"_blank"===n.attr("target"),url:n.length?n.attr("href"):""}},this.color=function(t,e){var i=JSON.parse(e),n=i.foreColor,r=i.backColor;u(t),n&&document.execCommand("foreColor",!1,n),r&&document.execCommand("backColor",!1,r),d(t)},this.insertTable=function(t,e){var i=e.split("x");u(t);var n=f.create().deleteContents();n.insertNode(r.createTable(i[0],i[1])),d(t)},this.floatMe=function(t,e,i){u(t),i.removeClass("pull-left pull-right"),e&&"none"!==e&&i.addClass("pull-"+e),i.css("float",e),d(t)},this.imageShape=function(t,e,i){u(t),i.removeClass("img-rounded img-circle img-thumbnail"),e&&i.addClass(e),d(t)},this.resize=function(t,e,i){u(t),i.css({width:100*e+"%",height:""}),d(t)},this.resizeTo=function(t,e,i){var n;if(i){var r=t.y/t.x,o=e.data("ratio");n={width:o>r?t.x:t.y/o,height:o>r?t.x*o:t.y}}else n={width:t.x,height:t.y};e.css(n)},this.removeMedia=function(i,n,r){u(i),r.detach(),e.bindCustomEvent(t(),i.data("callbacks"),"media.delete")(r,i),d(i)},this.focus=function(t){t.focus(),l.isFF&&!f.create().isOnEditable()&&f.createFromNode(t[0]).normalize().collapse().select()},this.isEmpty=function(t){return p.isEmpty(t[0])||p.emptyPara===t.html()}},S=function(){this.update=function(e,i){var n=function(e,i){e.find(".dropdown-menu li a").each(function(){var e=t(this).data("value")+""==i+"";this.className=e?"checked":""})},r=function(t,i){var n=e.find(t);n.toggleClass("active",i())};if(i.image){var o=t(i.image);r('button[data-event="imageShape"][data-value="img-rounded"]',function(){return o.hasClass("img-rounded")}),r('button[data-event="imageShape"][data-value="img-circle"]',function(){return o.hasClass("img-circle")}),r('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return o.hasClass("img-thumbnail")}),r('button[data-event="imageShape"]:not([data-value])',function(){return!o.is(".img-rounded, .img-circle, .img-thumbnail")});var s=o.css("float");r('button[data-event="floatMe"][data-value="left"]',function(){return"left"===s}),r('button[data-event="floatMe"][data-value="right"]',function(){return"right"===s}),r('button[data-event="floatMe"][data-value="none"]',function(){return"left"!==s&&"right"!==s});var a=o.attr("style");return r('button[data-event="resize"][data-value="1"]',function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(a)}),r('button[data-event="resize"][data-value="0.5"]',function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(a)}),void r('button[data-event="resize"][data-value="0.25"]',function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(a)})}var c=e.find(".note-fontname");if(c.length){var h=i["font-family"];if(h){for(var u=h.split(","),d=0,p=u.length;d<p&&(h=u[d].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!l.isFontInstalled(h));d++);c.find(".note-current-fontname").text(h),n(c,h)}}var f=e.find(".note-fontsize");f.find(".note-current-fontsize").text(i["font-size"]),n(f,parseFloat(i["font-size"]));var g=e.find(".note-height");n(g,parseFloat(i["line-height"])),r('button[data-event="bold"]',function(){return"bold"===i["font-bold"]}),r('button[data-event="italic"]',function(){return"italic"===i["font-italic"]}),r('button[data-event="underline"]',function(){return"underline"===i["font-underline"]}),r('button[data-event="strikethrough"]',function(){return"strikethrough"===i["font-strikethrough"]}),r('button[data-event="superscript"]',function(){return"superscript"===i["font-superscript"]}),r('button[data-event="subscript"]',function(){return"subscript"===i["font-subscript"]}),r('button[data-event="justifyLeft"]',function(){return"left"===i["text-align"]||"start"===i["text-align"]}),r('button[data-event="justifyCenter"]',function(){return"center"===i["text-align"]}),r('button[data-event="justifyRight"]',function(){return"right"===i["text-align"]}),r('button[data-event="justifyFull"]',function(){return"justify"===i["text-align"]}),r('button[data-event="insertUnorderedList"]',function(){return"unordered"===i["list-style"]}),r('button[data-event="insertOrderedList"]',function(){return"ordered"===i["list-style"]})},this.updateRecentColor=function(e,i,n){var r=t(e).closest(".note-color"),o=r.find(".note-recent-color"),s=JSON.parse(o.attr("data-value"));s[i]=n,o.attr("data-value",JSON.stringify(s));var a="backColor"===i?"background-color":"color";o.find("i").css(a,n)}},C=function(){var t=new S;this.update=function(e,i){t.update(e,i)},this.updateRecentColor=function(e,i,n){t.updateRecentColor(e,i,n)},this.activate=function(t){t.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(t){t.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(t,e){var i=t.find('button[data-event="fullscreen"]');i.toggleClass("active",e)},this.updateCodeview=function(t,e){var i=t.find('button[data-event="codeview"]');i.toggleClass("active",e),e?this.deactivate(t):this.activate(t)},this.get=function(t,e){var i=p.makeLayoutInfo(t).toolbar();return i.find("[data-name="+e+"]")},this.setButtonState=function(t,e,i){i=i!==!1;var n=this.get(t,e);n.toggleClass("active",i)}},A=24,M=function(){var e=t(document);this.attach=function(t,e){e.disableResizeEditor||t.statusbar().on("mousedown",i)};var i=function(t){t.preventDefault(),t.stopPropagation();var i=p.makeLayoutInfo(t.target).editable(),n=i.offset().top-e.scrollTop(),r=p.makeLayoutInfo(t.currentTarget||t.target),o=r.editor().data("options");e.on("mousemove",function(t){var e=t.clientY-(n+A);e=o.minHeight>0?Math.max(e,o.minHeight):e,e=o.maxHeight>0?Math.min(e,o.maxHeight):e,i.height(e)}).one("mouseup",function(){e.off("mousemove")})}},E=function(){var e=new S,i=function(e,i){var n=i&&i.isAirMode,r=i&&i.isLeftTop,o=t(e),s=n?o.offset():o.position(),a=r?0:o.outerHeight(!0);return{left:s.left,top:s.top+a}},n=function(t,e){t.css({display:"block",left:e.left,top:e.top})},r=20;this.update=function(o,s,a){e.update(o,s);var l=o.find(".note-link-popover");if(s.anchor){var u=l.find("a"),d=t(s.anchor).attr("href"),p=t(s.anchor).attr("target");u.attr("href",d).html(d),p?u.attr("target","_blank"):u.removeAttr("target"),n(l,i(s.anchor,{isAirMode:a}))}else l.hide();var f=o.find(".note-image-popover");s.image?n(f,i(s.image,{isAirMode:a,isLeftTop:!0})):f.hide();var g=o.find(".note-air-popover");if(a&&s.range&&!s.range.isCollapsed()){var m=h.last(s.range.getClientRects());if(m){var v=c.rect2bnd(m);n(g,{left:Math.max(v.left+v.width/2-r,0),top:v.top+v.height})}}else g.hide()},this.updateRecentColor=function(t,e,i){t.updateRecentColor(t,e,i)},this.hide=function(t){t.children().hide()}},P=function(e){var i=t(document),n=function(n){if(p.isControlSizing(n.target)){n.preventDefault(),n.stopPropagation();var r=p.makeLayoutInfo(n.target),o=r.handle(),s=r.popover(),a=r.editable(),l=r.editor(),c=o.find(".note-control-selection").data("target"),h=t(c),u=h.offset(),d=i.scrollTop(),f=l.data("options").airMode;i.on("mousemove",function(t){e.invoke("editor.resizeTo",{x:t.clientX-u.left,y:t.clientY-(u.top-d)},h,!t.shiftKey),e.invoke("handle.update",o,{image:c},f),e.invoke("popover.update",s,{image:c},f)}).one("mouseup",function(){i.off("mousemove"),e.invoke("editor.afterCommand",a)}),h.data("ratio")||h.data("ratio",h.height()/h.width())}};this.attach=function(t){t.handle().on("mousedown",n)},this.update=function(e,i,n){var r=e.find(".note-control-selection");if(i.image){var o=t(i.image),s=n?o.offset():o.position(),a={w:o.outerWidth(!0),h:o.outerHeight(!0)};r.css({display:"block",left:s.left,top:s.top,width:a.w,height:a.h}).data("target",i.image);var l=a.w+"x"+a.h;r.find(".note-control-selection-info").text(l)}else r.hide()},this.hide=function(t){t.children().hide()}},D=function(e){var i=t(window),n=t("html, body");this.toggle=function(t){var r=t.editor(),o=t.toolbar(),s=t.editable(),a=t.codable(),l=function(t){s.css("height",t.h),a.css("height",t.h),a.data("cmeditor")&&a.data("cmeditor").setsize(null,t.h)};r.toggleClass("fullscreen");var c=r.hasClass("fullscreen");c?(s.data("orgheight",s.css("height")),i.on("resize",function(){l({h:i.height()-o.outerHeight()})}).trigger("resize"),n.css("overflow","hidden")):(i.off("resize"),l({h:s.data("orgheight")}),n.css("overflow","visible")),e.invoke("toolbar.updateFullscreen",o,c)}};l.hasCodeMirror&&(l.isSupportAmd?require(["CodeMirror"],function(t){a=t}):a=window.CodeMirror);var L=function(t){this.sync=function(e){var i=t.invoke("codeview.isActivated",e);i&&l.hasCodeMirror&&e.codable().data("cmEditor").save()},this.isActivated=function(t){var e=t.editor();return e.hasClass("codeview")},this.toggle=function(t){this.isActivated(t)?this.deactivate(t):this.activate(t)},this.activate=function(e){var i=e.editor(),n=e.toolbar(),r=e.editable(),o=e.codable(),s=e.popover(),c=e.handle(),h=i.data("options");if(o.val(p.html(r,h.prettifyHtml)),o.height(r.height()),t.invoke("toolbar.updateCodeview",n,!0),t.invoke("popover.hide",s),t.invoke("handle.hide",c),i.addClass("codeview"),o.focus(),l.hasCodeMirror){var u=a.fromTextArea(o[0],h.codemirror);if(h.codemirror.tern){var d=new a.TernServer(h.codemirror.tern);u.ternServer=d,u.on("cursorActivity",function(t){d.updateArgHints(t)})}u.setSize(null,r.outerHeight()),o.data("cmEditor",u)}},this.deactivate=function(e){var i=e.holder(),n=e.editor(),r=e.toolbar(),o=e.editable(),s=e.codable(),a=n.data("options");if(l.hasCodeMirror){var c=s.data("cmEditor");s.val(c.getValue()),c.toTextArea()}var h=p.value(s,a.prettifyHtml)||p.emptyPara,u=o.html()!==h;o.html(h),o.height(a.height?s.height():"auto"),n.removeClass("codeview"),u&&t.bindCustomEvent(i,o.data("callbacks"),"change")(o.html(),o),o.focus(),t.invoke("toolbar.updateCodeview",r,!1)}},N=function(e){var i=t(document);this.attach=function(t,e){e.airMode||e.disableDragAndDrop?i.on("drop",function(t){t.preventDefault()}):this.attachDragAndDropEvent(t,e)},this.attachDragAndDropEvent=function(n,r){var o=t(),s=n.editor(),a=n.dropzone(),l=a.find(".note-dropzone-message");i.on("dragenter",function(t){var i=e.invoke("codeview.isActivated",n),c=s.width()>0&&s.height()>0;i||o.length||!c||(s.addClass("dragover"),a.width(s.width()),a.height(s.height()),l.text(r.langInfo.image.dragImageHere)),o=o.add(t.target)}).on("dragleave",function(t){o=o.not(t.target),o.length||s.removeClass("dragover")}).on("drop",function(){o=t(),s.removeClass("dragover")}),a.on("dragenter",function(){a.addClass("hover"),l.text(r.langInfo.image.dropImage)}).on("dragleave",function(){a.removeClass("hover"),l.text(r.langInfo.image.dragImageHere)}),a.on("drop",function(i){var n=i.originalEvent.dataTransfer,r=p.makeLayoutInfo(i.currentTarget||i.target);if(n&&n.files&&n.files.length)i.preventDefault(),r.editable().focus(),e.insertImages(r,n.files);else for(var o=function(){r.holder().summernote("insertNode",this)},s=0,a=n.types.length;s<a;s++){var l=n.types[s],c=n.getData(l);l.toLowerCase().indexOf("text")>-1?r.holder().summernote("pasteHTML",c):t(c).each(o)}}).on("dragover",!1)}},I=function(e){var i;this.attach=function(o){l.isMSIE&&l.browserVersion>10||l.isFF?(i=t("<div />").attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),o.editable().on("keydown",function(t){t.ctrlKey&&t.keyCode===v.code.V&&(e.invoke("saveRange",o.editable()),i.focus(),setTimeout(function(){n(o)},0))}),o.editable().before(i)):o.editable().on("paste",r)};var n=function(n){var r=n.editable(),o=i[0].firstChild;if(p.isImg(o)){for(var s=o.src,a=atob(s.split(",")[1]),l=new Uint8Array(a.length),c=0;c<a.length;c++)l[c]=a.charCodeAt(c);var h=new Blob([l],{type:"image/png"});h.name="clipboard.png",e.invoke("restoreRange",r),e.invoke("focus",r),e.insertImages(n,[h])}else{var u=t("<div />").html(i.html()).html();e.invoke("restoreRange",r),e.invoke("focus",r),u&&e.invoke("pasteHTML",r,u)}i.empty()},r=function(t){var i=t.originalEvent.clipboardData,n=p.makeLayoutInfo(t.currentTarget||t.target),r=n.editable();if(i&&i.items&&i.items.length){var o=h.head(i.items);"file"===o.kind&&o.type.indexOf("image/")!==-1&&e.insertImages(n,[o.getAsFile()]),e.invoke("editor.afterCommand",r)}}},R=function(e){var i=function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},n=function(t,e){t.on("keypress",function(t){t.keyCode===v.code.ENTER&&e.trigger("click")})};this.showLinkDialog=function(e,r,o){return t.Deferred(function(t){var e=r.find(".note-link-dialog"),s=e.find(".note-link-text"),a=e.find(".note-link-url"),l=e.find(".note-link-btn"),c=e.find("input[type=checkbox]");e.one("shown.bs.modal",function(){s.val(o.text),s.on("input",function(){i(l,s.val()&&a.val()),o.text=s.val()}),o.url||(o.url=o.text||"http://",i(l,o.text)),a.on("input",function(){i(l,s.val()&&a.val()),o.text||s.val(a.val())}).val(o.url).trigger("focus").trigger("select"),n(a,l),n(s,l),c.prop("checked",o.isNewWindow),l.one("click",function(i){i.preventDefault(),t.resolve({range:o.range,url:a.val(),text:s.val(),isNewWindow:c.is(":checked")}),e.modal("hide")})}).one("hidden.bs.modal",function(){s.off("input keypress"),a.off("input keypress"),l.off("click"),"pending"===t.state()&&t.reject()}).modal("show")}).promise()},this.show=function(t){var i=t.editor(),n=t.dialog(),r=t.editable(),o=t.popover(),s=e.invoke("editor.getLinkInfo",r),a=i.data("options");e.invoke("editor.saveRange",r),this.showLinkDialog(r,n,s).then(function(t){e.invoke("editor.restoreRange",r),e.invoke("editor.createLink",r,t,a),e.invoke("popover.hide",o)}).fail(function(){e.invoke("editor.restoreRange",r)})}},z=function(e){var i=function(t,e){t.toggleClass("disabled",!e),t.attr("disabled",!e)},n=function(t,e){t.on("keypress",function(t){t.keyCode===v.code.ENTER&&e.trigger("click")})};this.show=function(t){var i=t.dialog(),n=t.editable();e.invoke("editor.saveRange",n),this.showImageDialog(n,i).then(function(i){e.invoke("editor.restoreRange",n),"string"==typeof i?e.invoke("editor.insertImage",n,i):e.insertImages(t,i)}).fail(function(){e.invoke("editor.restoreRange",n)})},this.showImageDialog=function(e,r){return t.Deferred(function(t){var e=r.find(".note-image-dialog"),o=r.find(".note-image-input"),s=r.find(".note-image-url"),a=r.find(".note-image-btn");e.one("shown.bs.modal",function(){o.replaceWith(o.clone().on("change",function(){t.resolve(this.files||this.value),e.modal("hide")}).val("")),a.click(function(i){i.preventDefault(),t.resolve(s.val()),e.modal("hide")}),s.on("keyup paste",function(t){var e;e="paste"===t.type?t.originalEvent.clipboardData.getData("text"):s.val(),i(a,e)}).val("").trigger("focus"),n(s,a)}).one("hidden.bs.modal",function(){o.off("change"),s.off("keyup paste keypress"),a.off("click"),"pending"===t.state()&&t.reject()}).modal("show")})}},F=function(e){this.showHelpDialog=function(e,i){return t.Deferred(function(t){var e=i.find(".note-help-dialog");e.one("hidden.bs.modal",function(){t.resolve()}).modal("show")}).promise()},this.show=function(t){var i=t.dialog(),n=t.editable();e.invoke("editor.saveRange",n,!0),this.showHelpDialog(n,i).then(function(){e.invoke("editor.restoreRange",n)})}},O=function(){var e=this,i=this.modules={editor:new T(this),toolbar:new C(this),statusbar:new M(this),popover:new E(this),handle:new P(this),fullscreen:new D(this),codeview:new L(this),dragAndDrop:new N(this),clipboard:new I(this),linkDialog:new R(this),imageDialog:new z(this),helpDialog:new F(this)};this.invoke=function(){var t=h.head(h.from(arguments)),e=h.tail(h.from(arguments)),i=t.split("."),n=i.length>1,r=n&&h.head(i),o=n?h.last(i):h.head(i),s=this.getModule(r),a=s[o];return a&&a.apply(s,e)},this.getModule=function(t){return this.modules[t]||this.modules.editor};var n=this.bindCustomEvent=function(t,e,i){return function(){var n=e[c.namespaceToCamel(i,"on")];return n&&n.apply(t[0],arguments),t.trigger("summernote."+i,arguments)}};this.insertImages=function(e,r){var o=e.editor(),s=e.editable(),a=e.holder(),l=s.data("callbacks"),c=o.data("options");l.onImageUpload?n(a,l,"image.upload")(r):t.each(r,function(t,e){var r=e.name;c.maximumImageFileSize&&c.maximumImageFileSize<e.size?n(a,l,"image.upload.error")(c.langInfo.image.maximumFileSizeError):m.readFileAsDataURL(e).then(function(t){i.editor.insertImage(s,t,r)}).fail(function(){n(a,l,"image.upload.error")(c.langInfo.image.maximumFileSizeError)})})};var r={showLinkDialog:function(t){i.linkDialog.show(t)},showImageDialog:function(t){i.imageDialog.show(t)},showHelpDialog:function(t){i.helpDialog.show(t)},fullscreen:function(t){i.fullscreen.toggle(t)},codeview:function(t){i.codeview.toggle(t)}},o=function(t){p.isImg(t.target)&&t.preventDefault()},s=function(t){var e=p.makeLayoutInfo(t.currentTarget||t.target);i.editor.removeBogus(e.editable()),a(t)};this.updateStyleInfo=function(t,e){if(t){var n=e.editor().data("options").airMode;n||i.toolbar.update(e.toolbar(),t),i.popover.update(e.popover(),t,n),i.handle.update(e.handle(),t,n)}};var a=function(t){var n=t.target;setTimeout(function(){var t=p.makeLayoutInfo(n),r=i.editor.currentStyle(n);e.updateStyleInfo(r,t)},0)},u=function(t){var e=p.makeLayoutInfo(t.currentTarget||t.target);i.popover.hide(e.popover()),i.handle.hide(e.handle())},d=function(e){var i=t(e.target).closest("[data-event]");i.length&&e.preventDefault()},f=function(e){var n=t(e.target).closest("[data-event]");if(n.length){var o,s=n.attr("data-event"),l=n.attr("data-value"),c=n.attr("data-hide"),u=p.makeLayoutInfo(e.target);if(t.inArray(s,["resize","floatMe","removeMedia","imageShape"])!==-1){var d=u.handle().find(".note-control-selection");o=t(d.data("target"))}if(c&&n.parents(".popover").hide(),t.isFunction(t.summernote.pluginEvents[s]))t.summernote.pluginEvents[s](e,i.editor,u,l);else if(i.editor[s]){var f=u.editable();f.focus(),i.editor[s](f,l,o),e.preventDefault()}else r[s]&&(r[s].call(this,u),e.preventDefault());if(t.inArray(s,["backColor","foreColor"])!==-1){var g=u.editor().data("options",g),m=g.airMode?i.popover:i.toolbar;m.updateRecentColor(h.head(n),s,l)}a(e)}},g=18,x=function(e,i){var n,r=t(e.target.parentNode),o=r.next(),s=r.find(".note-dimension-picker-mousecatcher"),a=r.find(".note-dimension-picker-highlighted"),l=r.find(".note-dimension-picker-unhighlighted");if(void 0===e.offsetX){var c=t(e.target).offset();n={x:e.pageX-c.left,y:e.pageY-c.top}}else n={x:e.offsetX,y:e.offsetY};var h={c:Math.ceil(n.x/g)||1,r:Math.ceil(n.y/g)||1};a.css({width:h.c+"em",height:h.r+"em"}),s.attr("data-value",h.c+"x"+h.r),3<h.c&&h.c<i.insertTableMaxSize.col&&l.css({width:h.c+1+"em"}),3<h.r&&h.r<i.insertTableMaxSize.row&&l.css({height:h.r+1+"em"}),o.html(h.c+" x "+h.r)};this.bindKeyMap=function(e,n){var o=e.editor(),s=e.editable();s.on("keydown",function(a){var l=[];a.metaKey&&l.push("CMD"),a.ctrlKey&&!a.altKey&&l.push("CTRL"),a.shiftKey&&l.push("SHIFT");var c=v.nameFromCode[a.keyCode];c&&l.push(c);var h,u=l.join("+"),d=n[u];if(d){if(h=t.summernote.pluginEvents[u],t.isFunction(h)&&h(a,i.editor,e))return!1;h=t.summernote.pluginEvents[d],t.isFunction(h)?h(a,i.editor,e):i.editor[d]?(i.editor[d](s,o.data("options")),a.preventDefault()):r[d]&&(r[d].call(this,e),a.preventDefault())}else v.isEdit(a.keyCode)&&i.editor.afterCommand(s)})},this.attach=function(t,e){e.shortcuts&&this.bindKeyMap(t,e.keyMap[l.isMac?"mac":"pc"]),t.editable().on("mousedown",o),t.editable().on("keyup mouseup",s),t.editable().on("scroll",u),i.clipboard.attach(t,e),i.handle.attach(t,e),t.popover().on("click",f),t.popover().on("mousedown",d),i.dragAndDrop.attach(t,e),e.airMode||(t.toolbar().on("click",f),t.toolbar().on("mousedown",d),i.statusbar.attach(t,e));var n=e.airMode?t.popover():t.toolbar(),r=n.find(".note-dimension-picker-mousecatcher");r.css({width:e.insertTableMaxSize.col+"em",height:e.insertTableMaxSize.row+"em"}).on("mousemove",function(t){x(t,e)}),t.editor().data("options",e),l.isMSIE||setTimeout(function(){document.execCommand("styleWithCSS",0,e.styleWithSpan)},0);var a=new y(t.editable());t.editable().data("NoteHistory",a),t.editable().data("callbacks",{onInit:e.onInit,onFocus:e.onFocus,onBlur:e.onBlur,onKeydown:e.onKeydown,onKeyup:e.onKeyup,onMousedown:e.onMousedown,onEnter:e.onEnter,onPaste:e.onPaste,onBeforeCommand:e.onBeforeCommand,onChange:e.onChange,onImageUpload:e.onImageUpload,onImageUploadError:e.onImageUploadError,onMediaDelete:e.onMediaDelete,onToolbarClick:e.onToolbarClick});var c=i.editor.styleFromNode(t.editable());this.updateStyleInfo(c,t)},this.attachCustomEvent=function(e,i){var r=e.holder(),o=e.editable(),s=o.data("callbacks");o.focus(n(r,s,"focus")),o.blur(n(r,s,"blur")),o.keydown(function(t){t.keyCode===v.code.ENTER&&n(r,s,"enter").call(this,t),n(r,s,"keydown").call(this,t)}),o.keyup(n(r,s,"keyup")),o.on("mousedown",n(r,s,"mousedown")),o.on("mouseup",n(r,s,"mouseup")),o.on("scroll",n(r,s,"scroll")),o.on("paste",n(r,s,"paste"));var a=l.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";o.on(a,function(){n(r,s,"change")(o.html(),o)}),i.airMode||(e.toolbar().click(n(r,s,"toolbar.click")),e.popover().click(n(r,s,"popover.click"))),p.isTextarea(h.head(r))&&r.closest("form").submit(function(t){e.holder().val(e.holder().code()),n(r,s,"submit").call(this,t,r.code())}),p.isTextarea(h.head(r))&&i.textareaAutoSync&&r.on("summernote.change",function(){e.holder().val(e.holder().code())}),n(r,s,"init")(e);for(var c=0,u=t.summernote.plugins.length;c<u;c++)t.isFunction(t.summernote.plugins[c].init)&&t.summernote.plugins[c].init(e)},this.detach=function(t,e){t.holder().off(),t.editable().off(),t.popover().off(),t.handle().off(),t.dialog().off(),e.airMode||(t.dropzone().off(),t.toolbar().off(),t.statusbar().off())}},B=function(){var e=function(t,e){var i=e.event,n=e.value,r=e.title,o=e.className,s=e.dropdown,a=e.hide;return(s?'<div class="btn-group'+(o?" "+o:"")+'">':"")+'<button type="button" class="btn btn-default btn-sm'+(!s&&o?" "+o:"")+(s?" dropdown-toggle":"")+'"'+(s?' data-toggle="dropdown"':"")+(r?' title="'+r+'"':"")+(i?' data-event="'+i+'"':"")+(n?" data-value='"+n+"'":"")+(a?" data-hide='"+a+"'":"")+' tabindex="-1">'+t+(s?' <span class="caret"></span>':"")+"</button>"+(s||"")+(s?"</div>":"")},i=function(t,i){var n='<i class="'+t+'"></i>';return e(n,i)},n=function(e,i){var n=t('<div class="'+e+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');return n.find(".popover-content").append(i),n},r=function(t,e,i,n){return'<div class="'+t+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(e?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+e+"</h4></div>":"")+'<div class="modal-body">'+i+"</div>"+(n?'<div class="modal-footer">'+n+"</div>":"")+"</div></div></div>"},o=function(t,e,i){var n="dropdown-menu"+(e?" "+e:"");return i=i||"ul",t instanceof Array&&(t=t.join("")),"<"+i+' class="'+n+'">'+t+"</"+i+">"},s={picture:function(t,e){return i(e.iconPrefix+e.icons.image.image,{event:"showImageDialog",title:t.image.image,hide:!0})},link:function(t,e){return i(e.iconPrefix+e.icons.link.link,{event:"showLinkDialog",title:t.link.link,hide:!0})},table:function(t,e){var n=['<div class="note-dimension-picker">','<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>','<div class="note-dimension-picker-highlighted"></div>','<div class="note-dimension-picker-unhighlighted"></div>',"</div>",'<div class="note-dimension-display"> 1 x 1 </div>'];return i(e.iconPrefix+e.icons.table.table,{title:t.table.table,dropdown:o(n,"note-table")})},style:function(t,e){var n=e.styleTags.reduce(function(e,i){var n=t.style["p"===i?"normal":i];return e+'<li><a data-event="formatBlock" href="#" data-value="'+i+'">'+("p"===i||"pre"===i?n:"<"+i+">"+n+"</"+i+">")+"</a></li>"},"");return i(e.iconPrefix+e.icons.style.style,{title:t.style.style,dropdown:o(n)})},fontname:function(t,i){var n=[],r=i.fontNames.reduce(function(t,e){return l.isFontInstalled(e)||h.contains(i.fontNamesIgnoreCheck,e)?(n.push(e),t+'<li><a data-event="fontName" href="#" data-value="'+e+'" style="font-family:\''+e+'\'"><i class="'+i.iconPrefix+i.icons.misc.check+'"></i> '+e+"</a></li>"):t},""),s=l.isFontInstalled(i.defaultFontName),a=s?i.defaultFontName:n[0],c='<span class="note-current-fontname">'+a+"</span>";return e(c,{title:t.font.name,className:"note-fontname",dropdown:o(r,"note-check")})},fontsize:function(t,i){var n=i.fontSizes.reduce(function(t,e){return t+'<li><a data-event="fontSize" href="#" data-value="'+e+'"><i class="'+i.iconPrefix+i.icons.misc.check+'"></i> '+e+"</a></li>"},""),r='<span class="note-current-fontsize">11</span>';return e(r,{title:t.font.size,className:"note-fontsize",dropdown:o(n,"note-check")})},color:function(t,i){var n='<i class="'+i.iconPrefix+i.icons.color.recent+'" style="color:black;background-color:yellow;"></i>',r=e(n,{className:"note-recent-color",title:t.color.recent,event:"color",value:'{"backColor":"yellow"}'}),s=['<li><div class="btn-group">','<div class="note-palette-title">'+t.color.background+"</div>",'<div class="note-color-reset" data-event="backColor"',' data-value="inherit" title="'+t.color.transparent+'">'+t.color.setTransparent+"</div>",'<div class="note-color-palette" data-target-event="backColor"></div>','</div><div class="btn-group">','<div class="note-palette-title">'+t.color.foreground+"</div>",'<div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+t.color.reset+'">',t.color.resetToDefault,"</div>",'<div class="note-color-palette" data-target-event="foreColor"></div>',"</div></li>"],a=e("",{title:t.color.more,dropdown:o(s)});return r+a},bold:function(t,e){return i(e.iconPrefix+e.icons.font.bold,{event:"bold",title:t.font.bold})},italic:function(t,e){return i(e.iconPrefix+e.icons.font.italic,{event:"italic",title:t.font.italic})},underline:function(t,e){return i(e.iconPrefix+e.icons.font.underline,{event:"underline",title:t.font.underline})},strikethrough:function(t,e){return i(e.iconPrefix+e.icons.font.strikethrough,{event:"strikethrough",title:t.font.strikethrough})},superscript:function(t,e){return i(e.iconPrefix+e.icons.font.superscript,{event:"superscript",title:t.font.superscript})},subscript:function(t,e){return i(e.iconPrefix+e.icons.font.subscript,{event:"subscript",title:t.font.subscript})},clear:function(t,e){return i(e.iconPrefix+e.icons.font.clear,{event:"removeFormat",title:t.font.clear})},ul:function(t,e){return i(e.iconPrefix+e.icons.lists.unordered,{event:"insertUnorderedList",title:t.lists.unordered})},ol:function(t,e){return i(e.iconPrefix+e.icons.lists.ordered,{event:"insertOrderedList",title:t.lists.ordered})},paragraph:function(t,e){var n=i(e.iconPrefix+e.icons.paragraph.left,{title:t.paragraph.left,event:"justifyLeft"}),r=i(e.iconPrefix+e.icons.paragraph.center,{title:t.paragraph.center,event:"justifyCenter"}),s=i(e.iconPrefix+e.icons.paragraph.right,{title:t.paragraph.right,event:"justifyRight"}),a=i(e.iconPrefix+e.icons.paragraph.justify,{title:t.paragraph.justify,event:"justifyFull"}),l=i(e.iconPrefix+e.icons.paragraph.outdent,{title:t.paragraph.outdent,event:"outdent"}),c=i(e.iconPrefix+e.icons.paragraph.indent,{title:t.paragraph.indent,event:"indent"}),h=['<div class="note-align btn-group">',n+r+s+a,'</div><div class="note-list btn-group">',c+l,"</div>"];return i(e.iconPrefix+e.icons.paragraph.paragraph,{title:t.paragraph.paragraph,dropdown:o(h,"","div")})},height:function(t,e){var n=e.lineHeights.reduce(function(t,i){return t+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(i)+'"><i class="'+e.iconPrefix+e.icons.misc.check+'"></i> '+i+"</a></li>"},"");return i(e.iconPrefix+e.icons.font.height,{title:t.font.height,dropdown:o(n,"note-check")})},help:function(t,e){return i(e.iconPrefix+e.icons.options.help,{event:"showHelpDialog",title:t.options.help,hide:!0})},fullscreen:function(t,e){return i(e.iconPrefix+e.icons.options.fullscreen,{event:"fullscreen",title:t.options.fullscreen})},codeview:function(t,e){return i(e.iconPrefix+e.icons.options.codeview,{event:"codeview",title:t.options.codeview})},undo:function(t,e){return i(e.iconPrefix+e.icons.history.undo,{event:"undo",title:t.history.undo})},redo:function(t,e){return i(e.iconPrefix+e.icons.history.redo,{event:"redo",title:t.history.redo})},hr:function(t,e){return i(e.iconPrefix+e.icons.hr.insert,{event:"insertHorizontalRule",title:t.hr.insert})}},a=function(r,o){var a=function(){var t=i(o.iconPrefix+o.icons.link.edit,{title:r.link.edit,event:"showLinkDialog",hide:!0}),e=i(o.iconPrefix+o.icons.link.unlink,{title:r.link.unlink,event:"unlink"}),s='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+t+e+"</div>";
return n("note-link-popover",s)},l=function(){var t=e('<span class="note-fontsize-10">100%</span>',{title:r.image.resizeFull,event:"resize",value:"1"}),s=e('<span class="note-fontsize-10">50%</span>',{title:r.image.resizeHalf,event:"resize",value:"0.5"}),a=e('<span class="note-fontsize-10">25%</span>',{title:r.image.resizeQuarter,event:"resize",value:"0.25"}),l=i(o.iconPrefix+o.icons.image.floatLeft,{title:r.image.floatLeft,event:"floatMe",value:"left"}),c=i(o.iconPrefix+o.icons.image.floatRight,{title:r.image.floatRight,event:"floatMe",value:"right"}),h=i(o.iconPrefix+o.icons.image.floatNone,{title:r.image.floatNone,event:"floatMe",value:"none"}),u=i(o.iconPrefix+o.icons.image.shapeRounded,{title:r.image.shapeRounded,event:"imageShape",value:"img-rounded"}),d=i(o.iconPrefix+o.icons.image.shapeCircle,{title:r.image.shapeCircle,event:"imageShape",value:"img-circle"}),p=i(o.iconPrefix+o.icons.image.shapeThumbnail,{title:r.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),f=i(o.iconPrefix+o.icons.image.shapeNone,{title:r.image.shapeNone,event:"imageShape",value:""}),g=i(o.iconPrefix+o.icons.image.remove,{title:r.image.remove,event:"removeMedia",value:"none"}),m=(o.disableResizeImage?"":'<div class="btn-group">'+t+s+a+"</div>")+'<div class="btn-group">'+l+c+h+'</div><br><div class="btn-group">'+u+d+p+f+'</div><div class="btn-group">'+g+"</div>";return n("note-image-popover",m)},c=function(){for(var e=t("<div />"),i=0,a=o.airPopover.length;i<a;i++){for(var l=o.airPopover[i],c=t('<div class="note-'+l[0]+' btn-group">'),h=0,u=l[1].length;h<u;h++){var d=t(s[l[1][h]](r,o));d.attr("data-name",l[1][h]),c.append(d)}e.append(c)}return n("note-air-popover",e.children())},h=t('<div class="note-popover" />');return h.append(a()),h.append(l()),o.airMode&&h.append(c()),h},u=function(t){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="'+(t.disableResizeImage?"note-control-holder":"note-control-sizing")+' note-control-se"></div>'+(t.disableResizeImage?"":'<div class="note-control-selection-info"></div>')+"</div></div>"},d=function(t,e){var i="note-shortcut-col col-xs-6 note-shortcut-",n=[];for(var r in e)e.hasOwnProperty(r)&&n.push('<div class="'+i+'key">'+e[r].kbd+'</div><div class="'+i+'name">'+e[r].text+"</div>");return'<div class="note-shortcut-row row"><div class="'+i+'title col-xs-offset-6">'+t+'</div></div><div class="note-shortcut-row row">'+n.join('</div><div class="note-shortcut-row row">')+"</div>"},f=function(t){var e=[{kbd:"\u2318 + B",text:t.font.bold},{kbd:"\u2318 + I",text:t.font.italic},{kbd:"\u2318 + U",text:t.font.underline},{kbd:"\u2318 + \\",text:t.font.clear}];return d(t.shortcut.textFormatting,e)},g=function(t){var e=[{kbd:"\u2318 + Z",text:t.history.undo},{kbd:"\u2318 + \u21e7 + Z",text:t.history.redo},{kbd:"\u2318 + ]",text:t.paragraph.indent},{kbd:"\u2318 + [",text:t.paragraph.outdent},{kbd:"\u2318 + ENTER",text:t.hr.insert}];return d(t.shortcut.action,e)},m=function(t){var e=[{kbd:"\u2318 + \u21e7 + L",text:t.paragraph.left},{kbd:"\u2318 + \u21e7 + E",text:t.paragraph.center},{kbd:"\u2318 + \u21e7 + R",text:t.paragraph.right},{kbd:"\u2318 + \u21e7 + J",text:t.paragraph.justify},{kbd:"\u2318 + \u21e7 + NUM7",text:t.lists.ordered},{kbd:"\u2318 + \u21e7 + NUM8",text:t.lists.unordered}];return d(t.shortcut.paragraphFormatting,e)},v=function(t){var e=[{kbd:"\u2318 + NUM0",text:t.style.normal},{kbd:"\u2318 + NUM1",text:t.style.h1},{kbd:"\u2318 + NUM2",text:t.style.h2},{kbd:"\u2318 + NUM3",text:t.style.h3},{kbd:"\u2318 + NUM4",text:t.style.h4},{kbd:"\u2318 + NUM5",text:t.style.h5},{kbd:"\u2318 + NUM6",text:t.style.h6}];return d(t.shortcut.documentStyle,e)},y=function(t,e){var i=e.extraKeys,n=[];for(var r in i)i.hasOwnProperty(r)&&n.push({kbd:r,text:i[r]});return d(t.shortcut.extraKeys,n)},x=function(t,e){var i='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"',n=["<div "+i+">"+g(t,e)+"</div><div "+i+">"+f(t,e)+"</div>","<div "+i+">"+v(t,e)+"</div><div "+i+">"+m(t,e)+"</div>"];return e.extraKeys&&n.push("<div "+i+">"+y(t,e)+"</div>"),'<div class="note-shortcut-row row">'+n.join('</div><div class="note-shortcut-row row">')+"</div>"},b=function(t){return t.replace(/\u2318/g,"Ctrl").replace(/\u21e7/g,"Shift")},w={image:function(t,e){var i="";if(e.maximumImageFileSize){var n=Math.floor(Math.log(e.maximumImageFileSize)/Math.log(1024)),o=1*(e.maximumImageFileSize/Math.pow(1024,n)).toFixed(2)+" "+" KMGTP"[n]+"B";i="<small>"+t.image.maximumFileSize+" : "+o+"</small>"}var s='<div class="form-group row note-group-select-from-files"><label>'+t.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+i+'</div><div class="form-group row"><label>'+t.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',a='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+t.image.insert+"</button>";return r("note-image-dialog",t.image.insert,s,a)},link:function(t,e){var i='<div class="form-group row"><label>'+t.link.textToDisplay+'</label><input class="note-link-text form-control col-md-12" type="text" /></div><div class="form-group row"><label>'+t.link.url+'</label><input class="note-link-url form-control col-md-12" type="text" value="http://" /></div>'+(e.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+t.link.openInNewWindow+"</label></div>"),n='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+t.link.insert+"</button>";return r("note-link-dialog",t.link.insert,i,n)},help:function(t,e){var i='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+t.shortcut.close+'</a><div class="title">'+t.shortcut.shortcuts+"</div>"+(l.isMac?x(t,e):b(x(t,e)))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.16</a> \xb7 <a href="//github.com/summernote/summernote" target="_blank">Project</a> \xb7 <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';return r("note-help-dialog","",i,"")}},_=function(e,i){var n="";return t.each(w,function(t,r){n+=r(e,i)}),'<div class="note-dialog">'+n+"</div>"},k=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},T=function(t){return l.isMac&&(t=t.replace("CMD","\u2318").replace("SHIFT","\u21e7")),t.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},S=function(e,i,n){var r=c.invertObject(i),o=e.find("button");o.each(function(e,i){var n=t(i),o=r[n.data("event")];o&&n.attr("title",function(t,e){return e+" ("+T(o)+")"})}).tooltip({container:"body",trigger:"hover",placement:n||"top"}).on("click",function(){t(this).tooltip("hide")})},C=function(e,i){var n=i.colors;e.find(".note-color-palette").each(function(){for(var e=t(this),i=e.attr("data-target-event"),r=[],o=0,s=n.length;o<s;o++){for(var a=n[o],l=[],c=0,h=a.length;c<h;c++){var u=a[c];l.push(['<button type="button" class="note-color-btn" style="background-color:',u,';" data-event="',i,'" data-value="',u,'" title="',u,'" data-toggle="button" tabindex="-1"></button>'].join(""))}r.push('<div class="note-color-row">'+l.join("")+"</div>")}e.html(r.join(""))})};this.createLayoutByAirMode=function(e,i){var n=i.langInfo,r=i.keyMap[l.isMac?"mac":"pc"],o=c.uniqueId();e.addClass("note-air-editor note-editable panel-body"),e.attr({id:"note-editor-"+o,contentEditable:!0});var s=document.body,h=t(a(n,i));h.addClass("note-air-layout"),h.attr("id","note-popover-"+o),h.appendTo(s),S(h,r),C(h,i);var d=t(u(i));d.addClass("note-air-layout"),d.attr("id","note-handle-"+o),d.appendTo(s);var p=t(_(n,i));p.addClass("note-air-layout"),p.attr("id","note-dialog-"+o),p.find("button.close, a.modal-close").click(function(){t(this).closest(".modal").modal("hide")}),p.appendTo(s)},this.createLayoutByFrame=function(e,i){var n=i.langInfo,r=t('<div class="note-editor panel panel-default" />');i.width&&r.width(i.width),i.height>0&&t('<div class="note-statusbar">'+(i.disableResizeEditor?"":k())+"</div>").prependTo(r);var o=t('<div class="note-editing-area" />'),c=!e.is(":disabled"),h=t('<div class="note-editable panel-body" contentEditable="'+c+'"></div>').prependTo(o);i.height&&h.height(i.height),i.direction&&h.attr("dir",i.direction);var d=e.attr("placeholder")||i.placeholder;d&&h.attr("data-placeholder",d),h.html(p.html(e)||p.emptyPara),t('<textarea class="note-codable"></textarea>').prependTo(o);var f=t(a(n,i)).prependTo(o);C(f,i),S(f,E),t(u(i)).prependTo(o),o.prependTo(r);for(var g=t('<div class="note-toolbar panel-heading" />'),m=0,v=i.toolbar.length;m<v;m++){for(var y=i.toolbar[m][0],x=i.toolbar[m][1],b=t('<div class="note-'+y+' btn-group" />'),w=0,T=x.length;w<T;w++){var A=s[x[w]];if(t.isFunction(A)){var M=t(A(n,i));M.attr("data-name",x[w]),b.append(M)}}g.append(b)}var E=i.keyMap[l.isMac?"mac":"pc"];C(g,i),S(g,E,"bottom"),g.prependTo(r),t('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(r);var P=i.dialogsInBody?t(document.body):r,D=t(_(n,i)).prependTo(P);D.find("button.close, a.modal-close").click(function(){t(this).closest(".modal").modal("hide")}),r.insertAfter(e),e.hide()},this.hasNoteEditor=function(t){return this.noteEditorFromHolder(t).length>0},this.noteEditorFromHolder=function(e){return e.hasClass("note-air-editor")?e:e.next().hasClass("note-editor")?e.next():t()},this.createLayout=function(t,e){e.airMode?this.createLayoutByAirMode(t,e):this.createLayoutByFrame(t,e)},this.layoutInfoFromHolder=function(t){var e=this.noteEditorFromHolder(t);if(e.length)return e.data("holder",t),p.buildLayoutInfo(e)},this.removeLayout=function(t,e,i){i.airMode?(t.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),e.popover().remove(),e.handle().remove(),e.dialog().remove()):(t.html(e.editable().html()),i.dialogsInBody&&e.dialog().remove(),e.editor().remove(),t.show())},this.getTemplate=function(){return{button:e,iconButton:i,dialog:r}},this.addButtonInfo=function(t,e){s[t]=e},this.addDialogInfo=function(t,e){w[t]=e}};t.summernote=t.summernote||{},t.extend(t.summernote,g);var H=new B,W=new O;t.extend(t.summernote,{renderer:H,eventHandler:W,core:{agent:l,list:h,dom:p,range:f},pluginEvents:{},plugins:[]}),t.summernote.addPlugin=function(e){t.summernote.plugins.push(e),e.buttons&&t.each(e.buttons,function(t,e){H.addButtonInfo(t,e)}),e.dialogs&&t.each(e.dialogs,function(t,e){H.addDialogInfo(t,e)}),e.events&&t.each(e.events,function(e,i){t.summernote.pluginEvents[e]=i}),e.langs&&t.each(e.langs,function(e,i){t.summernote.lang[e]&&t.extend(t.summernote.lang[e],i)}),e.options&&t.extend(t.summernote.options,e.options)},t.fn.extend({summernote:function(){var e=t.type(h.head(arguments)),i="string"===e,n="object"===e,r=n?h.head(arguments):{};if(r=t.extend({},t.summernote.options,r),r.icons=t.extend({},t.summernote.options.icons,r.icons),r.langInfo=t.extend(!0,{},t.summernote.lang["en-US"],t.summernote.lang[r.lang]),!i&&n)for(var o=0,s=t.summernote.plugins.length;o<s;o++){var a=t.summernote.plugins[o];r.plugin[a.name]&&(t.summernote.plugins[o]=t.extend(!0,a,r.plugin[a.name]))}this.each(function(e,i){var n=t(i);if(!H.hasNoteEditor(n)){H.createLayout(n,r);var o=H.layoutInfoFromHolder(n);n.data("layoutInfo",o),W.attach(o,r),W.attachCustomEvent(o,r)}});var l=this.first();if(l.length){var c=H.layoutInfoFromHolder(l);if(i){var u=h.head(h.from(arguments)),d=h.tail(h.from(arguments)),p=[u,c.editable()].concat(d);return W.invoke.apply(W,p)}r.focus&&c.editable().focus()}return this},code:function(e){if(void 0===e){var i=this.first();if(!i.length)return;var n=H.layoutInfoFromHolder(i),r=n&&n.editable();if(r&&r.length){var o=W.invoke("codeview.isActivated",n);return W.invoke("codeview.sync",n),o?n.codable().val():n.editable().html()}return p.value(i)}return this.each(function(i,n){var r=H.layoutInfoFromHolder(t(n)),o=r&&r.editable();o&&o.html(e)}),this},destroy:function(){return this.each(function(e,i){var n=t(i);if(H.hasNoteEditor(n)){var r=H.layoutInfoFromHolder(n),o=r.editor().data("options");W.detach(r,o),H.removeLayout(n,r,o)}}),this}})});