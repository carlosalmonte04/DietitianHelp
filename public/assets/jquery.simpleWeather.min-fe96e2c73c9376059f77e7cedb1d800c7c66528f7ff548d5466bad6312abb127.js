!function(t){"use strict";function e(t,e){return Math.round("f"===t?5/9*(e-32):1.8*e+32)}t.extend({simpleWeather:function(i){i=t.extend({location:"",woeid:"",unit:"f",success:function(){},error:function(){}},i);var n=new Date,o="https://query.yahooapis.com/v1/public/yql?format=json&rnd="+n.getFullYear()+n.getMonth()+n.getDay()+n.getHours()+"&diagnostics=true&callback=?&q=";if(""!==i.location)o+='select * from weather.forecast where woeid in (select woeid from geo.placefinder where text="'+i.location+'" and gflags="R" limit 1) and u="'+i.unit+'"';else{if(""===i.woeid)return i.error({message:"Could not retrieve weather due to an invalid location."}),!1;o+="select * from weather.forecast where woeid="+i.woeid+' and u="'+i.unit+'"'}return t.getJSON(encodeURI(o),function(t){if(null!==t&&null!==t.query&&null!==t.query.results&&"Yahoo! Weather Error"!==t.query.results.channel.description){var n,o=t.query.results.channel,r={},s=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"],a="https://s.yimg.com/os/mit/media/m/weather/images/icons/l/44d-100567.png";r.title=o.item.title,r.temp=o.item.condition.temp,r.code=o.item.condition.code,r.todayCode=o.item.forecast[0].code,r.currently=o.item.condition.text,r.high=o.item.forecast[0].high,r.low=o.item.forecast[0].low,r.text=o.item.forecast[0].text,r.humidity=o.atmosphere.humidity,r.pressure=o.atmosphere.pressure,r.rising=o.atmosphere.rising,r.visibility=o.atmosphere.visibility,r.sunrise=o.astronomy.sunrise,r.sunset=o.astronomy.sunset,r.description=o.item.description,r.city=o.location.city,r.country=o.location.country,r.region=o.location.region,r.updated=o.item.pubDate,r.link=o.item.link,r.units={temp:o.units.temperature,distance:o.units.distance,pressure:o.units.pressure,speed:o.units.speed},r.wind={chill:o.wind.chill,direction:s[Math.round(o.wind.direction/22.5)],speed:o.wind.speed},r.heatindex=o.item.condition.temp<80&&o.atmosphere.humidity<40?-42.379+2.04901523*o.item.condition.temp+10.14333127*o.atmosphere.humidity-.22475541*o.item.condition.temp*o.atmosphere.humidity-6.83783*Math.pow(10,-3)*Math.pow(o.item.condition.temp,2)-5.481717*Math.pow(10,-2)*Math.pow(o.atmosphere.humidity,2)+1.22874*Math.pow(10,-3)*Math.pow(o.item.condition.temp,2)*o.atmosphere.humidity+8.5282*Math.pow(10,-4)*o.item.condition.temp*Math.pow(o.atmosphere.humidity,2)-1.99*Math.pow(10,-6)*Math.pow(o.item.condition.temp,2)*Math.pow(o.atmosphere.humidity,2):o.item.condition.temp,"3200"==o.item.condition.code?(r.thumbnail=a,r.image=a):(r.thumbnail="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+o.item.condition.code+"ds.png",r.image="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+o.item.condition.code+"d.png"),r.alt={temp:e(i.unit,o.item.condition.temp),high:e(i.unit,o.item.forecast[0].high),low:e(i.unit,o.item.forecast[0].low)},r.alt.unit="f"===i.unit?"c":"f",r.forecast=[];for(var l=0;l<o.item.forecast.length;l++)n=o.item.forecast[l],n.alt={high:e(i.unit,o.item.forecast[l].high),low:e(i.unit,o.item.forecast[l].low)},"3200"==o.item.forecast[l].code?(n.thumbnail=a,n.image=a):(n.thumbnail="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+o.item.forecast[l].code+"ds.png",n.image="https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/"+o.item.forecast[l].code+"d.png"),r.forecast.push(n);i.success(r)}else i.error({message:"There was an error retrieving the latest weather information. Please try again.",error:t.query.results.channel.item.title})}),this}})}(jQuery);