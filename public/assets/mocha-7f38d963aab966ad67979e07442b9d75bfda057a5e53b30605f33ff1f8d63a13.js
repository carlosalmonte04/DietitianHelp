!function(){function t(e){var i=t.resolve(e),n=t.modules[i];if(!n)throw new Error('failed to require "'+e+'"');return n.exports||(n.exports={},n.call(n.exports,n,n.exports,t.relative(i))),n.exports}function e(){for(var t=(new i).getTime();c.length&&(new i).getTime()-t<100;)c.shift()();l=c.length?n(e,0):null}t.modules={},t.resolve=function(e){var i=e,n=e+".js",o=e+"/index.js";return t.modules[n]&&n||t.modules[o]&&o||i},t.register=function(e,i){t.modules[e]=i},t.relative=function(e){return function(i){if("."!=i.charAt(0))return t(i);var n=e.split("/"),o=i.split("/");n.pop();for(var r=0;r<o.length;r++){var s=o[r];".."==s?n.pop():"."!=s&&n.push(s)}return t(n.join("/"))}},t.register("browser/debug.js",function(t){t.exports=function(){return function(){}}}),t.register("browser/diff.js",function(t){var e=function(){function t(t){return{newPos:t.newPos,components:t.components.slice(0)}}function e(t){for(var e=[],i=0;i<t.length;i++)t[i]&&e.push(t[i]);return e}function i(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;")}var n=function(t){this.ignoreWhitespace=t};n.prototype={diff:function(e,i){if(i===e)return[{value:i}];if(!i)return[{value:e,removed:!0}];if(!e)return[{value:i,added:!0}];i=this.tokenize(i),e=this.tokenize(e);var n=i.length,o=e.length,r=n+o,s=[{newPos:-1,components:[]}],a=this.extractCommon(s[0],i,e,0);if(s[0].newPos+1>=n&&a+1>=o)return s[0].components;for(var l=1;l<=r;l++)for(var c=-1*l;c<=l;c+=2){var u,h=s[c-1],d=s[c+1];a=(d?d.newPos:0)-c,h&&(s[c-1]=void 0);var p=h&&h.newPos+1<n,f=d&&0<=a&&a<o;if(p||f){!p||f&&h.newPos<d.newPos?(u=t(d),this.pushComponent(u.components,e[a],void 0,!0)):(u=t(h),u.newPos++,this.pushComponent(u.components,i[u.newPos],!0,void 0));var a=this.extractCommon(u,i,e,c);if(u.newPos+1>=n&&a+1>=o)return u.components;s[c]=u}else s[c]=void 0}},pushComponent:function(t,e,i,n){var o=t[t.length-1];o&&o.added===i&&o.removed===n?t[t.length-1]={value:this.join(o.value,e),added:i,removed:n}:t.push({value:e,added:i,removed:n})},extractCommon:function(t,e,i,n){for(var o=e.length,r=i.length,s=t.newPos,a=s-n;s+1<o&&a+1<r&&this.equals(e[s+1],i[a+1]);)s++,a++,this.pushComponent(t.components,e[s],void 0,void 0);return t.newPos=s,a},equals:function(t,e){var i=/\S/;return!(!this.ignoreWhitespace||i.test(t)||i.test(e))||t===e},join:function(t,e){return t+e},tokenize:function(t){return t}};var o=new n,r=new n(!0),s=new n;r.tokenize=s.tokenize=function(t){return e(t.split(/(\s+|\b)/))};var a=new n(!0);a.tokenize=function(t){return e(t.split(/([{}:;,]|\s+)/))};var l=new n;return l.tokenize=function(t){return t.split(/^/m)},{Diff:n,diffChars:function(t,e){return o.diff(t,e)},diffWords:function(t,e){return r.diff(t,e)},diffWordsWithSpace:function(t,e){return s.diff(t,e)},diffLines:function(t,e){return l.diff(t,e)},diffCss:function(t,e){return a.diff(t,e)},createPatch:function(t,e,i,n,o){function r(t){return t.map(function(t){return" "+t})}function s(t,e,i){var n=c[c.length-2],o=e===c.length-2,r=e===c.length-3&&(i.added!==n.added||i.removed!==n.removed);/\n$/.test(i.value)||!o&&!r||t.push("\\ No newline at end of file")}var a=[];a.push("Index: "+t),a.push("==================================================================="),a.push("--- "+t+("undefined"==typeof n?"":"\t"+n)),a.push("+++ "+t+("undefined"==typeof o?"":"\t"+o));var c=l.diff(e,i);c[c.length-1].value||c.pop(),c.push({value:"",lines:[]});for(var u=0,h=0,d=[],p=1,f=1,g=0;g<c.length;g++){var m=c[g],v=m.lines||m.value.replace(/\n$/,"").split("\n");if(m.lines=v,m.added||m.removed){if(!u){var y=c[g-1];u=p,h=f,y&&(d=r(y.lines.slice(-4)),u-=d.length,h-=d.length)}d.push.apply(d,v.map(function(t){return(m.added?"+":"-")+t})),s(d,g,m),m.added?f+=v.length:p+=v.length}else{if(u)if(v.length<=8&&g<c.length-2)d.push.apply(d,r(v));else{var x=Math.min(v.length,4);a.push("@@ -"+u+","+(p-u+x)+" +"+h+","+(f-h+x)+" @@"),a.push.apply(a,d),a.push.apply(a,r(v.slice(0,x))),v.length<=4&&s(a,g,m),u=0,h=0,d=[]}p+=v.length,f+=v.length}}return a.join("\n")+"\n"},applyPatch:function(t,e){for(var i=e.split("\n"),n=[],o=!1,r=!1,s="I"===i[0][0]?4:0;s<i.length;s++)if("@"===i[s][0]){var a=i[s].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);n.unshift({start:a[3],oldlength:a[2],oldlines:[],newlength:a[4],newlines:[]})}else"+"===i[s][0]?n[0].newlines.push(i[s].substr(1)):"-"===i[s][0]?n[0].oldlines.push(i[s].substr(1)):" "===i[s][0]?(n[0].newlines.push(i[s].substr(1)),n[0].oldlines.push(i[s].substr(1))):"\\"===i[s][0]&&("+"===i[s-1][0]?o=!0:"-"===i[s-1][0]&&(r=!0));for(var l=t.split("\n"),s=n.length-1;s>=0;s--){for(var c=n[s],u=0;u<c.oldlength;u++)if(l[c.start-1+u]!==c.oldlines[u])return!1;Array.prototype.splice.apply(l,[c.start-1,+c.oldlength].concat(c.newlines))}if(o)for(;!l[l.length-1];)l.pop();else r&&l.push("");return l.join("\n")},convertChangesToXML:function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];o.added?e.push("<ins>"):o.removed&&e.push("<del>"),e.push(i(o.value)),o.added?e.push("</ins>"):o.removed&&e.push("</del>")}return e.join("")},convertChangesToDMP:function(t){for(var e,i=[],n=0;n<t.length;n++)e=t[n],i.push([e.added?1:e.removed?-1:0,e.value]);return i}}}();"undefined"!=typeof t&&(t.exports=e)}),t.register("browser/events.js",function(t,e){function i(t){return"[object Array]"=={}.toString.call(t)}function n(){}e.EventEmitter=n,n.prototype.on=function(t,e){return this.$events||(this.$events={}),this.$events[t]?i(this.$events[t])?this.$events[t].push(e):this.$events[t]=[this.$events[t],e]:this.$events[t]=e,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(t,e){function i(){n.removeListener(t,i),e.apply(this,arguments)}var n=this;return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){if(this.$events&&this.$events[t]){var n=this.$events[t];if(i(n)){for(var o=-1,r=0,s=n.length;r<s;r++)if(n[r]===e||n[r].listener&&n[r].listener===e){o=r;break}if(o<0)return this;n.splice(o,1),n.length||delete this.$events[t]}else(n===e||n.listener&&n.listener===e)&&delete this.$events[t]}return this},n.prototype.removeAllListeners=function(t){return void 0===t?(this.$events={},this):(this.$events&&this.$events[t]&&(this.$events[t]=null),this)},n.prototype.listeners=function(t){return this.$events||(this.$events={}),this.$events[t]||(this.$events[t]=[]),i(this.$events[t])||(this.$events[t]=[this.$events[t]]),this.$events[t]},n.prototype.emit=function(t){if(!this.$events)return!1;var e=this.$events[t];if(!e)return!1;var n=[].slice.call(arguments,1);if("function"==typeof e)e.apply(this,n);else{if(!i(e))return!1;for(var o=e.slice(),r=0,s=o.length;r<s;r++)o[r].apply(this,n)}return!0}}),t.register("browser/fs.js",function(){}),t.register("browser/path.js",function(){}),t.register("browser/progress.js",function(t){function e(){this.percent=0,this.size(0),this.fontSize(11),this.font("helvetica, arial, sans-serif")}t.exports=e,e.prototype.size=function(t){return this._size=t,this},e.prototype.text=function(t){return this._text=t,this},e.prototype.fontSize=function(t){return this._fontSize=t,this},e.prototype.font=function(t){return this._font=t,this},e.prototype.update=function(t){return this.percent=t,this},e.prototype.draw=function(t){try{var e=Math.min(this.percent,100),i=this._size,n=i/2,o=n,r=n,s=n-1,a=this._fontSize;t.font=a+"px "+this._font;var l=2*Math.PI*(e/100);t.clearRect(0,0,i,i),t.strokeStyle="#9f9f9f",t.beginPath(),t.arc(o,r,s,0,l,!1),t.stroke(),t.strokeStyle="#eee",t.beginPath(),t.arc(o,r,s-1,0,l,!0),t.stroke();var c=this._text||(0|e)+"%",u=t.measureText(c).width;t.fillText(c,o-u/2+1,r+a/2-1)}catch(t){}return this}}),t.register("browser/tty.js",function(t,e){e.isatty=function(){return!0},e.getWindowSize=function(){return"innerHeight"in global?[global.innerHeight,global.innerWidth]:[640,480]}}),t.register("context.js",function(t){function e(){}t.exports=e,e.prototype.runnable=function(t){return 0==arguments.length?this._runnable:(this.test=this._runnable=t,this)},e.prototype.timeout=function(t){return this.runnable().timeout(t),this},e.prototype.slow=function(t){return this.runnable().slow(t),this},e.prototype.inspect=function(){return JSON.stringify(this,function(t,e){if("_runnable"!=t&&"test"!=t)return e},2)}}),t.register("hook.js",function(t,e,i){function n(t,e){r.call(this,t,e),this.type="hook"}function o(){}var r=i("./runnable");t.exports=n,o.prototype=r.prototype,n.prototype=new o,n.prototype.constructor=n,n.prototype.error=function(t){if(0==arguments.length){var t=this._error;return this._error=null,t}this._error=t}}),t.register("interfaces/bdd.js",function(t,e,i){var n=i("../suite"),o=i("../test"),r=i("../utils");t.exports=function(t){var e=[t];t.on("pre-require",function(t,i,s){t.before=function(t){e[0].beforeAll(t)},t.after=function(t){e[0].afterAll(t)},t.beforeEach=function(t){e[0].beforeEach(t)},t.afterEach=function(t){e[0].afterEach(t)},t.describe=t.context=function(t,i){var o=n.create(e[0],t);return e.unshift(o),i.call(o),e.shift(),o},t.xdescribe=t.xcontext=t.describe.skip=function(t,i){var o=n.create(e[0],t);o.pending=!0,e.unshift(o),i.call(o),e.shift()},t.describe.only=function(e,i){var n=t.describe(e,i);return s.grep(n.fullTitle()),n},t.it=t.specify=function(t,i){var n=e[0];if(n.pending)var i=null;var r=new o(t,i);return n.addTest(r),r},t.it.only=function(e,i){var n=t.it(e,i),o="^"+r.escapeRegexp(n.fullTitle())+"$";return s.grep(new RegExp(o)),n},t.xit=t.xspecify=t.it.skip=function(e){t.it(e)}})}}),t.register("interfaces/exports.js",function(t,e,i){var n=i("../suite"),o=i("../test");t.exports=function(t){function e(t){var r;for(var s in t)if("function"==typeof t[s]){var a=t[s];switch(s){case"before":i[0].beforeAll(a);break;case"after":i[0].afterAll(a);break;case"beforeEach":i[0].beforeEach(a);break;case"afterEach":i[0].afterEach(a);break;default:i[0].addTest(new o(s,a))}}else{var r=n.create(i[0],s);i.unshift(r),e(t[s]),i.shift()}}var i=[t];t.on("require",e)}}),t.register("interfaces/index.js",function(t,e,i){e.bdd=i("./bdd"),e.tdd=i("./tdd"),e.qunit=i("./qunit"),e.exports=i("./exports")}),t.register("interfaces/qunit.js",function(t,e,i){var n=i("../suite"),o=i("../test"),r=i("../utils");t.exports=function(t){var e=[t];t.on("pre-require",function(t,i,s){t.before=function(t){e[0].beforeAll(t)},t.after=function(t){e[0].afterAll(t)},t.beforeEach=function(t){e[0].beforeEach(t)},t.afterEach=function(t){e[0].afterEach(t)},t.suite=function(t){e.length>1&&e.shift();var i=n.create(e[0],t);return e.unshift(i),i},t.suite.only=function(e,i){var n=t.suite(e,i);s.grep(n.fullTitle())},t.test=function(t,i){var n=new o(t,i);return e[0].addTest(n),n},t.test.only=function(e,i){var n=t.test(e,i),o="^"+r.escapeRegexp(n.fullTitle())+"$";s.grep(new RegExp(o))},t.test.skip=function(e){t.test(e)}})}}),t.register("interfaces/tdd.js",function(t,e,i){var n=i("../suite"),o=i("../test"),r=i("../utils");t.exports=function(t){var e=[t];t.on("pre-require",function(t,i,s){t.setup=function(t){e[0].beforeEach(t)},t.teardown=function(t){e[0].afterEach(t)},t.suiteSetup=function(t){e[0].beforeAll(t)},t.suiteTeardown=function(t){e[0].afterAll(t)},t.suite=function(t,i){var o=n.create(e[0],t);return e.unshift(o),i.call(o),e.shift(),o},t.suite.skip=function(t,i){var o=n.create(e[0],t);o.pending=!0,e.unshift(o),i.call(o),e.shift()},t.suite.only=function(e,i){var n=t.suite(e,i);s.grep(n.fullTitle())},t.test=function(t,i){var n=e[0];if(n.pending)var i=null;var r=new o(t,i);return n.addTest(r),r},t.test.only=function(e,i){var n=t.test(e,i),o="^"+r.escapeRegexp(n.fullTitle())+"$";s.grep(new RegExp(o))},t.test.skip=function(e){t.test(e)}})}}),t.register("mocha.js",function(t,e,i){function n(t){return __dirname+"/../images/"+t+".png"}function o(t){t=t||{},this.files=[],this.options=t,this.grep(t.grep),this.suite=new e.Suite("",new e.Context),this.ui(t.ui),this.bail(t.bail),this.reporter(t.reporter),null!=t.timeout&&this.timeout(t.timeout),this.useColors(t.useColors),t.slow&&this.slow(t.slow),this.suite.on("pre-require",function(t){e.afterEach=t.afterEach||t.teardown,e.after=t.after||t.suiteTeardown,e.beforeEach=t.beforeEach||t.setup,e.before=t.before||t.suiteSetup,e.describe=t.describe||t.suite,e.it=t.it||t.test,e.setup=t.setup||t.beforeEach,e.suiteSetup=t.suiteSetup||t.before,e.suiteTeardown=t.suiteTeardown||t.after,e.suite=t.suite||t.describe,e.teardown=t.teardown||t.afterEach,e.test=t.test||t.it})}var r=i("browser/path"),s=i("./utils");e=t.exports=o,e.utils=s,e.interfaces=i("./interfaces"),e.reporters=i("./reporters"),e.Runnable=i("./runnable"),e.Context=i("./context"),e.Runner=i("./runner"),e.Suite=i("./suite"),e.Hook=i("./hook"),e.Test=i("./test"),o.prototype.bail=function(t){return 0==arguments.length&&(t=!0),this.suite.bail(t),this},o.prototype.addFile=function(t){return this.files.push(t),this},o.prototype.reporter=function(t){if("function"==typeof t)this._reporter=t;else{t=t||"dot";var e;try{e=i("./reporters/"+t)}catch(t){}if(!e)try{e=i(t)}catch(t){}if(e||"teamcity"!==t||console.warn("The Teamcity reporter was moved to a package named mocha-teamcity-reporter (https://npmjs.org/package/mocha-teamcity-reporter)."),!e)throw new Error('invalid reporter "'+t+'"');this._reporter=e}return this},o.prototype.ui=function(t){if(t=t||"bdd",this._ui=e.interfaces[t],!this._ui)try{this._ui=i(t)}catch(t){}if(!this._ui)throw new Error('invalid interface "'+t+'"');return this._ui=this._ui(this.suite),this},o.prototype.loadFiles=function(t){var e=this,n=this.suite,o=this.files.length;this.files.forEach(function(s){s=r.resolve(s),n.emit("pre-require",global,s,e),n.emit("require",i(s),s,e),n.emit("post-require",global,s,e),--o||t&&t()})},o.prototype._growl=function(t,e){var o=i("growl");t.on("end",function(){var i=e.stats;if(i.failures){var r=i.failures+" of "+t.total+" tests failed";o(r,{name:"mocha",title:"Failed",image:n("error")})}else o(i.passes+" tests passed in "+i.duration+"ms",{name:"mocha",title:"Passed",image:n("ok")})})},o.prototype.grep=function(t){return this.options.grep="string"==typeof t?new RegExp(s.escapeRegexp(t)):t,this},o.prototype.invert=function(){return this.options.invert=!0,this},o.prototype.ignoreLeaks=function(t){return this.options.ignoreLeaks=!!t,this},o.prototype.checkLeaks=function(){return this.options.ignoreLeaks=!1,this},o.prototype.growl=function(){return this.options.growl=!0,this},o.prototype.globals=function(t){return this.options.globals=(this.options.globals||[]).concat(t),this},o.prototype.useColors=function(t){return this.options.useColors=!arguments.length||void 0==t||t,this},o.prototype.useInlineDiffs=function(t){return this.options.useInlineDiffs=!(!arguments.length||void 0==t)&&t,this},o.prototype.timeout=function(t){return this.suite.timeout(t),this},o.prototype.slow=function(t){return this.suite.slow(t),this},o.prototype.asyncOnly=function(){return this.options.asyncOnly=!0,this},o.prototype.run=function(t){this.files.length&&this.loadFiles();var i=this.suite,n=this.options,o=new e.Runner(i),r=new this._reporter(o);return o.ignoreLeaks=!1!==n.ignoreLeaks,o.asyncOnly=n.asyncOnly,n.grep&&o.grep(n.grep,n.invert),n.globals&&o.globals(n.globals),n.growl&&this._growl(o,r),e.reporters.Base.useColors=n.useColors,e.reporters.Base.inlineDiffs=n.useInlineDiffs,o.run(t)}}),t.register("ms.js",function(t){function e(t){var e=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(t);if(e){var i=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return i*c;case"days":case"day":case"d":return i*l;case"hours":case"hour":case"h":return i*a;case"minutes":case"minute":case"m":return i*s;case"seconds":case"second":case"s":return i*r;case"ms":return i}}}function i(t){return t>=l?Math.round(t/l)+"d":t>=a?Math.round(t/a)+"h":t>=s?Math.round(t/s)+"m":t>=r?Math.round(t/r)+"s":t+"ms"}function n(t){return o(t,l,"day")||o(t,a,"hour")||o(t,s,"minute")||o(t,r,"second")||t+" ms"}function o(t,e,i){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+i:Math.ceil(t/e)+" "+i+"s"}var r=1e3,s=60*r,a=60*s,l=24*a,c=365.25*l;t.exports=function(t,o){return o=o||{},"string"==typeof t?e(t):o["long"]?n(t):i(t)}}),t.register("reporters/base.js",function(t,e,i){function n(t){var e=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},i=this.failures=[];t&&(this.runner=t,t.stats=e,t.on("start",function(){e.start=new y}),t.on("suite",function(t){e.suites=e.suites||0,t.root||e.suites++}),t.on("test end",function(){e.tests=e.tests||0,e.tests++}),t.on("pass",function(t){e.passes=e.passes||0;var i=t.slow()/2;t.speed=t.duration>t.slow()?"slow":t.duration>i?"medium":"fast",e.passes++}),t.on("fail",function(t,n){e.failures=e.failures||0,e.failures++,t.err=n,i.push(t)}),t.on("end",function(){e.end=new y,e.duration=new y-e.start}),t.on("pending",function(){e.pending++}))}function r(t,e){return t=String(t),Array(e-t.length+1).join(" ")+t}function s(t,e){var i=l(t,"WordsWithSpace",e),n=i.split("\n");if(n.length>4){var o=String(n.length).length;i=n.map(function(t,e){return r(++e,o)+" | "+t}).join("\n")}return i="\n"+b("diff removed","actual")+" "+b("diff added","expected")+"\n\n"+i+"\n",i=i.replace(/^/gm,"      ")}function a(t,e){function i(t){return e&&(t=c(t)),"+"===t[0]?o+u("diff added",t):"-"===t[0]?o+u("diff removed",t):t.match(/\@\@/)?null:t.match(/\\ No newline/)?null:o+t}function n(t){return null!=t}var o="      ";msg=g.createPatch("string",t.actual,t.expected);var r=msg.split("\n").splice(4);return"\n      "+u("diff added","+ expected")+" "+u("diff removed","- actual")+"\n\n"+r.map(i).filter(n).join("\n")}function l(t,e,i){var n=i?c(t.actual):t.actual,o=i?c(t.expected):t.expected;return g["diff"+e](n,o).map(function(t){return t.added?u("diff added",t.value):t.removed?u("diff removed",t.value):t.value}).join("")}function c(t){return t.replace(/\t/g,"<tab>").replace(/\r/g,"<CR>").replace(/\n/g,"<LF>\n")}function u(t,e){return e.split("\n").map(function(e){return b(t,e)}).join("\n")}function h(t){return t instanceof RegExp?t.toString():JSON.stringify(t,null,2)}function d(t,e){if(e=e||[],v.indexOf(e,t)!==-1)return t;var i;return"[object Array]"=={}.toString.call(t)?(e.push(t),i=v.map(t,function(t){return d(t,e)}),e.pop()):"object"==typeof t&&null!==t?(e.push(t),i={},v.forEach(v.keys(t).sort(),function(n){i[n]=d(t[n],e)}),e.pop()):i=t,i}function p(t,e){return t=Object.prototype.toString.call(t),e=Object.prototype.toString.call(e),t==e}var f=i("browser/tty"),g=i("browser/diff"),m=i("../ms"),v=i("../utils"),y=global.Date,x=(global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval,f.isatty(1)&&f.isatty(2));e=t.exports=n,e.useColors=x||void 0!==o.env.MOCHA_COLORS,e.inlineDiffs=!1,e.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41},e.symbols={ok:"\u2713",err:"\u2716",dot:"\u2024"},"win32"==o.platform&&(e.symbols.ok="\u221a",e.symbols.err="\xd7",e.symbols.dot=".");var b=e.color=function(t,i){return e.useColors?"\x1b["+e.colors[t]+"m"+i+"\x1b[0m":i};e.window={width:x?o.stdout.getWindowSize?o.stdout.getWindowSize(1)[0]:f.getWindowSize()[1]:75},e.cursor={hide:function(){x&&o.stdout.write("\x1b[?25l")},show:function(){x&&o.stdout.write("\x1b[?25h")},deleteLine:function(){x&&o.stdout.write("\x1b[2K")},beginningOfLine:function(){x&&o.stdout.write("\x1b[0G")},CR:function(){x?(e.cursor.deleteLine(),e.cursor.beginningOfLine()):o.stdout.write("\r")}},e.list=function(t){console.error(),t.forEach(function(t,i){var n=b("error title","  %s) %s:\n")+b("error message","     %s")+b("error stack","\n%s\n"),o=t.err,r=o.message||"",l=o.stack||r,c=l.indexOf(r)+r.length,u=l.slice(0,c),f=o.actual,g=o.expected,m=!0;if(o.uncaught&&(u="Uncaught "+u),o.showDiff&&p(f,g)&&(m=!1,o.actual=f=h(d(f)),o.expected=g=h(d(g))),"string"==typeof f&&"string"==typeof g){n=b("error title","  %s) %s:\n%s")+b("error stack","\n%s\n");var v=r.match(/^([^:]+): expected/);u="\n      "+b("error message",v?v[1]:u),u+=e.inlineDiffs?s(o,m):a(o,m)}l=l.slice(c?c+1:c).replace(/^/gm,"  "),console.error(n,i+1,t.fullTitle(),u,l)})},n.prototype.epilogue=function(){var t,e=this.stats;console.log(),t=b("bright pass"," ")+b("green"," %d passing")+b("light"," (%s)"),console.log(t,e.passes||0,m(e.duration)),e.pending&&(t=b("pending"," ")+b("pending"," %d pending"),console.log(t,e.pending)),e.failures&&(t=b("fail","  %d failing"),console.error(t,e.failures),n.list(this.failures),console.error()),console.log()}}),t.register("reporters/doc.js",function(t,e,i){function n(t){function e(){return Array(i).join("  ")}o.call(this,t);var i=(this.stats,t.total,2);t.on("suite",function(t){t.root||(++i,console.log('%s<section class="suite">',e()),++i,console.log("%s<h1>%s</h1>",e(),r.escape(t.title)),console.log("%s<dl>",e()))}),t.on("suite end",function(t){t.root||(console.log("%s</dl>",e()),--i,console.log("%s</section>",e()),--i)}),t.on("pass",function(t){console.log("%s  <dt>%s</dt>",e(),r.escape(t.title));var i=r.escape(r.clean(t.fn.toString()));console.log("%s  <dd><pre><code>%s</code></pre></dd>",e(),i)})}var o=i("./base"),r=i("../utils");e=t.exports=n}),t.register("reporters/dot.js",function(t,e,i){function n(t){s.call(this,t);var e=this,i=(this.stats,.75*s.window.width|0),n=0;t.on("start",function(){o.stdout.write("\n  ")}),t.on("pending",function(){o.stdout.write(a("pending",s.symbols.dot))}),t.on("pass",function(t){++n%i==0&&o.stdout.write("\n  "),"slow"==t.speed?o.stdout.write(a("bright yellow",s.symbols.dot)):o.stdout.write(a(t.speed,s.symbols.dot))}),t.on("fail",function(){++n%i==0&&o.stdout.write("\n  "),o.stdout.write(a("fail",s.symbols.dot))}),t.on("end",function(){console.log(),e.epilogue()})}function r(){}var s=i("./base"),a=s.color;e=t.exports=n,r.prototype=s.prototype,n.prototype=new r,n.prototype.constructor=n}),t.register("reporters/html-cov.js",function(t,e,i){function n(t){var e=i("jade"),n=__dirname+"/templates/coverage.jade",l=a.readFileSync(n,"utf8"),c=e.compile(l,{filename:n}),u=this;s.call(this,t,!1),t.on("end",function(){o.stdout.write(c({cov:u.cov,coverageClass:r}))})}function r(t){return t>=75?"high":t>=50?"medium":t>=25?"low":"terrible"}var s=i("./json-cov"),a=i("browser/fs");e=t.exports=n}),t.register("reporters/html.js",function(t,e,i){function n(t,e){u.call(this,t);var i,n,m=this,v=this.stats,y=(t.total,r(g)),x=y.getElementsByTagName("li"),b=x[1].getElementsByTagName("em")[0],w=x[1].getElementsByTagName("a")[0],_=x[2].getElementsByTagName("em")[0],k=x[2].getElementsByTagName("a")[0],T=x[3].getElementsByTagName("em")[0],C=y.getElementsByTagName("canvas")[0],S=r('<ul id="mocha-report"></ul>'),E=[S];if(e=e||document.getElementById("mocha"),C.getContext){var A=window.devicePixelRatio||1;C.style.width=C.width,C.style.height=C.height,C.width*=A,C.height*=A,n=C.getContext("2d"),n.scale(A,A),i=new d}return e?(c(w,"click",function(){a();var t=/pass/.test(S.className)?"":" pass";S.className=S.className.replace(/fail|pass/g,"")+t,S.className.trim()&&s("test pass")}),c(k,"click",function(){a();var t=/fail/.test(S.className)?"":" fail";S.className=S.className.replace(/fail|pass/g,"")+t,S.className.trim()&&s("test fail")}),e.appendChild(y),e.appendChild(S),i&&i.size(40),t.on("suite",function(t){if(!t.root){var e=m.suiteURL(t),i=r('<li class="suite"><h1><a href="%s">%s</a></h1></li>',e,p(t.title));E[0].appendChild(i),E.unshift(document.createElement("ul")),i.appendChild(E[0])}}),t.on("suite end",function(t){t.root||E.shift()}),t.on("fail",function(e){"hook"==e.type&&t.emit("test end",e)}),void t.on("test end",function(t){var e=v.tests/this.total*100|0;i&&i.update(e).draw(n);var o=new f-v.start;if(l(b,v.passes),l(_,v.failures),l(T,(o/1e3).toFixed(2)),"passed"==t.state)var s=m.testURL(t),a=r('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="%s" class="replay">\u2023</a></h2></li>',t.speed,t.title,t.duration,s);else if(t.pending)var a=r('<li class="test pass pending"><h2>%e</h2></li>',t.title);else{var a=r('<li class="test fail"><h2>%e <a href="?grep=%e" class="replay">\u2023</a></h2></li>',t.title,encodeURIComponent(t.fullTitle())),u=t.err.stack||t.err.toString();~u.indexOf(t.err.message)||(u=t.err.message+"\n"+u),"[object Error]"==u&&(u=t.err.message),!t.err.stack&&t.err.sourceURL&&void 0!==t.err.line&&(u+="\n("+t.err.sourceURL+":"+t.err.line+")"),a.appendChild(r('<pre class="error">%e</pre>',u))}if(!t.pending){var d=a.getElementsByTagName("h2")[0];c(d,"click",function(){p.style.display="none"==p.style.display?"block":"none"});var p=r("<pre><code>%e</code></pre>",h.clean(t.fn.toString()));a.appendChild(p),p.style.display="none"}E[0]&&E[0].appendChild(a)})):o("#mocha div missing, add it to your document")}function o(t){document.body.appendChild(r('<div id="mocha-error">%s</div>',t))}function r(t){var e=arguments,i=document.createElement("div"),n=1;return i.innerHTML=t.replace(/%([se])/g,function(t,i){switch(i){case"s":return String(e[n++]);case"e":return p(e[n++])}}),i.firstChild}function s(t){for(var e=document.getElementsByClassName("suite"),i=0;i<e.length;i++){var n=e[i].getElementsByClassName(t);0==n.length&&(e[i].className+=" hidden")}}function a(){for(var t=document.getElementsByClassName("suite hidden"),e=0;e<t.length;++e)t[e].className=t[e].className.replace("suite hidden","suite")}function l(t,e){t.textContent?t.textContent=e:t.innerText=e}function c(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)}var u=i("./base"),h=i("../utils"),d=i("../browser/progress"),p=h.escape,f=global.Date;global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval;e=t.exports=n;var g='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="#">passes:</a> <em>0</em></li><li class="failures"><a href="#">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>';n.prototype.suiteURL=function(t){return"?grep="+encodeURIComponent(t.fullTitle())},n.prototype.testURL=function(t){return"?grep="+encodeURIComponent(t.fullTitle())}}),t.register("reporters/index.js",function(t,e,i){e.Base=i("./base"),e.Dot=i("./dot"),e.Doc=i("./doc"),e.TAP=i("./tap"),e.JSON=i("./json"),e.HTML=i("./html"),e.List=i("./list"),e.Min=i("./min"),e.Spec=i("./spec"),e.Nyan=i("./nyan"),e.XUnit=i("./xunit"),e.Markdown=i("./markdown"),e.Progress=i("./progress"),e.Landing=i("./landing"),e.JSONCov=i("./json-cov"),e.HTMLCov=i("./html-cov"),e.JSONStream=i("./json-stream")}),t.register("reporters/json-cov.js",function(t,e,i){function n(t,e){var i=this,e=1==arguments.length||e;l.call(this,t);var n=[],s=[],c=[];t.on("test end",function(t){n.push(t)}),t.on("pass",function(t){c.push(t)}),t.on("fail",function(t){s.push(t)}),t.on("end",function(){var t=global._$jscoverage||{},l=i.cov=r(t);l.stats=i.stats,l.tests=n.map(a),l.failures=s.map(a),l.passes=c.map(a),e&&o.stdout.write(JSON.stringify(l,null,2))})}function r(t){var e={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var i in t){var n=s(i,t[i]);e.files.push(n),e.hits+=n.hits,e.misses+=n.misses,e.sloc+=n.sloc}return e.files.sort(function(t,e){return t.filename.localeCompare(e.filename)}),e.sloc>0&&(e.coverage=e.hits/e.sloc*100),e}function s(t,e){var i={filename:t,coverage:0,hits:0,misses:0,sloc:0,source:{}};return e.source.forEach(function(t,n){n++,0===e[n]?(i.misses++,i.sloc++):void 0!==e[n]&&(i.hits++,i.sloc++),i.source[n]={source:t,coverage:void 0===e[n]?"":e[n]}}),i.coverage=i.hits/i.sloc*100,i}function a(t){return{title:t.title,fullTitle:t.fullTitle(),duration:t.duration}}var l=i("./base");e=t.exports=n}),t.register("reporters/json-stream.js",function(t,e,i){function n(t){s.call(this,t);var e=this,i=(this.stats,t.total);t.on("start",function(){console.log(JSON.stringify(["start",{total:i}]))}),t.on("pass",function(t){console.log(JSON.stringify(["pass",r(t)]))}),t.on("fail",function(t){console.log(JSON.stringify(["fail",r(t)]))}),t.on("end",function(){o.stdout.write(JSON.stringify(["end",e.stats]))})}function r(t){return{title:t.title,fullTitle:t.fullTitle(),duration:t.duration}}var s=i("./base");s.color;e=t.exports=n}),t.register("reporters/json.js",function(t,e,i){function n(t){var e=this;s.call(this,t);var i=[],n=[],a=[];t.on("test end",function(t){i.push(t)}),t.on("pass",function(t){a.push(t)}),t.on("fail",function(t){n.push(t)}),t.on("end",function(){var t={stats:e.stats,tests:i.map(r),failures:n.map(r),passes:a.map(r)};o.stdout.write(JSON.stringify(t,null,2))})}function r(t){return{title:t.title,fullTitle:t.fullTitle(),duration:t.duration}}var s=i("./base");s.cursor,s.color;e=t.exports=n}),t.register("reporters/landing.js",function(t,e,i){function n(t){function e(){var t=Array(n).join("-");return"  "+l("runway",t)}s.call(this,t);var i=this,n=(this.stats,.75*s.window.width|0),r=t.total,c=o.stdout,u=l("plane","\u2708"),h=-1,d=0;t.on("start",function(){c.write("\n  "),a.hide()}),t.on("test end",function(t){var i=-1==h?n*++d/r|0:h;"failed"==t.state&&(u=l("plane crash","\u2708"),h=i),c.write("\x1b[4F\n\n"),c.write(e()),c.write("\n  "),c.write(l("runway",Array(i).join("\u22c5"))),c.write(u),c.write(l("runway",Array(n-i).join("\u22c5")+"\n")),c.write(e()),c.write("\x1b[0m")}),t.on("end",function(){a.show(),console.log(),i.epilogue()})}function r(){}var s=i("./base"),a=s.cursor,l=s.color;e=t.exports=n,s.colors.plane=0,s.colors["plane crash"]=31,s.colors.runway=90,r.prototype=s.prototype,n.prototype=new r,n.prototype.constructor=n}),t.register("reporters/list.js",function(t,e,i){function n(t){s.call(this,t);var e=this,i=(this.stats,0);t.on("start",function(){console.log()}),t.on("test",function(t){o.stdout.write(l("pass","    "+t.fullTitle()+": "))}),t.on("pending",function(t){var e=l("checkmark","  -")+l("pending"," %s");console.log(e,t.fullTitle())}),t.on("pass",function(t){var e=l("checkmark","  "+s.symbols.dot)+l("pass"," %s: ")+l(t.speed,"%dms");a.CR(),console.log(e,t.fullTitle(),t.duration)}),t.on("fail",function(t){a.CR(),console.log(l("fail","  %d) %s"),++i,t.fullTitle())}),t.on("end",e.epilogue.bind(e))}function r(){}var s=i("./base"),a=s.cursor,l=s.color;e=t.exports=n,r.prototype=s.prototype,n.prototype=new r,n.prototype.constructor=n}),t.register("reporters/markdown.js",function(t,e,i){function n(t){function e(t){return Array(l).join("#")+" "+t}function i(t,e){var n=e;return e=e[t.title]=e[t.title]||{suite:t},t.suites.forEach(function(t){i(t,e)}),n}function n(t,e){++e;var i,o="";for(var r in t)"suite"!=r&&(r&&(i=" - ["+r+"](#"+s.slug(t[r].suite.fullTitle())+")\n"),r&&(o+=Array(e).join("  ")+i),o+=n(t[r],e));return--e,o}function a(t){var e=i(t,{});return n(e,0)}r.call(this,t);var l=(this.stats,0),c="";a(t.suite),t.on("suite",function(t){++l;var i=s.slug(t.fullTitle());c+='<a name="'+i+'"></a>\n',c+=e(t.title)+"\n"}),t.on("suite end",function(){--l}),t.on("pass",function(t){var e=s.clean(t.fn.toString());c+=t.title+".\n",c+="\n```js\n",c+=e+"\n",c+="```\n\n"}),t.on("end",function(){o.stdout.write("# TOC\n"),o.stdout.write(a(t.suite)),o.stdout.write(c)})}var r=i("./base"),s=i("../utils");e=t.exports=n}),t.register("reporters/min.js",function(t,e,i){function n(t){s.call(this,t),t.on("start",function(){o.stdout.write("\x1b[2J"),o.stdout.write("\x1b[1;3H")}),t.on("end",this.epilogue.bind(this))}function r(){}var s=i("./base");e=t.exports=n,r.prototype=s.prototype,n.prototype=new r,n.prototype.constructor=n}),t.register("reporters/nyan.js",function(t,e,i){function n(t){a.call(this,t);var e=this,i=(this.stats,.75*a.window.width|0),n=(this.rainbowColors=e.generateColors(),this.colorIndex=0,this.numberOfLines=4,this.trajectories=[[],[],[],[]],this.nyanCatWidth=11);this.trajectoryWidthMax=i-n,this.scoreboardWidth=5,this.tick=0;t.on("start",function(){a.cursor.hide(),e.draw()}),t.on("pending",function(){e.draw()}),t.on("pass",function(){e.draw()}),t.on("fail",function(){e.draw()}),t.on("end",function(){a.cursor.show();for(var t=0;t<e.numberOfLines;t++)r("\n");e.epilogue()})}function r(t){o.stdout.write(t)}function s(){}var a=i("./base");a.color;e=t.exports=n,n.prototype.draw=function(){this.appendRainbow(),this.drawScoreboard(),this.drawRainbow(),this.drawNyanCat(),this.tick=!this.tick},n.prototype.drawScoreboard=function(){function t(t,e){r(" "),r("\x1b["+t+"m"+e+"\x1b[0m"),r("\n")}var e=this.stats,i=a.colors;t(i.green,e.passes),t(i.fail,e.failures),t(i.pending,e.pending),r("\n"),this.cursorUp(this.numberOfLines)},n.prototype.appendRainbow=function(){for(var t=this.tick?"_":"-",e=this.rainbowify(t),i=0;i<this.numberOfLines;i++){var n=this.trajectories[i];n.length>=this.trajectoryWidthMax&&n.shift(),n.push(e)}},n.prototype.drawRainbow=function(){var t=this;this.trajectories.forEach(function(e){r("\x1b["+t.scoreboardWidth+"C"),r(e.join("")),r("\n")}),this.cursorUp(this.numberOfLines);
},n.prototype.drawNyanCat=function(){var t=this,e=this.scoreboardWidth+this.trajectories[0].length,i="\x1b["+e+"C",n="";r(i),r("_,------,"),r("\n"),r(i),n=t.tick?"  ":"   ",r("_|"+n+"/\\_/\\ "),r("\n"),r(i),n=t.tick?"_":"__";var o=t.tick?"~":"^";r(o+"|"+n+this.face()+" "),r("\n"),r(i),n=t.tick?" ":"  ",r(n+'""  "" '),r("\n"),this.cursorUp(this.numberOfLines)},n.prototype.face=function(){var t=this.stats;return t.failures?"( x .x)":t.pending?"( o .o)":t.passes?"( ^ .^)":"( - .-)"},n.prototype.cursorUp=function(t){r("\x1b["+t+"A")},n.prototype.cursorDown=function(t){r("\x1b["+t+"B")},n.prototype.generateColors=function(){for(var t=[],e=0;e<42;e++){var i=Math.floor(Math.PI/3),n=e*(1/6),o=Math.floor(3*Math.sin(n)+3),r=Math.floor(3*Math.sin(n+2*i)+3),s=Math.floor(3*Math.sin(n+4*i)+3);t.push(36*o+6*r+s+16)}return t},n.prototype.rainbowify=function(t){var e=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"\x1b[38;5;"+e+"m"+t+"\x1b[0m"},s.prototype=a.prototype,n.prototype=new s,n.prototype.constructor=n}),t.register("reporters/progress.js",function(t,e,i){function n(t,e){s.call(this,t);var i=this,e=e||{},n=(this.stats,.5*s.window.width|0),r=t.total,c=0;Math.max;e.open=e.open||"[",e.complete=e.complete||"\u25ac",e.incomplete=e.incomplete||s.symbols.dot,e.close=e.close||"]",e.verbose=!1,t.on("start",function(){console.log(),a.hide()}),t.on("test end",function(){c++;var t=c/r,i=n*t|0,s=n-i;a.CR(),o.stdout.write("\x1b[J"),o.stdout.write(l("progress","  "+e.open)),o.stdout.write(Array(i).join(e.complete)),o.stdout.write(Array(s).join(e.incomplete)),o.stdout.write(l("progress",e.close)),e.verbose&&o.stdout.write(l("progress"," "+c+" of "+r))}),t.on("end",function(){a.show(),console.log(),i.epilogue()})}function r(){}var s=i("./base"),a=s.cursor,l=s.color;e=t.exports=n,s.colors.progress=90,r.prototype=s.prototype,n.prototype=new r,n.prototype.constructor=n}),t.register("reporters/spec.js",function(t,e,i){function n(t){function e(){return Array(n).join("  ")}r.call(this,t);var i=this,n=(this.stats,0),o=0;t.on("start",function(){console.log()}),t.on("suite",function(t){++n,console.log(a("suite","%s%s"),e(),t.title)}),t.on("suite end",function(){--n,1==n&&console.log()}),t.on("pending",function(t){var i=e()+a("pending","  - %s");console.log(i,t.title)}),t.on("pass",function(t){if("fast"==t.speed){var i=e()+a("checkmark","  "+r.symbols.ok)+a("pass"," %s ");s.CR(),console.log(i,t.title)}else{var i=e()+a("checkmark","  "+r.symbols.ok)+a("pass"," %s ")+a(t.speed,"(%dms)");s.CR(),console.log(i,t.title,t.duration)}}),t.on("fail",function(t){s.CR(),console.log(e()+a("fail","  %d) %s"),++o,t.title)}),t.on("end",i.epilogue.bind(i))}function o(){}var r=i("./base"),s=r.cursor,a=r.color;e=t.exports=n,o.prototype=r.prototype,n.prototype=new o,n.prototype.constructor=n}),t.register("reporters/tap.js",function(t,e,i){function n(t){r.call(this,t);var e=(this.stats,1),i=0,n=0;t.on("start",function(){var e=t.grepTotal(t.suite);console.log("%d..%d",1,e)}),t.on("test end",function(){++e}),t.on("pending",function(t){console.log("ok %d %s # SKIP -",e,o(t))}),t.on("pass",function(t){i++,console.log("ok %d %s",e,o(t))}),t.on("fail",function(t,i){n++,console.log("not ok %d %s",e,o(t)),i.stack&&console.log(i.stack.replace(/^/gm,"  "))}),t.on("end",function(){console.log("# tests "+(i+n)),console.log("# pass "+i),console.log("# fail "+n)})}function o(t){return t.fullTitle().replace(/#/g,"")}var r=i("./base");r.cursor,r.color;e=t.exports=n}),t.register("reporters/xunit.js",function(t,e,i){function n(t){l.call(this,t);var e=this.stats,i=[];t.on("pending",function(t){i.push(t)}),t.on("pass",function(t){i.push(t)}),t.on("fail",function(t){i.push(t)}),t.on("end",function(){console.log(s("testsuite",{name:"Mocha Tests",tests:e.tests,failures:e.failures,errors:e.failures,skipped:e.tests-e.failures-e.passes,timestamp:(new h).toUTCString(),time:e.duration/1e3||0},!1)),i.forEach(r),console.log("</testsuite>")})}function o(){}function r(t){var e={classname:t.parent.fullTitle(),name:t.title,time:t.duration/1e3||0};if("failed"==t.state){var i=t.err;e.message=u(i.message),console.log(s("testcase",e,!1,s("failure",e,!1,a(i.stack))))}else t.pending?console.log(s("testcase",e,!1,s("skipped",{},!0))):console.log(s("testcase",e,!0))}function s(t,e,i,n){var o,r=i?"/>":">",s=[];for(var a in e)s.push(a+'="'+u(e[a])+'"');return o="<"+t+(s.length?" "+s.join(" "):"")+r,n&&(o+=n+"</"+t+r),o}function a(t){return"<![CDATA["+u(t)+"]]>"}var l=i("./base"),c=i("../utils"),u=c.escape,h=global.Date;global.setTimeout,global.setInterval,global.clearTimeout,global.clearInterval;e=t.exports=n,o.prototype=l.prototype,n.prototype=new o,n.prototype.constructor=n}),t.register("runnable.js",function(t,e,i){function n(t,e){this.title=t,this.fn=e,this.async=e&&e.length,this.sync=!this.async,this._timeout=2e3,this._slow=75,this.timedOut=!1}function o(){}var r=i("browser/events").EventEmitter,s=i("browser/debug")("mocha:runnable"),a=i("./ms"),l=global.Date,c=global.setTimeout,u=(global.setInterval,global.clearTimeout),h=(global.clearInterval,Object.prototype.toString);t.exports=n,o.prototype=r.prototype,n.prototype=new o,n.prototype.constructor=n,n.prototype.timeout=function(t){return 0==arguments.length?this._timeout:("string"==typeof t&&(t=a(t)),s("timeout %d",t),this._timeout=t,this.timer&&this.resetTimeout(),this)},n.prototype.slow=function(t){return 0===arguments.length?this._slow:("string"==typeof t&&(t=a(t)),s("timeout %d",t),this._slow=t,this)},n.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title},n.prototype.clearTimeout=function(){u(this.timer)},n.prototype.inspect=function(){return JSON.stringify(this,function(t,e){if("_"!=t[0])return"parent"==t?"#<Suite>":"ctx"==t?"#<Context>":e},2)},n.prototype.resetTimeout=function(){var t=this,e=this.timeout()||1e9;this.clearTimeout(),this.timer=c(function(){t.callback(new Error("timeout of "+e+"ms exceeded")),t.timedOut=!0},e)},n.prototype.globals=function(t){this._allowedGlobals=t},n.prototype.run=function(t){function e(t){o||(o=!0,r.emit("error",t||new Error("done() called multiple times")))}function i(i){if(!r.timedOut){if(n)return e(i);r.clearTimeout(),r.duration=new l-a,n=!0,t(i)}}var n,o,r=this,s=this.timeout(),a=new l,u=this.ctx;if(u&&u.runnable(this),this.async&&s&&(this.timer=c(function(){i(new Error("timeout of "+s+"ms exceeded")),r.timedOut=!0},s)),this.callback=i,this.async)try{this.fn.call(u,function(t){return t instanceof Error||"[object Error]"===h.call(t)?i(t):null!=t?i(new Error("done() invoked with non-Error: "+t)):void i()})}catch(t){i(t)}else{if(this.asyncOnly)return i(new Error("--async-only option in use without declaring `done()`"));try{this.pending||this.fn.call(u),this.duration=new l-a,t()}catch(e){t(e)}}}}),t.register("runner.js",function(t,e,i){function n(t){var e=this;this._globals=[],this._abort=!1,this.suite=t,this.total=t.total(),this.failures=0,this.on("test end",function(t){e.checkGlobals(t)}),this.on("hook end",function(t){e.checkGlobals(t)}),this.grep(/.*/),this.globals(this.globalProps().concat(a()))}function r(){}function s(t,e){return h(e,function(e){if(/^d+/.test(e))return!1;if(global.navigator&&/^getInterface/.test(e))return!1;if(global.navigator&&/^\d+/.test(e))return!1;if(/^mocha-/.test(e))return!1;var i=h(t,function(t){return~t.indexOf("*")?0==e.indexOf(t.split("*")[0]):e==t});return 0==i.length&&(!global.navigator||"onerror"!==e)})}function a(){if("object"==typeof o&&"string"==typeof o.version){var t=o.version.split(".").reduce(function(t,e){return t<<8|e});if(t<2315)return["errno"]}return[]}var l=i("browser/events").EventEmitter,c=i("browser/debug")("mocha:runner"),u=(i("./test"),i("./utils")),h=u.filter,d=(u.keys,["setTimeout","clearTimeout","setInterval","clearInterval","XMLHttpRequest","Date"]);t.exports=n,n.immediately=global.setImmediate||o.nextTick,r.prototype=l.prototype,n.prototype=new r,n.prototype.constructor=n,n.prototype.grep=function(t,e){return c("grep %s",t),this._grep=t,this._invert=e,this.total=this.grepTotal(this.suite),this},n.prototype.grepTotal=function(t){var e=this,i=0;return t.eachTest(function(t){var n=e._grep.test(t.fullTitle());e._invert&&(n=!n),n&&i++}),i},n.prototype.globalProps=function(){for(var t=u.keys(global),e=0;e<d.length;++e)~u.indexOf(t,d[e])||t.push(d[e]);return t},n.prototype.globals=function(t){return 0==arguments.length?this._globals:(c("globals %j",t),this._globals=this._globals.concat(t),this)},n.prototype.checkGlobals=function(t){if(!this.ignoreLeaks){var e,i=this._globals,n=this.globalProps();o.kill;t&&(i=i.concat(t._allowedGlobals||[])),this.prevGlobalsLength!=n.length&&(this.prevGlobalsLength=n.length,e=s(i,n),this._globals=this._globals.concat(e),e.length>1?this.fail(t,new Error("global leaks detected: "+e.join(", "))):e.length&&this.fail(t,new Error("global leak detected: "+e[0])))}},n.prototype.fail=function(t,e){++this.failures,t.state="failed","string"==typeof e&&(e=new Error('the string "'+e+'" was thrown, throw an Error :)')),this.emit("fail",t,e)},n.prototype.failHook=function(t,e){this.fail(t,e),this.suite.bail()&&this.emit("end")},n.prototype.hook=function(t,e){function i(t){var n=r[t];return n?s.failures&&o.bail()?e():(s.currentRunnable=n,n.ctx.currentTest=s.test,s.emit("hook",n),n.on("error",function(t){s.failHook(n,t)}),void n.run(function(o){n.removeAllListeners("error");var r=n.error();return r&&s.fail(s.test,r),o?(s.failHook(n,o),e(o)):(s.emit("hook end",n),delete n.ctx.currentTest,void i(++t))})):e()}var o=this.suite,r=o["_"+t],s=this;n.immediately(function(){i(0)})},n.prototype.hooks=function(t,e,i){function n(s){return o.suite=s,s?void o.hook(t,function(t){if(t){var s=o.suite;return o.suite=r,i(t,s)}n(e.pop())}):(o.suite=r,i())}var o=this,r=this.suite;n(e.pop())},n.prototype.hookUp=function(t,e){var i=[this.suite].concat(this.parents()).reverse();this.hooks(t,i,e)},n.prototype.hookDown=function(t,e){var i=[this.suite].concat(this.parents());this.hooks(t,i,e)},n.prototype.parents=function(){for(var t=this.suite,e=[];t=t.parent;)e.push(t);return e},n.prototype.runTest=function(t){var e=this.test,i=this;this.asyncOnly&&(e.asyncOnly=!0);try{e.on("error",function(t){i.fail(e,t)}),e.run(t)}catch(e){t(e)}},n.prototype.runTests=function(t,e){function i(t,n,o){var s=r.suite;r.suite=o?n.parent:n,r.suite?r.hookUp("afterEach",function(t,o){return r.suite=s,t?i(t,o,!0):void e(n)}):(r.suite=s,e(n))}function n(a,l){if(r.failures&&t._bail)return e();if(r._abort)return e();if(a)return i(a,l,!0);if(o=s.shift(),!o)return e();var c=r._grep.test(o.fullTitle());return r._invert&&(c=!c),c?o.pending?(r.emit("pending",o),r.emit("test end",o),n()):(r.emit("test",r.test=o),void r.hookDown("beforeEach",function(t,e){return t?i(t,e,!1):(r.currentRunnable=r.test,void r.runTest(function(t){return o=r.test,t?(r.fail(o,t),r.emit("test end",o),r.hookUp("afterEach",n)):(o.state="passed",r.emit("pass",o),r.emit("test end",o),void r.hookUp("afterEach",n))}))})):n()}var o,r=this,s=t.tests.slice();this.next=n,n()},n.prototype.runSuite=function(t,e){function i(e){if(e)return e==t?n():n(e);if(r._abort)return n();var o=t.suites[s++];return o?void r.runSuite(o,i):n()}function n(i){r.suite=t,r.hook("afterAll",function(){r.emit("suite end",t),e(i)})}var o=this.grepTotal(t),r=this,s=0;return c("run suite %s",t.fullTitle()),o?(this.emit("suite",this.suite=t),void this.hook("beforeAll",function(e){return e?n():void r.runTests(t,i)})):e()},n.prototype.uncaught=function(t){c("uncaught exception %s",t.message);var e=this.currentRunnable;if(e&&"failed"!=e.state)return e.clearTimeout(),t.uncaught=!0,this.fail(e,t),"test"==e.type?(this.emit("test end",e),void this.hookUp("afterEach",this.next)):void this.emit("end")},n.prototype.run=function(t){function e(t){i.uncaught(t)}var i=this,t=t||function(){};return c("start"),this.on("end",function(){c("end"),o.removeListener("uncaughtException",e),t(i.failures)}),this.emit("start"),this.runSuite(this.suite,function(){c("finished running"),i.emit("end")}),o.on("uncaughtException",e),this},n.prototype.abort=function(){c("aborting"),this._abort=!0}}),t.register("suite.js",function(t,e,i){function n(t,e){this.title=t,this.ctx=e,this.suites=[],this.tests=[],this.pending=!1,this._beforeEach=[],this._beforeAll=[],this._afterEach=[],this._afterAll=[],this.root=!t,this._timeout=2e3,this._slow=75,this._bail=!1}function o(){}var r=i("browser/events").EventEmitter,s=i("browser/debug")("mocha:suite"),a=i("./ms"),l=i("./utils"),c=i("./hook");e=t.exports=n,e.create=function(t,e){var i=new n(e,t.ctx);return i.parent=t,t.pending&&(i.pending=!0),e=i.fullTitle(),t.addSuite(i),i},o.prototype=r.prototype,n.prototype=new o,n.prototype.constructor=n,n.prototype.clone=function(){var t=new n(this.title);return s("clone"),t.ctx=this.ctx,t.timeout(this.timeout()),t.slow(this.slow()),t.bail(this.bail()),t},n.prototype.timeout=function(t){return 0==arguments.length?this._timeout:("string"==typeof t&&(t=a(t)),s("timeout %d",t),this._timeout=parseInt(t,10),this)},n.prototype.slow=function(t){return 0===arguments.length?this._slow:("string"==typeof t&&(t=a(t)),s("slow %d",t),this._slow=t,this)},n.prototype.bail=function(t){return 0==arguments.length?this._bail:(s("bail %s",t),this._bail=t,this)},n.prototype.beforeAll=function(t){if(this.pending)return this;var e=new c('"before all" hook',t);return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.ctx=this.ctx,this._beforeAll.push(e),this.emit("beforeAll",e),this},n.prototype.afterAll=function(t){if(this.pending)return this;var e=new c('"after all" hook',t);return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.ctx=this.ctx,this._afterAll.push(e),this.emit("afterAll",e),this},n.prototype.beforeEach=function(t){if(this.pending)return this;var e=new c('"before each" hook',t);return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.ctx=this.ctx,this._beforeEach.push(e),this.emit("beforeEach",e),this},n.prototype.afterEach=function(t){if(this.pending)return this;var e=new c('"after each" hook',t);return e.parent=this,e.timeout(this.timeout()),e.slow(this.slow()),e.ctx=this.ctx,this._afterEach.push(e),this.emit("afterEach",e),this},n.prototype.addSuite=function(t){return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.bail(this.bail()),this.suites.push(t),this.emit("suite",t),this},n.prototype.addTest=function(t){return t.parent=this,t.timeout(this.timeout()),t.slow(this.slow()),t.ctx=this.ctx,this.tests.push(t),this.emit("test",t),this},n.prototype.fullTitle=function(){if(this.parent){var t=this.parent.fullTitle();if(t)return t+" "+this.title}return this.title},n.prototype.total=function(){return l.reduce(this.suites,function(t,e){return t+e.total()},0)+this.tests.length},n.prototype.eachTest=function(t){return l.forEach(this.tests,t),l.forEach(this.suites,function(e){e.eachTest(t)}),this}}),t.register("test.js",function(t,e,i){function n(t,e){r.call(this,t,e),this.pending=!e,this.type="test"}function o(){}var r=i("./runnable");t.exports=n,o.prototype=r.prototype,n.prototype=new o,n.prototype.constructor=n}),t.register("utils.js",function(t,e,i){function n(t){return!~c.indexOf(t)}function o(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew *(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}var r=i("browser/fs"),s=i("browser/path"),a=s.join,l=i("browser/debug")("mocha:watch"),c=["node_modules",".git"];e.escape=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.forEach=function(t,e,i){for(var n=0,o=t.length;n<o;n++)e.call(i,t[n],n)},e.map=function(t,e,i){for(var n=[],o=0,r=t.length;o<r;o++)n.push(e.call(i,t[o],o));return n},e.indexOf=function(t,e,i){for(var n=i||0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},e.reduce=function(t,e,i){for(var n=i,o=0,r=t.length;o<r;o++)n=e(n,t[o],o,t);return n},e.filter=function(t,e){for(var i=[],n=0,o=t.length;n<o;n++){var r=t[n];e(r,n,t)&&i.push(r)}return i},e.keys=Object.keys||function(t){var e=[],i=Object.prototype.hasOwnProperty;for(var n in t)i.call(t,n)&&e.push(n);return e},e.watch=function(t,e){var i={interval:100};t.forEach(function(t){l("file %s",t),r.watchFile(t,i,function(i,n){n.mtime<i.mtime&&e(t)})})},e.files=function(t,i){return i=i||[],r.readdirSync(t).filter(n).forEach(function(n){n=a(t,n),r.statSync(n).isDirectory()?e.files(n,i):n.match(/\.(js|coffee|litcoffee|coffee.md)$/)&&i.push(n)}),i},e.slug=function(t){return t.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")},e.clean=function(t){t=t.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,"").replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var i=t.match(/^\n?( *)/)[1].length,n=t.match(/^\n?(\t*)/)[1].length,o=new RegExp("^\n?"+(n?"\t":" ")+"{"+(n?n:i)+"}","gm");return t=t.replace(o,""),e.trim(t)},e.escapeRegexp=function(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},e.parseQuery=function(t){return e.reduce(t.replace("?","").split("&"),function(t,e){var i=e.indexOf("="),n=e.slice(0,i),o=e.slice(++i);return t[n]=decodeURIComponent(o),t},{})},e.highlightTags=function(t){for(var e=document.getElementsByTagName(t),i=0,n=e.length;i<n;++i)e[i].innerHTML=o(e[i].innerHTML)}}),global=function(){return this}();var i=global.Date,n=global.setTimeout,o=(global.setInterval,global.clearTimeout,global.clearInterval,{});o.exit=function(){},o.stdout={};var r=[];o.removeListener=function(t,e){if("uncaughtException"==t){global.onerror=function(){};var i=s.utils.indexOf(r,e);i!=-1&&r.splice(i,1)}},o.on=function(t,e){"uncaughtException"==t&&(global.onerror=function(t,i,n){return e(new Error(t+" ("+i+":"+n+")")),!0},r.push(e))};var s=global.Mocha=t("mocha"),a=global.mocha=new s({reporter:"html"});a.suite.removeAllListeners("pre-require");var l,c=[];s.Runner.immediately=function(t){c.push(t),l||(l=n(e,0))},a.throwError=function(t){throw s.utils.forEach(r,function(e){e(t)}),t},a.ui=function(t){return s.prototype.ui.call(this,t),this.suite.emit("pre-require",global,null,this),this},a.setup=function(t){"string"==typeof t&&(t={ui:t});for(var e in t)this[e](t[e]);return this},a.run=function(t){a.options;a.globals("location");var e=s.utils.parseQuery(global.location.search||"");return e.grep&&a.grep(e.grep),e.invert&&a.invert(),s.prototype.run.call(a,function(){global.document&&s.utils.highlightTags("code"),t&&t()})},s.process=o}();